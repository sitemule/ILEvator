CPD000D: Command QSYS/CRTRPGMOD not safe for a multithreaded job.
RNS9305: Module API placed in library ILEVATOR. 00 highest severity. Created on 29-11-23 at 16:48:52.
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      1
  Command  . . . . . . . . . . . . :   CRTRPGMOD
    Issued by  . . . . . . . . . . :     NLI
  Module . . . . . . . . . . . . . :   API
    Library  . . . . . . . . . . . :     ILEVATOR
  Text 'description' . . . . . . . :   *SRCMBRTXT
  Source stream file   . . . . . . :   src/api.rpgmod
    CCSID  . . . . . . . . . . . . :     1252
  Target CCSID . . . . . . . . . . :   *JOB (277)
  Text 'description' . . . . . . . :
  Last Change  . . . . . . . . . . :   29-11-23  16:44:38
  Generation severity level  . . . :   10
  Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                       *EXPDDS    *EXT       *NOSHOWSKP *SRCSTMT
                                       *DEBUGIO   *NOUNREF   *NOEVENTF
  Debugging views  . . . . . . . . :   *LIST
  Debug encryption key . . . . . . :   *NONE
  Output . . . . . . . . . . . . . :   *PRINT
  Optimization level . . . . . . . :   *NONE
  Source listing indentation . . . :   *NONE
  Type conversion options  . . . . :   *NONE
  Sort sequence  . . . . . . . . . :   *HEX
  Language identifier  . . . . . . :   *JOBRUN
  Replace module . . . . . . . . . :   *YES
  Authority  . . . . . . . . . . . :   *LIBCRTAUT
  Truncate numeric . . . . . . . . :   *YES
  Fix numeric  . . . . . . . . . . :   *NONE
  Target release . . . . . . . . . :   *CURRENT
  Allow null values  . . . . . . . :   *NO
  Storage model . . .  . . . . . . :   *INHERIT
  Binding directory  . . . . . . . :   *NONE
  Define condition names . . . . . :   RPG_HAS_OVERLOAD
  Enable performance collection  . :   *PEP
  Profiling data . . . . . . . . . :   *NOCOL
  Licensed Internal Code options . :
  Generate program interface . . . :   *NO
  Include directory  . . . . . . . :   headers
                                   :   ext/headers
  Preprocessor options . . . . . . :   *NONE
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      2
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
                          S o u r c e   L i s t i n g
000001 **FREE                                                                                                               000001
000002                                                                                                                      000002
000003 ctl-opt nomain thread(*concurrent);                                                                                  000003
000004                                                                                                                      000004
000005 /include 'api.rpginc'                                                                                                000005
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  api.rpginc                                                   *                     1
        * External name  . . . . . . :  headers/api.rpginc                                           *                     1
        * Last change  . . . . . . . :  29-11-23  12:18:13                                           *                     1
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              1000001
000002+                                                                                                                    1000002
000003+/if defined (ILEVATOR_API)                                                                                          1000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              1000005
000006+                                                                                                                    1000006
000007+/define ILEVATOR_API                                                                                                1000007
000008+                                                                                                                    1000008
000009+                                                                                                                    1000009
000010+dcl-ds ilevator_t qualified template align(*full);                                                                  1000010
000011+    sockets pointer;                                                                                                1000011
000012+    method pointer;                                                                                                 1000012
000013+    url pointer;                                                                                                    1000013
000014+    timeout packed(9:3);                                                                                            1000014
000015+    retries int(5);                                                                                                 1000015
000016+    useProxy ind ;                                                                                                  1000016
000017+    responseHeaderHasContentLength ind ;                                                                            1000017
000018+    responseIsChunked ind ;                                                                                         1000018
000019+    headerList pointer;                                                                                             1000019
000020+    requestHeaderList pointer;                                                                                      1000020
000021+                                                                                                                    1000021
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      3
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000022+    requestDataBuffer likeds(anychar_t);                                                                            1000022
000023+    responseHeaderBuffer likeds(anychar_t);                                                                         1000023
000024+    responseDataBuffer likeds(anychar_t);                                                                           1000024
000025+    responseDataFile pointer;                                                                                       1000025
000026+    authProvider pointer;                                                                                           1000026
000027+    requestHandler pointer;                                                                                         1000027
000028+                                                                                                                    1000028
000029+    headerLen    int(10);                                                                                           1000029
000030+    contentData pointer;                                                                                            1000030
000031+    contentLength int(10);                                                                                          1000031
000032+    contentLengthCalculated int(10);                                                                                1000032
000033+                                                                                                                    1000033
000034+    rawResponse pointer;                                                                                            1000034
000035+    ccsid int(10);                                                                                                  1000035
000036+    status int(10);                                                                                                 1000036
000037+                                                                                                                    1000037
000038+    server    char(512);                                                                                            1000038
000039+    port      int(10);                                                                                              1000039
000040+    resource  char(32766);                                                                                          1000040
000041+    host      char(512);                                                                                            1000041
000042+    user      char(256);                                                                                            1000042
000043+    password  char(256);                                                                                            1000043
000044+    location  char(256);                                                                                            1000044
000045+    message   char(256);                                                                                            1000045
000046+                                                                                                                    1000046
000047+    buffer pointer;                                                                                                 1000047
000048+    bufferSize int(10);                                                                                             1000048
000049+    bufferTotalLength int(10);                                                                                      1000049
000050+    bufferEnd pointer;                                                                                              1000050
000051+    proxyTunnel pointer;                                                                                            1000051
000052+end-ds;                                                                                                             1000052
000053+                                                                                                                    1000053
000054+                                                                                                                    1000054
000055+///                                                                                                                 1000055
000056+// Template for UTF8 varchars. default to 2M                                                                        1000056
000057+///                                                                                                                 1000057
000058+dcl-s IV_LONGUTF8VARCHAR varchar(2097152:4) ccsid(*utf8) template;                                                  1000058
000059+                                                                                                                    1000059
000060+///                                                                                                                 1000060
000061+// Template for form data.                                                                                          1000061
000062+///                                                                                                                 1000062
000063+dcl-ds iv_lvarpuchar_t qualified template;                                                                          1000063
000064+    length uns(10);                                                                                                 1000064
000065+    string pointer;                                                                                                 1000065
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      4
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000066+end-ds;                                                                                                             1000066
000067+                                                                                                                    1000067
000068+dcl-c IV_STATUS_OK 0;                                                                                               1000068
000069+dcl-c IV_STATUS_RETRY 1;                                                                                            1000069
000070+dcl-c IV_STATUS_ERROR 2;                                                                                            1000070
000071+                                                                                                                    1000071
000072+///                                                                                                                 1000072
000073+// Buffer type "Bytes"                                                                                              1000073
000074+///                                                                                                                 1000074
000075+dcl-c IV_BYTES 0;                                                                                                   1000075
000076+///                                                                                                                 1000076
000077+// Buffer type VARCHAR with a 2 byte size field                                                                     1000077
000078+///                                                                                                                 1000078
000079+dcl-c IV_VARCHAR2 1;                                                                                                1000079
000080+///                                                                                                                 1000080
000081+// Buffer type VARCHAR with a 4 byte size field                                                                     1000081
000082+///                                                                                                                 1000082
000083+dcl-c IV_VARCHAR4 2;                                                                                                1000083
000084+                                                                                                                    1000084
000085+///                                                                                                                 1000085
000086+// Maximum HTTP method size                                                                                         1000086
000087+///                                                                                                                 1000087
000088+dcl-c IV_METHOD_SIZE 10;                                                                                            1000088
000089+///                                                                                                                 1000089
000090+// Maximum URL size                                                                                                 1000090
000091+///                                                                                                                 1000091
000092+dcl-c IV_URL_SIZE 32766;                                                                                            1000092
000093+///                                                                                                                 1000093
000094+// Default buffer size for input and output                                                                         1000094
000095+///                                                                                                                 1000095
000096+dcl-c IV_BUFFER_SIZE 1048576;                                                                                       1000096
000097+///                                                                                                                 1000097
000098+// Maximum HTTP header name/key size                                                                                1000098
000099+///                                                                                                                 1000099
000100+dcl-c IV_HEADER_NAME_SIZE 1024;                                                                                     1000100
000101+///                                                                                                                 1000101
000102+// Maximum HTTP header value size                                                                                   1000102
000103+///                                                                                                                 1000103
000104+dcl-c IV_HEADER_VALUE_SIZE 16384;                                                                                   1000104
000105+                                                                                                                    1000105
000106+///                                                                                                                 1000106
000107+// Protocol plain HTTP                                                                                              1000107
000108+///                                                                                                                 1000108
000109+dcl-c IV_HTTP 0;                                                                                                    1000109
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      5
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000110+                                                                                                                    1000110
000111+///                                                                                                                 1000111
000112+// Protocol HTTPS (Secure HTTP: Certificate and certificate password required)                                      1000112
000113+///                                                                                                                 1000113
000114+dcl-c IV_HTTPS 1;                                                                                                   1000114
000115+                                                                                                                    1000115
000116+                                                                                                                    1000116
000117+///                                                                                                                 1000117
000118+// The request has succeeded. The meaning of the success depends on the HTTP method:                                1000118
000119+// <ul>                                                                                                             1000119
000120+//   <li>GET: The resource has been fetched and is transmitted in the message body.</li>                            1000120
000121+//   <li>HEAD: The entity headers are in the message body.</li>                                                     1000121
000122+//   <li>PUT or POST: The resource describing the result of the action is transmitted in the message                1000122
 ...    body.</li>
000123+//   <li>TRACE: The message body contains the request message as received by the server.</li>                       1000123
000124+// </ul>                                                                                                            1000124
000125+///                                                                                                                 1000125
000126+dcl-c IV_HTTP_OK 200;                                                                                               1000126
000127+///                                                                                                                 1000127
000128+// The request has succeeded and a new resource has been created as a result.                                       1000128
000129+// This is typically the response sent after POST requests, or some PUT requests.                                   1000129
000130+///                                                                                                                 1000130
000131+dcl-c IV_HTTP_CREATED 201;                                                                                          1000131
000132+///                                                                                                                 1000132
000133+// The request has been received but not yet acted upon. It is noncommittal,                                        1000133
000134+// since there is no way in HTTP to later send an asynchronous response indicating                                  1000134
000135+// the outcome of the request. It is intended for cases where another process or                                    1000135
000136+// server handles the request, or for batch processing.                                                             1000136
000137+///                                                                                                                 1000137
000138+dcl-c IV_HTTP_ACCEPTED 202;                                                                                         1000138
000139+///                                                                                                                 1000139
000140+// This response code means the returned meta-information is not exactly the same                                   1000140
000141+// as is available from the origin server, but is collected from a local or a                                       1000141
000142+// third-party copy. This is mostly used for mirrors or backups of another resource.                                1000142
000143+// Except for that specific case, the "200 OK" response is preferred to this status.                                1000143
000144+///                                                                                                                 1000144
000145+dcl-c IV_HTTP_NON_AUTHORITIVE_INFO 203;                                                                             1000145
000146+///                                                                                                                 1000146
000147+// There is no content to send for this request, but the headers may be useful.                                     1000147
000148+// The user-agent may update its cached headers for this resource with the new ones.                                1000148
000149+///                                                                                                                 1000149
000150+dcl-c IV_HTTP_NO_CONTENT 204;                                                                                       1000150
000151+///                                                                                                                 1000151
000152+// Tells the user-agent to reset the document which sent this request.                                              1000152
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      6
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000153+///                                                                                                                 1000153
000154+dcl-c IV_HTTP_RESET_CONTENT 205;                                                                                    1000154
000155+///                                                                                                                 1000155
000156+// This response code is used when the Range header is sent from the client to                                      1000156
000157+// request only part of a resource.                                                                                 1000157
000158+///                                                                                                                 1000158
000159+dcl-c IV_HTTP_PARTIAL_CONTENT 206;                                                                                  1000159
000160+///                                                                                                                 1000160
000161+// Conveys information about multiple resources, for situations where multiple                                      1000161
000162+// status codes might be appropriate.                                                                               1000162
000163+///                                                                                                                 1000163
000164+dcl-c IV_HTTP_MULTI_STATUS 207;                                                                                     1000164
000165+///                                                                                                                 1000165
000166+// Used inside a &lt;dav:propstat&gt; response element to avoid repeatedly enumerating                              1000166
000167+// the internal members of multiple bindings to the same collection.                                                1000167
000168+///                                                                                                                 1000168
000169+dcl-c IV_HTTP_ALREADY_REPORTED 208;                                                                                 1000169
000170+///                                                                                                                 1000170
000171+// The server has fulfilled a GET request for the resource, and the response is                                     1000171
000172+// a representation of the result of one or more instance-manipulations applied                                     1000172
000173+// to the current instance.                                                                                         1000173
000174+///                                                                                                                 1000174
000175+dcl-c IV_HTTP_IM_USED 226;                                                                                          1000175
000176+///                                                                                                                 1000176
000177+// The server could not understand the request due to invalid syntax.                                               1000177
000178+///                                                                                                                 1000178
000179+dcl-c IV_HTTP_BAD_REQUEST 400;                                                                                      1000179
000180+///                                                                                                                 1000180
000181+// Although the HTTP standard specifies "unauthorized", semantically this response                                  1000181
000182+// means "unauthenticated". That is, the client must authenticate itself to get                                     1000182
000183+// the requested response.                                                                                          1000183
000184+///                                                                                                                 1000184
000185+dcl-c IV_HTTP_UNAUTHORIZED 401;                                                                                     1000185
000186+///                                                                                                                 1000186
000187+// This response code is reserved for future use. The initial aim for creating                                      1000187
000188+// this code was using it for digital payment systems, however this status code                                     1000188
000189+// is used very rarely and no standard convention exists.                                                           1000189
000190+///                                                                                                                 1000190
000191+dcl-c IV_HTTP_PAYMENT_REQUIRED 402;                                                                                 1000191
000192+///                                                                                                                 1000192
000193+// The client does not have access rights to the content; that is, it is                                            1000193
000194+// unauthorized, so the server is refusing to give the requested resource.                                          1000194
000195+// Unlike 401, the client's identity is known to the server.                                                        1000195
000196+///                                                                                                                 1000196
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      7
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000197+dcl-c IV_HTTP_FORBIDDEN 403;                                                                                        1000197
000198+///                                                                                                                 1000198
000199+// The server can not find the requested resource. In the browser, this means                                       1000199
000200+// the URL is not recognized. In an API, this can also mean that the endpoint is                                    1000200
000201+// valid but the resource itself does not exist. Servers may also send this                                         1000201
000202+// response instead of 403 to hide the existence of a resource from an                                              1000202
000203+// unauthorized client. This response code is probably the most famous one due                                      1000203
000204+// to its frequent occurrence on the web.                                                                           1000204
000205+///                                                                                                                 1000205
000206+dcl-c IV_HTTP_NOT_FOUND 404;                                                                                        1000206
000207+///                                                                                                                 1000207
000208+// The request method is known by the server but has been disabled and cannot be                                    1000208
000209+// used. For example, an API may forbid DELETE-ing a resource. The two mandatory                                    1000209
000210+// methods, GET and HEAD, must never be disabled and should not return this error                                   1000210
000211+// code.                                                                                                            1000211
000212+///                                                                                                                 1000212
000213+dcl-c IV_HTTP_METHOD_NOT_ALLOWED 405;                                                                               1000213
000214+///                                                                                                                 1000214
000215+// This response is sent when the web server, after performing server-driven                                        1000215
000216+// content negotiation, doesn't find any content that conforms to the criteria                                      1000216
000217+// given by the user agent.                                                                                         1000217
000218+///                                                                                                                 1000218
000219+dcl-c IV_HTTP_NOT_ACCEPTABLE 406;                                                                                   1000219
000220+///                                                                                                                 1000220
000221+// This is similar to 401 but authentication is needed to be done by a proxy.                                       1000221
000222+///                                                                                                                 1000222
000223+dcl-c IV_HTTP_PROXY_AUTH_REQUIRED 407;                                                                              1000223
000224+///                                                                                                                 1000224
000225+// This response is sent on an idle connection by some servers, even without any                                    1000225
000226+// previous request by the client. It means that the server would like to shut                                      1000226
000227+// down this unused connection. This response is used much more since some                                          1000227
000228+// browsers, like Chrome, Firefox 27+, or IE9, use HTTP pre-connection mechanisms                                   1000228
000229+// to speed up surfing. Also note that some servers merely shut down the                                            1000229
000230+// connection without sending this message.                                                                         1000230
000231+///                                                                                                                 1000231
000232+dcl-c IV_HTTP_REQUEST_TIMEOUT 408;                                                                                  1000232
000233+///                                                                                                                 1000233
000234+// This response is sent when a request conflicts with the current state of the server.                             1000234
000235+///                                                                                                                 1000235
000236+dcl-c IV_HTTP_CONFLICT 409;                                                                                         1000236
000237+///                                                                                                                 1000237
000238+// This response is sent when the requested content has been permanently deleted                                    1000238
000239+// from server, with no forwarding address. Clients are expected to remove their                                    1000239
000240+// caches and links to the resource. The HTTP specification intends this status                                     1000240
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      8
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000241+// code to be used for "limited-time, promotional services". APIs should not feel                                   1000241
000242+// compelled to indicate resources that have been deleted with this status code.                                    1000242
000243+///                                                                                                                 1000243
000244+dcl-c IV_HTTP_GONE 410;                                                                                             1000244
000245+///                                                                                                                 1000245
000246+// Server rejected the request because the Content-Length header field is not                                       1000246
000247+// defined and the server requires it.                                                                              1000247
000248+///                                                                                                                 1000248
000249+dcl-c IV_HTTP_LENGTH_REQUIRED 411;                                                                                  1000249
000250+///                                                                                                                 1000250
000251+// The client has indicated preconditions in its headers which the server does not meet.                            1000251
000252+///                                                                                                                 1000252
000253+dcl-c IV_HTTP_PRECONDITION_FAILED 412;                                                                              1000253
000254+///                                                                                                                 1000254
000255+// Request entity is larger than limits defined by server; the server might                                         1000255
000256+// close the connection or return an Retry-After header field.                                                      1000256
000257+///                                                                                                                 1000257
000258+dcl-c IV_HTTP_PAYLOAD_TOO_LARGE 413;                                                                                1000258
000259+///                                                                                                                 1000259
000260+// The URI requested by the client is longer than the server is willing to interpret.                               1000260
000261+///                                                                                                                 1000261
000262+dcl-c IV_HTTP_REQUEST_URI_TOO_LONG 414;                                                                             1000262
000263+///                                                                                                                 1000263
000264+// The media format of the requested data is not supported by the server, so the                                    1000264
000265+// server is rejecting the request.                                                                                 1000265
000266+///                                                                                                                 1000266
000267+dcl-c IV_HTTP_UNSUPPORTED_MEDIA_TYPE 415;                                                                           1000267
000268+///                                                                                                                 1000268
000269+// The range specified by the Range header field in the request can't be                                            1000269
000270+// fulfilled; it's possible that the range is outside the size of the target                                        1000270
000271+// URI's data.                                                                                                      1000271
000272+///                                                                                                                 1000272
000273+dcl-c IV_HTTP_REQUESTED_RANGE_NOT_SATISFIABLE 416;                                                                  1000273
000274+///                                                                                                                 1000274
000275+// This response code means the expectation indicated by the Expect request                                         1000275
000276+// header field can't be met by the server.                                                                         1000276
000277+///                                                                                                                 1000277
000278+dcl-c IV_HTTP_EXPECTATION_FAILED 417;                                                                               1000278
000279+///                                                                                                                 1000279
000280+// The server refuses the attempt to brew coffee with a teapot.                                                     1000280
000281+///                                                                                                                 1000281
000282+dcl-c IV_HTTP_TEAPOT 418;                                                                                           1000282
000283+///                                                                                                                 1000283
000284+// The request was directed at a server that is not able to produce a response.                                     1000284
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page      9
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000285+// This can be sent by a server that is not configured to produce responses for                                     1000285
000286+// the combination of scheme and authority that are included in the request URI.                                    1000286
000287+///                                                                                                                 1000287
000288+dcl-c IV_HTTP_MISDIRECTED_REQUEST 421;                                                                              1000288
000289+///                                                                                                                 1000289
000290+// The request was well-formed but was unable to be followed due to semantic errors.                                1000290
000291+///                                                                                                                 1000291
000292+dcl-c IV_HTTP_UNPROCESSABLE_ENTITY 422;                                                                             1000292
000293+///                                                                                                                 1000293
000294+// The resource that is being accessed is locked.                                                                   1000294
000295+///                                                                                                                 1000295
000296+dcl-c IV_HTTP_LOCKED 423;                                                                                           1000296
000297+///                                                                                                                 1000297
000298+// The request failed due to failure of a previous request.                                                         1000298
000299+///                                                                                                                 1000299
000300+dcl-c IV_HTTP_FAILED_DEPENDENCY 424;                                                                                1000300
000301+///                                                                                                                 1000301
000302+// Indicates that the server is unwilling to risk processing a request that                                         1000302
000303+// might be replayed.                                                                                               1000303
000304+///                                                                                                                 1000304
000305+dcl-c IV_HTTP_TOO_EARLY 425;                                                                                        1000305
000306+///                                                                                                                 1000306
000307+// The server refuses to perform the request using the current protocol but                                         1000307
000308+// might be willing to do so after the client upgrades to a different protocol.                                     1000308
000309+// The server sends an Upgrade header in a 426 response to indicate the required                                    1000309
000310+// protocol(s).                                                                                                     1000310
000311+///                                                                                                                 1000311
000312+dcl-c IV_HTTP_UPGRADE_REQUIRED 426;                                                                                 1000312
000313+///                                                                                                                 1000313
000314+// The origin server requires the request to be conditional. This response is                                       1000314
000315+// intended to prevent the 'lost update' problem, where a client GETs a                                             1000315
000316+// resource's state, modifies it, and PUTs it back to the server, when meanwhile                                    1000316
000317+// a third party has modified the state on the server, leading to a conflict.                                       1000317
000318+///                                                                                                                 1000318
000319+dcl-c IV_HTTP_PRECONDITION_REQUIRED 428;                                                                            1000319
000320+///                                                                                                                 1000320
000321+// The user has sent too many requests in a given amount of time ("rate limiting").                                 1000321
000322+///                                                                                                                 1000322
000323+dcl-c IV_HTTP_TOO_MANY_REQUESTS 429;                                                                                1000323
000324+///                                                                                                                 1000324
000325+// The server is unwilling to process the request because its header fields are                                     1000325
000326+// too large. The request may be resubmitted after reducing the size of the                                         1000326
000327+// request header fields.                                                                                           1000327
000328+///                                                                                                                 1000328
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     10
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000329+dcl-c IV_HTTP_REQUEST_HEADER_FIELDS_TOO_LARGE 431;                                                                  1000329
000330+///                                                                                                                 1000330
000331+// The user-agent requested a resource that cannot legally be provided, such as                                     1000331
000332+// a web page censored by a government.                                                                             1000332
000333+///                                                                                                                 1000333
000334+dcl-c IV_HTTP_UNAVAILABLE_FOR_LEGAL_REASONS 451;                                                                    1000334
000335+///                                                                                                                 1000335
000336+// The server has encountered a situation it doesn't know how to handle.                                            1000336
000337+///                                                                                                                 1000337
000338+dcl-c IV_HTTP_INTERNAL_SERVER_ERROR 500;                                                                            1000338
000339+///                                                                                                                 1000339
000340+// The request method is not supported by the server and cannot be handled.                                         1000340
000341+// The only methods that servers are required to support (and therefore that                                        1000341
000342+// must not return this code) are GET and HEAD.                                                                     1000342
000343+///                                                                                                                 1000343
000344+dcl-c IV_HTTP_NOT_IMPLEMENTED 501;                                                                                  1000344
000345+///                                                                                                                 1000345
000346+// This error response means that the server, while working as a gateway to get                                     1000346
000347+// a response needed to handle the request, got an invalid response.                                                1000347
000348+///                                                                                                                 1000348
000349+dcl-c IV_HTTP_BAD_GATEWAY 502;                                                                                      1000349
000350+///                                                                                                                 1000350
000351+// The server is not ready to handle the request. Common causes are a server                                        1000351
000352+// that is down for maintenance or that is overloaded. Note that together with                                      1000352
000353+// this response, a user-friendly page explaining the problem should be sent.                                       1000353
000354+// This responses should be used for temporary conditions and the Retry-After:                                      1000354
000355+// HTTP header should, if possible, contain the estimated time before the                                           1000355
000356+// recovery of the service. The webmaster must also take care about the                                             1000356
000357+// caching-related headers that are sent along with this response, as these                                         1000357
000358+// temporary condition responses should usually not be cached.                                                      1000358
000359+///                                                                                                                 1000359
000360+dcl-c IV_HTTP_SERVICE_UNAVAILABLE 503;                                                                              1000360
000361+///                                                                                                                 1000361
000362+// This error response is given when the server is acting as a gateway and                                          1000362
000363+// cannot get a response in time.                                                                                   1000363
000364+///                                                                                                                 1000364
000365+dcl-c IV_HTTP_GATEWAY_TIMEOUT 504;                                                                                  1000365
000366+///                                                                                                                 1000366
000367+// The HTTP version used in the request is not supported by the server.                                             1000367
000368+///                                                                                                                 1000368
000369+dcl-c IV_HTTP_VERSION_NOT_SUPPORTED 505;                                                                            1000369
000370+///                                                                                                                 1000370
000371+// The server has an internal configuration error: the chosen variant resource                                      1000371
000372+// is configured to engage in transparent content negotiation itself, and is                                        1000372
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     11
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000373+// therefore not a proper end point in the negotiation process.                                                     1000373
000374+///                                                                                                                 1000374
000375+dcl-c IV_HTTP_VARIANT_ALSO_NEGOTIATES 506;                                                                          1000375
000376+///                                                                                                                 1000376
000377+// The method could not be performed on the resource because the server is                                          1000377
000378+// unable to store the representation needed to successfully complete the request.                                  1000378
000379+///                                                                                                                 1000379
000380+dcl-c IV_HTTP_INSUFFICIENT_STORAGE 507;                                                                             1000380
000381+///                                                                                                                 1000381
000382+// The server detected an infinite loop while processing the request.                                               1000382
000383+///                                                                                                                 1000383
000384+dcl-c IV_HTTP_LOOP_DETECTED 508;                                                                                    1000384
000385+///                                                                                                                 1000385
000386+// Further extensions to the request are required for the server to fulfil it.                                      1000386
000387+///                                                                                                                 1000387
000388+dcl-c IV_HTTP_NOT_EXTENDED 510;                                                                                     1000388
000389+///                                                                                                                 1000389
000390+// The 511 status code indicates that the client needs to authenticate to gain                                      1000390
000391+// network access.                                                                                                  1000391
000392+///                                                                                                                 1000392
000393+dcl-c IV_HTTP_NETWORK_AUTH_REQUIRED 511;                                                                            1000393
000394+                                                                                                                    1000394
000395+                                                                                                                    1000395
000396+///                                                                                                                 1000396
000397+// Any media type.                                                                                                  1000397
000398+///                                                                                                                 1000398
000399+dcl-c IV_MEDIA_TYPE_ALL '*/*';                                                                                      1000399
000400+///                                                                                                                 1000400
000401+// Default format for JSON data.                                                                                    1000401
000402+///                                                                                                                 1000402
000403+dcl-c IV_MEDIA_TYPE_JSON 'application/json';                                                                        1000403
000404+///                                                                                                                 1000404
000405+// Default format for XML data.                                                                                     1000405
000406+///                                                                                                                 1000406
000407+dcl-c IV_MEDIA_TYPE_XML 'application/xml';                                                                          1000407
000408+                                                                                                                    1000408
000409+                                                                                                                    1000409
000410+///                                                                                                                 1000410
000411+// Create a new HTTP client                                                                                         1000411
000412+//                                                                                                                  1000412
000413+// Returns a pointer to the new HTTP client instance.                                                               1000413
000414+//                                                                                                                  1000414
000415+// @return Pointer to the HTTP client                                                                               1000415
000416+//                                                                                                                  1000416
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     12
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000417+// @info The memory allocated by this client instance must be freed by                                              1000417
000418+//       calling the procedure <code>iv_free</code>.                                                                1000418
000419+//                                                                                                                  1000419
000420+///                                                                                                                 1000420
000421+dcl-pr iv_newHttpClient pointer extproc(*dclcase) end-pr;                                                           1000421
000422+                                                                                                                    1000422
000423+///                                                                                                                 1000423
000424+// Free client memory                                                                                               1000424
000425+//                                                                                                                  1000425
000426+// Disconnect and cleanup memory of the passed client instance.                                                     1000426
000427+//                                                                                                                  1000427
000428+// @param Pointer to the HTTP client                                                                                1000428
000429+//                                                                                                                  1000429
000430+///                                                                                                                 1000430
000431+dcl-pr iv_free extproc(*dclcase);                                                                                   1000431
000432+    client pointer value;                                                                                           1000432
000433+end-pr;                                                                                                             1000433
000434+                                                                                                                    1000434
000435+///                                                                                                                 1000435
000436+// CCSID of the current job                                                                                         1000436
000437+///                                                                                                                 1000437
000438+dcl-c IV_CCSID_JOB 0;                                                                                               1000438
000439+///                                                                                                                 1000439
000440+// CCSID UTF-8                                                                                                      1000440
000441+///                                                                                                                 1000441
000442+dcl-c IV_CCSID_UTF8 1208;                                                                                           1000442
000443+///                                                                                                                 1000443
000444+// CCSID Windows-1252 (Latin 1)                                                                                     1000444
000445+///                                                                                                                 1000445
000446+dcl-c IV_CCSID_WIN1252 1252;                                                                                        1000446
000447+///                                                                                                                 1000447
000448+// CCSID special value indicating hex data and it will not be converted.                                            1000448
000449+///                                                                                                                 1000449
000450+dcl-c IV_CCSID_BINARY 65535;                                                                                        1000450
000451+                                                                                                                    1000451
000452+                                                                                                                    1000452
000453+///                                                                                                                 1000453
000454+// Set request buffer                                                                                               1000454
000455+//                                                                                                                  1000455
000456+// Sets the buffer of the data which will be sent as the message body of the                                        1000456
000457+// HTTP request.                                                                                                    1000457
000458+//                                                                                                                  1000458
000459+// @param Pointer to the HTTP client                                                                                1000459
000460+// @param Pointer to buffer                                                                                         1000460
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     13
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000461+// @param Size of buffer (bytes in total)                                                                           1000461
000462+// @param Buffer type (0=Byte buffer, 1=varchar2, 2=varchar4)                                                       1000462
000463+// @param CCSID (0=Current job, 65535=no xlate, 1208=UTF-8)                                                         1000463
000464+///                                                                                                                 1000464
000465+dcl-pr iv_setRequestDataBuffer extproc(*dclcase);                                                                   1000465
000466+    client        pointer value;                                                                                    1000466
000467+    buffer        pointer value;                                                                                    1000467
000468+    bufferSize    int(10) value;                                                                                    1000468
000469+    bufferType    int(5) value;                                                                                     1000469
000470+    bufferCcsid   int(10) value;                                                                                    1000470
000471+end-pr;                                                                                                             1000471
000472+                                                                                                                    1000472
000473+///                                                                                                                 1000473
000474+// Set response header buffer                                                                                       1000474
000475+//                                                                                                                  1000475
000476+// Sets the buffer where the response header is received.                                                           1000476
000477+//                                                                                                                  1000477
000478+// @param Pointer to the HTTP client                                                                                1000478
000479+// @param Pointer to buffer                                                                                         1000479
000480+// @param Size of buffer ( bytes in total)                                                                          1000480
000481+// @param Buffer type (0=Byte buffer, 1=varchar2, 2=varchar4)                                                       1000481
000482+// @param CCSID (0=Current job, 65535=no xlate, 1208=UTF-8)                                                         1000482
000483+///                                                                                                                 1000483
000484+dcl-pr iv_setResponseHeaderBuffer extproc(*dclcase);                                                                1000484
000485+    client        pointer value;                                                                                    1000485
000486+    buffer        pointer value;                                                                                    1000486
000487+    bufferSize    int(10) value;                                                                                    1000487
000488+    bufferType    int(5) value;                                                                                     1000488
000489+    bufferCcsid   int(10) value;                                                                                    1000489
000490+end-pr;                                                                                                             1000490
000491+                                                                                                                    1000491
000492+///                                                                                                                 1000492
000493+// Set response data buffer                                                                                         1000493
000494+//                                                                                                                  1000494
000495+// Sets the buffer where the response data (message body) is received.                                              1000495
000496+//                                                                                                                  1000496
000497+// @param Pointer to the HTTP client                                                                                1000497
000498+// @param Pointer to buffer                                                                                         1000498
000499+// @param Size of buffer ( bytes in total)                                                                          1000499
000500+// @param Buffer type (0=Byte buffer, 1=varchar2, 2=varchar4)                                                       1000500
000501+// @param CCSID (0=Current job, 65535=no xlate, 1208=UTF-8)                                                         1000501
000502+///                                                                                                                 1000502
000503+dcl-pr iv_setResponseDataBuffer extproc(*dclcase);                                                                  1000503
000504+    pClient       pointer value;                                                                                    1000504
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     14
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000505+    pBuffer       pointer value;                                                                                    1000505
000506+    bufferSize    int(10) value;                                                                                    1000506
000507+    bufferType    int(5) value;                                                                                     1000507
000508+    bufferCcsid   int(10) value;                                                                                    1000508
000509+end-pr;                                                                                                             1000509
000510+                                                                                                                    1000510
000511+///                                                                                                                 1000511
000512+// Set response output file                                                                                         1000512
000513+//                                                                                                                  1000513
000514+// Sets the output file for the response.                                                                           1000514
000515+//                                                                                                                  1000515
000516+// @param Pointer to the HTTP client                                                                                1000516
000517+// @param IFS file name                                                                                             1000517
000518+// @param CCSID of the file (default: 1252)                                                                         1000518
000519+///                                                                                                                 1000519
000520+dcl-pr iv_setResponseFile extproc(*dclcase);                                                                        1000520
000521+    client        pointer value;                                                                                    1000521
000522+    fileName      pointer options(*string) value;                                                                   1000522
000523+    fileCcsid     int(10)  options(*nopass) value;                                                                  1000523
000524+end-pr;                                                                                                             1000524
000525+                                                                                                                    1000525
000526+///                                                                                                                 1000526
000527+// Set the URL for a CONNECT tunnel proxy                                                                           1000527
000528+//                                                                                                                  1000528
000529+// @param Pointer to the HTTP client                                                                                1000529
000530+// @param URL of the CONNECT proxy                                                                                  1000530
000531+///                                                                                                                 1000531
000532+dcl-pr iv_setProxyTunnel extproc(*dclcase);                                                                         1000532
000533+    client        pointer value;                                                                                    1000533
000534+    url           pointer options(*string) value;                                                                   1000534
000535+end-pr;                                                                                                             1000535
000536+                                                                                                                    1000536
000537+///                                                                                                                 1000537
000538+// Execute HTTP request                                                                                             1000538
000539+//                                                                                                                  1000539
000540+// Executes the HTTP request with the passed client.                                                                1000540
000541+//                                                                                                                  1000541
000542+// @param Pointer to the HTTP client                                                                                1000542
000543+// @param HTTP method                                                                                               1000543
000544+// @param URL                                                                                                       1000544
000545+// @param Pointer to a simple list with additional HTTP headers                                                     1000545
000546+// @return <code>*ON</code> if ok                                                                                   1000546
000547+///                                                                                                                 1000547
000548+dcl-pr iv_execute ind extproc(*dclcase);                                                                            1000548
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     15
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000549+    client  pointer value;                                                                                          1000549
000550+    method  pointer options(*string) value;                                                                         1000550
000551+    url     pointer options(*string) value;                                                                         1000551
000552+    headers pointer options(*nopass) value;                                                                         1000552
000553+end-pr;                                                                                                             1000553
000554+                                                                                                                    1000554
000555+///                                                                                                                 1000555
000556+// Set SSL keystore                                                                                                 1000556
000557+//                                                                                                                  1000557
000558+// Sets the SSL keystore used when making HTTPS requests.                                                           1000558
000559+//                                                                                                                  1000559
000560+// @param Pointer to the HTTP client                                                                                1000560
000561+// @param IFS path to the keystore file                                                                             1000561
000562+// @param Keystore password (default: empty password)                                                               1000562
000563+// @return <code>*ON</code> if ok                                                                                   1000563
000564+///                                                                                                                 1000564
000565+dcl-pr iv_setCertificate ind extproc(*dclcase);                                                                     1000565
000566+    client              pointer value;                                                                              1000566
000567+    certificateFile     pointer options(*string) value;                                                             1000567
000568+    certificatePassword pointer options(*string:*nopass) value;                                                     1000568
000569+end-pr;                                                                                                             1000569
000570+                                                                                                                    1000570
000571+///                                                                                                                 1000571
000572+// Get HTTP status                                                                                                  1000572
000573+//                                                                                                                  1000573
000574+// Returns the HTTP status code of the last request done with this HTTP client                                      1000574
000575+// instance.                                                                                                        1000575
000576+//                                                                                                                  1000576
000577+// @param Pointer to the HTTP client                                                                                1000577
000578+// @return HTTP status code                                                                                         1000578
000579+///                                                                                                                 1000579
000580+dcl-pr iv_getStatus int(5) extproc(*dclcase);                                                                       1000580
000581+    client pointer value;                                                                                           1000581
000582+end-pr;                                                                                                             1000582
000583+                                                                                                                    1000583
000584+///                                                                                                                 1000584
000585+// Get error message                                                                                                1000585
000586+//                                                                                                                  1000586
000587+// Returns the error message from the last HTTP request.                                                            1000587
000588+//                                                                                                                  1000588
000589+// @param  Pointer to the HTTP client                                                                               1000589
000590+// @return Error message from the HTTP request                                                                      1000590
000591+///                                                                                                                 1000591
000592+dcl-pr iv_getErrorMessage varchar(256) extproc(*dclcase);                                                           1000592
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     16
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000593+    client pointer value;                                                                                           1000593
000594+end-pr;                                                                                                             1000594
000595+                                                                                                                    1000595
000596+///                                                                                                                 1000596
000597+// Set authentication provider                                                                                      1000597
000598+//                                                                                                                  1000598
000599+// Sets the passed authentication provider on the HTTP client.                                                      1000599
000600+//                                                                                                                  1000600
000601+// @param Pointer to the HTTP Client                                                                                1000601
000602+// @param Authentication provider                                                                                   1000602
000603+///                                                                                                                 1000603
000604+dcl-pr iv_setAuthProvider extproc(*dclcase);                                                                        1000604
000605+  client pointer value;                                                                                             1000605
000606+  authProvider pointer value;                                                                                       1000606
000607+end-pr;                                                                                                             1000607
000608+                                                                                                                    1000608
000609+///                                                                                                                 1000609
000610+// Base64 decode value                                                                                              1000610
000611+//                                                                                                                  1000611
000612+// Decodes a base64 encoded string.                                                                                 1000612
000613+//                                                                                                                  1000613
000614+// @param Encoded string                                                                                            1000614
000615+// @return Decoded string                                                                                           1000615
000616+//                                                                                                                  1000616
000617+// @info The character encoding for the original value is expected to be UTF-8.                                     1000617
000618+///                                                                                                                 1000618
000619+dcl-pr iv_decodeBase64 varchar(2097152:4) ccsid(*utf8) extproc(*CWIDEN : 'iv_decodeBase64') rtnparm;                1000619
000620+  string varchar(2097152:4) ccsid(*utf8) options(*varsize) const;                                                   1000620
000621+end-pr;                                                                                                             1000621
000622+                                                                                                                    1000622
000623+///                                                                                                                 1000623
000624+// Base64 encoding value                                                                                            1000624
000625+//                                                                                                                  1000625
000626+// Encodes a string into base64 .                                                                                   1000626
000627+//                                                                                                                  1000627
000628+// @param string to encode                                                                                          1000628
000629+// @return Encoded string                                                                                           1000629
000630+//                                                                                                                  1000630
000631+// @info The character encoding for the original value is expected to be UTF-8.                                     1000631
000632+///                                                                                                                 1000632
000633+dcl-pr iv_encodeBase64 varchar(2097152:4) ccsid(*utf8) extproc(*CWIDEN : 'iv_encodeBase64') rtnparm;                1000633
000634+  string varchar(2097152:4) ccsid(*utf8) options(*varsize) const;                                                   1000634
000635+end-pr;                                                                                                             1000635
000636+                                                                                                                    1000636
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     17
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000637+///                                                                                                                 1000637
000638+// Add message to job log                                                                                           1000638
000639+//                                                                                                                  1000639
000640+// Convenience function: put message in joblog.                                                                     1000640
000641+// Works like printf but with strings only like                                                                     1000641
000642+// <br/><br/>                                                                                                       1000642
000643+// <code>iv_joblog('This is %s a test' : 'super');</code>                                                           1000643
000644+//                                                                                                                  1000644
000645+// @param message string                                                                                            1000645
000646+///                                                                                                                 1000646
000647+dcl-pr iv_joblog extproc(*CWIDEN : 'iv_joblog') ;                                                                   1000647
000648+  message varchar(512) options(*varsize)  const ;                                                                   1000648
000649+end-pr;                                                                                                             1000649
000650+                                                                                                                    1000650
000651+///                                                                                                                 1000651
000652+// Set Comm Trace                                                                                                   1000652
000653+//                                                                                                                  1000653
000654+// Enables the communication trace. The trace data will be written to the passed                                    1000654
000655+// file.                                                                                                            1000655
000656+//                                                                                                                  1000656
000657+// @param Pointer to the HTTP client                                                                                1000657
000658+// @param IFS path to the trace file                                                                                1000658
000659+///                                                                                                                 1000659
000660+dcl-pr iv_setCommTrace extproc(*dclcase) ;                                                                          1000660
000661+    client    pointer value;                                                                                        1000661
000662+    traceFile pointer options(*string) value;                                                                       1000662
000663+end-pr;                                                                                                             1000663
000664+                                                                                                                    1000664
000665+///                                                                                                                 1000665
000666+// Convert varchar value                                                                                            1000666
000667+//                                                                                                                  1000667
000668+// Converts the value of a (small) varchar variable to another CCSID.                                               1000668
000669+//                                                                                                                  1000669
000670+// @param Input and output string                                                                                   1000670
000671+// @param From CCSID                                                                                                1000671
000672+// @param To CCSID                                                                                                  1000672
000673+// @return Converted value                                                                                          1000673
000674+///                                                                                                                 1000674
000675+dcl-pr iv_xlateVc varchar(32768:2) ccsid(65535) extproc(*CWIDEN : 'iv_xlateVc') rtnparm;                            1000675
000676+  inoutString varchar(32768:2) ccsid(65535) options(*varsize) const;                                                1000676
000677+  fromCCSID int(10) value;                                                                                          1000677
000678+  toCCSID   int(10) value;                                                                                          1000678
000679+end-pr;                                                                                                             1000679
000680+                                                                                                                    1000680
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     18
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000681+///                                                                                                                 1000681
000682+// Convert long varchar value                                                                                       1000682
000683+//                                                                                                                  1000683
000684+// Converts the value of a (long) varchar variable to another CCSID.                                                1000684
000685+//                                                                                                                  1000685
000686+// @param Input and output string                                                                                   1000686
000687+// @param From CCSID                                                                                                1000687
000688+// @param To CCSID                                                                                                  1000688
000689+// @return Converted value                                                                                          1000689
000690+///                                                                                                                 1000690
000691+dcl-pr iv_xlateLvc varchar(2097152:4) ccsid(65535) extproc(*CWIDEN : 'iv_xlateLvc') rtnparm;                        1000691
000692+    inoutString varchar(2097152:4) ccsid(65535) options(*varsize) const;                                            1000692
000693+    fromCCSID int(10) value;                                                                                        1000693
000694+    toCCSID   int(10) value;                                                                                        1000694
000695+end-pr;                                                                                                             1000695
000696+                                                                                                                    1000696
000697+///                                                                                                                 1000697
000698+// Execute GET HTTP request                                                                                         1000698
000699+//                                                                                                                  1000699
000700+// Executes a GET HTTP request to the passed URL.                                                                   1000700
000701+//                                                                                                                  1000701
000702+// @param URL                                                                                                       1000702
000703+// @param MIME type for the <code>Accept</code> HTTP header                                                         1000703
000704+// @param Pointer to a simple list with additional HTTP headers                                                     1000704
000705+// @return Response message body                                                                                    1000705
000706+//                                                                                                                  1000706
000707+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000707
000708+//         like ILV0404 for a 404 HTTP status.                                                                      1000708
000709+///                                                                                                                 1000709
000710+dcl-pr iv_get varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                      1000710
000711+    url varchar(IV_URL_SIZE:2) value;                                                                               1000711
000712+    acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              1000712
000713+    headers pointer value options(*nopass);                                                                         1000713
000714+end-pr;                                                                                                             1000714
000715+                                                                                                                    1000715
000716+///                                                                                                                 1000716
000717+// Execute DELETE HTTP request                                                                                      1000717
000718+//                                                                                                                  1000718
000719+// Executes a DELETE HTTP request to the passed URL.                                                                1000719
000720+//                                                                                                                  1000720
000721+// @param URL                                                                                                       1000721
000722+// @param Pointer to a simple list with additional HTTP headers                                                     1000722
000723+// @return Response message body                                                                                    1000723
000724+//                                                                                                                  1000724
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     19
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000725+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000725
000726+//         like ILV0404 for a 404 HTTP status.                                                                      1000726
000727+///                                                                                                                 1000727
000728+dcl-pr iv_delete varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                   1000728
000729+    url varchar(IV_URL_SIZE:2) value;                                                                               1000729
000730+    headers pointer value options(*nopass);                                                                         1000730
000731+end-pr;                                                                                                             1000731
000732+                                                                                                                    1000732
000733+///                                                                                                                 1000733
000734+// Execute HEAD HTTP request                                                                                        1000734
000735+//                                                                                                                  1000735
000736+// Executes a HEAD HTTP request to the passed URL.                                                                  1000736
000737+//                                                                                                                  1000737
000738+// @param URL                                                                                                       1000738
000739+// @param Pointer to a simple list with additional HTTP headers                                                     1000739
000740+// @return <code>*on</code> if the request was successful (HTTP status 2xx)                                         1000740
000741+//                                                                                                                  1000741
000742+// @throws Info message on an unsuccessful request with the HTTP status encoded                                     1000742
000743+//         like ILV0404 for a 404 HTTP status.                                                                      1000743
000744+///                                                                                                                 1000744
000745+dcl-pr iv_head ind extproc(*dclcase);                                                                               1000745
000746+    url varchar(IV_URL_SIZE:2) value;                                                                               1000746
000747+    headers pointer value options(*nopass);                                                                         1000747
000748+end-pr;                                                                                                             1000748
000749+                                                                                                                    1000749
000750+///                                                                                                                 1000750
000751+// Execute OPTIONS HTTP request                                                                                     1000751
000752+//                                                                                                                  1000752
000753+// Executes a OPTIONS HTTP request to the passed URL.                                                               1000753
000754+//                                                                                                                  1000754
000755+// @param URL                                                                                                       1000755
000756+// @param MIME type for the <code>Accept</code> HTTP header                                                         1000756
000757+// @param Pointer to a simple list with additional HTTP headers                                                     1000757
000758+// @return Response message body                                                                                    1000758
000759+//                                                                                                                  1000759
000760+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000760
000761+//         like ILV0404 for a 404 HTTP status.                                                                      1000761
000762+///                                                                                                                 1000762
000763+dcl-pr iv_options varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                  1000763
000764+    url varchar(IV_URL_SIZE:2) value;                                                                               1000764
000765+    acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              1000765
000766+    headers pointer value options(*nopass);                                                                         1000766
000767+end-pr;                                                                                                             1000767
000768+                                                                                                                    1000768
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     20
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000769+///                                                                                                                 1000769
000770+// Execute PATCH HTTP request                                                                                       1000770
000771+//                                                                                                                  1000771
000772+// Executes a PATCH HTTP request to the passed URL.                                                                 1000772
000773+//                                                                                                                  1000773
000774+// @param URL                                                                                                       1000774
000775+// @param Request message body                                                                                      1000775
000776+// @param MIME type for the <code>Content-Type</code> HTTP header                                                   1000776
000777+// @param Pointer to a simple list with additional HTTP headers                                                     1000777
000778+// @return Response message body                                                                                    1000778
000779+//                                                                                                                  1000779
000780+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000780
000781+//         like ILV0404 for a 404 HTTP status.                                                                      1000781
000782+///                                                                                                                 1000782
000783+dcl-pr iv_patch varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                    1000783
000784+    url varchar(IV_URL_SIZE:2) value;                                                                               1000784
000785+    messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                        1000785
000786+    contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                                 1000786
000787+    headers pointer value options(*nopass);                                                                         1000787
000788+end-pr;                                                                                                             1000788
000789+                                                                                                                    1000789
000790+///                                                                                                                 1000790
000791+// Execute POST HTTP request                                                                                        1000791
000792+//                                                                                                                  1000792
000793+// Executes a POST HTTP request to the passed URL.                                                                  1000793
000794+//                                                                                                                  1000794
000795+// @param URL                                                                                                       1000795
000796+// @param Request message body                                                                                      1000796
000797+// @param MIME type for the <code>Content-Type</code> HTTP header                                                   1000797
000798+// @param Pointer to a simple list with additional HTTP headers                                                     1000798
000799+// @return Response message body                                                                                    1000799
000800+//                                                                                                                  1000800
000801+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000801
000802+//         like ILV0404 for a 404 HTTP status.                                                                      1000802
000803+///                                                                                                                 1000803
000804+dcl-pr iv_post varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                     1000804
000805+    url varchar(IV_URL_SIZE:2) value;                                                                               1000805
000806+    messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                        1000806
000807+    contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                                 1000807
000808+    headers pointer value options(*nopass);                                                                         1000808
000809+end-pr;                                                                                                             1000809
000810+                                                                                                                    1000810
000811+///                                                                                                                 1000811
000812+// Execute POST HTTP request with form data                                                                         1000812
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     21
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000813+//                                                                                                                  1000813
000814+// Executes a POST HTTP request to the passed URL. The message body is the passed                                   1000814
000815+// form data. The data will not be further encoded but passed to the server as is.                                  1000815
000816+// The content-type will be application/x-www-form-urlencoded. This can be                                          1000816
000817+// overridden by passing the content-type as an additional header to the procedure.                                 1000817
000818+// The form data can be created with the procedure iv_form_of.                                                      1000818
000819+//                                                                                                                  1000819
000820+// @param URL                                                                                                       1000820
000821+// @param Request message body (form data)                                                                          1000821
000822+// @param Pointer to a simple list with additional HTTP headers                                                     1000822
000823+// @return Response message body                                                                                    1000823
000824+//                                                                                                                  1000824
000825+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000825
000826+//         like ILV0404 for a 404 HTTP status.                                                                      1000826
000827+///                                                                                                                 1000827
000828+dcl-pr iv_postForm varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                 1000828
000829+    url varchar(IV_URL_SIZE:2) value;                                                                               1000829
000830+    formData likeds(iv_lvarpuchar_t);                                                                               1000830
000831+    headers pointer value options(*nopass);                                                                         1000831
000832+end-pr;                                                                                                             1000832
000833+                                                                                                                    1000833
000834+///                                                                                                                 1000834
000835+// Execute PUT HTTP request                                                                                         1000835
000836+//                                                                                                                  1000836
000837+// Executes a PUT HTTP request to the passed URL.                                                                   1000837
000838+//                                                                                                                  1000838
000839+// @param URL                                                                                                       1000839
000840+// @param Request message body                                                                                      1000840
000841+// @param MIME type for the <code>Content-Type</code> HTTP header                                                   1000841
000842+// @param Pointer to a simple list with additional HTTP headers                                                     1000842
000843+// @return Response message body                                                                                    1000843
000844+//                                                                                                                  1000844
000845+// @throws Escape message on an unsuccessful request with the HTTP status encoded                                   1000845
000846+//         like ILV0404 for a 404 HTTP status.                                                                      1000846
000847+///                                                                                                                 1000847
000848+dcl-pr iv_put varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                      1000848
000849+    url varchar(IV_URL_SIZE:2) value;                                                                               1000849
000850+    messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                        1000850
000851+    contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                                 1000851
000852+    headers pointer value options(*nopass);                                                                         1000852
000853+end-pr;                                                                                                             1000853
000854+                                                                                                                    1000854
000855+///                                                                                                                 1000855
000856+// Added HTTP header                                                                                                1000856
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     22
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000857+//                                                                                                                  1000857
000858+// Adds the passed HTTP header (key/value) to the HTTP client instance. This                                        1000858
000859+// HTTP header will be added to each request done with this client instance.                                        1000859
000860+// <p>                                                                                                              1000860
000861+// Duplicate HTTP header keys are allowed in an HTTP message. Generally the last                                    1000861
000862+// one "wins".                                                                                                      1000862
000863+//                                                                                                                  1000863
000864+// @param Pointer to the HTTP client                                                                                1000864
000865+// @param HTTP header name (key)                                                                                    1000865
000866+// @param HTTP header value                                                                                         1000866
000867+///                                                                                                                 1000867
000868+dcl-pr iv_addHeader extproc(*dclcase);                                                                              1000868
000869+    client pointer value;                                                                                           1000869
000870+    headerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8) value;                                                   1000870
000871+    headerValue varchar(IV_HEADER_VALUE_SIZE:2) ccsid(*utf8) value;                                                 1000871
000872+end-pr;                                                                                                             1000872
000873+                                                                                                                    1000873
000874+///                                                                                                                 1000874
000875+// Add list of HTTP headers                                                                                         1000875
000876+//                                                                                                                  1000876
000877+// Adds a list of HTTP headers (key/value pairs) to the HTTP client instance.                                       1000877
000878+// These HTTP headers will be added to each request done with this client instance.                                 1000878
000879+// <p>                                                                                                              1000879
000880+// Duplicate HTTP header keys are allowed in an HTTP message. Generally the last                                    1000880
000881+// one "wins".                                                                                                      1000881
000882+//                                                                                                                  1000882
000883+// @param Pointer to the HTTP client                                                                                1000883
000884+// @param Simple list of HTTP headers                                                                               1000884
000885+///                                                                                                                 1000885
000886+dcl-pr iv_addHeaders extproc(*dclcase);                                                                             1000886
000887+    client pointer value;                                                                                           1000887
000888+    headers pointer value;                                                                                          1000888
000889+end-pr;                                                                                                             1000889
000890+                                                                                                                    1000890
000891+///                                                                                                                 1000891
000892+// Set timeout                                                                                                      1000892
000893+//                                                                                                                  1000893
000894+// Sets the timeout for the client instance.                                                                        1000894
000895+//                                                                                                                  1000895
000896+// @param Pointer to the HTTP client                                                                                1000896
000897+// @param Timeout in seconds                                                                                        1000897
000898+///                                                                                                                 1000898
000899+dcl-pr iv_setTimeout extproc(*dclcase);                                                                             1000899
000900+    client pointer value;                                                                                           1000900
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     23
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000901+    timeout packed(9:3) value;                                                                                      1000901
000902+end-pr;                                                                                                             1000902
000903+                                                                                                                    1000903
000904+///                                                                                                                 1000904
000905+// Set Retries                                                                                                      1000905
000906+//                                                                                                                  1000906
000907+// Sets the number of retries the client does on an unsuccessful request.                                           1000907
000908+//                                                                                                                  1000908
000909+// @param Pointer to the HTTP client                                                                                1000909
000910+// @param Number of retries                                                                                         1000910
000911+///                                                                                                                 1000911
000912+dcl-pr iv_setRetries extproc(*dclcase);                                                                             1000912
000913+    client pointer value;                                                                                           1000913
000914+    retries int(5) value;                                                                                           1000914
000915+end-pr;                                                                                                             1000915
000916+                                                                                                                    1000916
000917+///                                                                                                                 1000917
000918+// Build HTTP header list                                                                                           1000918
000919+//                                                                                                                  1000919
000920+// Builds a list of HTTP headers which can be used on the convenience HTTP                                          1000920
000921+// procedures like <code>iv_get</code> to add custom HTTP headers to the                                            1000921
000922+// HTTP request.                                                                                                    1000922
000923+//                                                                                                                  1000923
000924+// @param Key 1                                                                                                     1000924
000925+// @param Value 1                                                                                                   1000925
000926+// @param Key 2                                                                                                     1000926
000927+// @param Value 2                                                                                                   1000927
000928+// @param Key 3                                                                                                     1000928
000929+// @param Value 3                                                                                                   1000929
000930+// @param Key 4                                                                                                     1000930
000931+// @param Value 4                                                                                                   1000931
000932+// @param Key 5                                                                                                     1000932
000933+// @param Value 5                                                                                                   1000933
000934+// @return Simple list instance with the passed entries                                                             1000934
000935+//                                                                                                                  1000935
000936+// @info The procedure <code>iv_addHeaderToList</code> can be used to add more                                      1000936
000937+//       entries to the list.                                                                                       1000937
000938+///                                                                                                                 1000938
000939+dcl-pr iv_buildList pointer extproc(*dclcase);                                                                      1000939
000940+    key1 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                          1000940
000941+    value1 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                       1000941
000942+    key2 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                          1000942
000943+    value2 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                       1000943
000944+    key3 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                          1000944
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     24
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000945+    value3 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                       1000945
000946+    key4 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                          1000946
000947+    value4 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                       1000947
000948+    key5 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                          1000948
000949+    value5 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                       1000949
000950+end-pr;                                                                                                             1000950
000951+                                                                                                                    1000951
000952+///                                                                                                                 1000952
000953+// Free list                                                                                                        1000953
000954+//                                                                                                                  1000954
000955+// Cleanup memory of the passed simple list instance.                                                               1000955
000956+//                                                                                                                  1000956
000957+// @param Pointer to the list                                                                                       1000957
000958+//                                                                                                                  1000958
000959+///                                                                                                                 1000959
000960+dcl-pr iv_freeList extproc(*dclcase);                                                                               1000960
000961+    list pointer;                                                                                                   1000961
000962+end-pr;                                                                                                             1000962
000963+                                                                                                                    1000963
000964+///                                                                                                                 1000964
000965+// Add HTTP header to list                                                                                          1000965
000966+//                                                                                                                  1000966
000967+// Adds the passed HTTP header (key/value) to the passed list of headers.                                           1000967
000968+// <p>                                                                                                              1000968
000969+// Duplicate HTTP header keys are allowed in an HTTP message. Generally the last                                    1000969
000970+// one "wins".                                                                                                      1000970
000971+//                                                                                                                  1000971
000972+// @param Pointer to the list (simple list)                                                                         1000972
000973+// @param HTTP header name (key)                                                                                    1000973
000974+// @param HTTP header value                                                                                         1000974
000975+///                                                                                                                 1000975
000976+dcl-pr iv_addHeaderToList extproc(*dclcase);                                                                        1000976
000977+    list pointer value;                                                                                             1000977
000978+    headerKey varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const;                                                      1000978
000979+    headerValue varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const;                                                   1000979
000980+end-pr;                                                                                                             1000980
000981+                                                                                                                    1000981
000982+///                                                                                                                 1000982
000983+// Add entry to list                                                                                                1000983
000984+//                                                                                                                  1000984
000985+// Adds the passed entry (key/value) to the passed list. The key and value will be added                            1000985
000986+// as is. Duplicate keys in the list are allowed.                                                                   1000986
000987+//                                                                                                                  1000987
000988+// @param Pointer to the list (simple list)                                                                         1000988
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     25
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000989+// @param Key                                                                                                       1000989
000990+// @param Value                                                                                                     1000990
000991+///                                                                                                                 1000991
000992+dcl-pr iv_addEntryToList extproc(*dclcase);                                                                         1000992
000993+    list pointer value;                                                                                             1000993
000994+    key pointer value options(*string);                                                                             1000994
000995+    value pointer value options(*string);                                                                           1000995
000996+end-pr;                                                                                                             1000996
000997+                                                                                                                    1000997
000998+///                                                                                                                 1000998
000999+// Set request handler                                                                                              1000999
001000+//                                                                                                                  1001000
001001+// Sets the request handler which will be called on every HTTP request.                                             1001001
001002+//                                                                                                                  1001002
001003+// @param Pointer to the HTTP client                                                                                1001003
001004+// @param Pointer to the request handler                                                                            1001004
001005+///                                                                                                                 1001005
001006+dcl-pr iv_setRequestHandler extproc(*dclcase);                                                                      1001006
001007+    client pointer value;                                                                                           1001007
001008+    handler pointer value;                                                                                          1001008
001009+end-pr;                                                                                                             1001009
000006 /include 'anychar.rpginc'                                                                                            000006
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  anychar.r+                                                   *                     2
        * External name  . . . . . . :  headers/anychar.rpginc                                       *                     2
        * Last change  . . . . . . . :  23-05-23  11:26:42                                           *                     2
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              2000001
000002+                                                                                                                    2000002
000003+/if not defined (ILEVATOR_ANYCHAR_H)                                                                                2000003
000004+/define ILEVATOR_ANYCHAR_H                                                                                          2000004
000005+                                                                                                                    2000005
000006+                                                                                                                    2000006
000007+dcl-ds anychar_t qualified template;                                                                                2000007
000008+    data pointer;                                                                                                   2000008
000009+    size uns(10);                                                                                                   2000009
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     26
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000010+    length uns(10);                                                                                                 2000010
000011+    type int(10);                                                                                                   2000011
000012+    ccsid int(10);                                                                                                  2000012
000013+end-ds;                                                                                                             2000013
000014+                                                                                                                    2000014
000015+                                                                                                                    2000015
000016+dcl-pr iv_anychar_set extproc(*CWIDEN : 'iv_anychar_set');                                                          2000016
000017+    anychar pointer value;                                                                                          2000017
000018+    buffer pointer value;                                                                                           2000018
000019+    bufferSize int(10) value;                                                                                       2000019
000020+    bufferType int(5) value;                                                                                        2000020
000021+    bufferXlate int(5) value;                                                                                       2000021
000022+end-pr;                                                                                                             2000022
000023+                                                                                                                    2000023
000024+dcl-pr iv_anychar_append extproc(*CWIDEN : 'iv_anychar_append');                                                    2000024
000025+    anychar pointer value;                                                                                          2000025
000026+    string pointer value;                                                                                           2000026
000027+    length int(10) value;                                                                                           2000027
000028+end-pr;                                                                                                             2000028
000029+                                                                                                                    2000029
000030+dcl-pr iv_anychar_finalize extproc(*CWIDEN : 'iv_anychar_finalize');                                                2000030
000031+  anychar pointer value;                                                                                            2000031
000032+end-pr;                                                                                                             2000032
000033+                                                                                                                    2000033
000034+/endif                                                                                                              2000034
000007 /include 'chunked.rpginc'                                                                                            000007
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  chunked.r+                                                   *                     3
        * External name  . . . . . . :  headers/chunked.rpginc                                       *                     3
        * Last change  . . . . . . . :  23-05-23  11:26:42                                           *                     3
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              3000001
000002+                                                                                                                    3000002
000003+/if defined (ILEVATOR_CHUNKED_H)                                                                                    3000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              3000005
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     27
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000006+                                                                                                                    3000006
000007+/define ILEVATOR_CHUNKED_H                                                                                          3000007
000008+                                                                                                                    3000008
000009+dcl-pr iv_chunked_receive int(10) extproc(*dclcase);                                                                3000009
000010+    client pointer value;                                                                                           3000010
000011+end-pr;                                                                                                             3000011
000008 /include 'debug.rpginc'                                                                                              000008
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  debug.rpg+                                                   *                     4
        * External name  . . . . . . :  headers/debug.rpginc                                         *                     4
        * Last change  . . . . . . . :  23-05-23  11:26:42                                           *                     4
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              4000001
000002+                                                                                                                    4000002
000003+/if defined (ILEVATOR_DEBUG)                                                                                        4000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              4000005
000006+                                                                                                                    4000006
000007+/define ILEVATOR_DEBUG                                                                                              4000007
000008+                                                                                                                    4000008
000009+                                                                                                                    4000009
000010+dcl-pr iv_debug_init int(10) extproc(*dclcase) end-pr;                                                              4000010
000011+                                                                                                                    4000011
000012+dcl-pr iv_debug extproc(*dclcase) opdesc;                                                                           4000012
000013+    message pointer value options(*string);                                                                         4000013
000014+    replaceValue1 pointer value options(*string : *nopass);                                                         4000014
000015+    replaceValue2 pointer value options(*string : *nopass);                                                         4000015
000016+    replaceValue3 pointer value options(*string : *nopass);                                                         4000016
000017+    replaceValue4 pointer value options(*string : *nopass);                                                         4000017
000018+    replaceValue5 pointer value options(*string : *nopass);                                                         4000018
000019+    replaceValue6 pointer value options(*string : *nopass);                                                         4000019
000020+    replaceValue7 pointer value options(*string : *nopass);                                                         4000020
000021+end-pr;                                                                                                             4000021
000009 /include 'httpclient.rpginc'                                                                                         000009
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     28
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  httpclien+                                                   *                     5
        * External name  . . . . . . :  headers/httpclient.rpginc                                    *                     5
        * Last change  . . . . . . . :  23-05-23  11:26:43                                           *                     5
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              5000001
000002+                                                                                                                    5000002
000003+/if defined (ILEVATOR_HTTPCLIENT_H)                                                                                 5000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              5000005
000006+                                                                                                                    5000006
000007+/define ILEVATOR_HTTPCLIENT_H                                                                                       5000007
000008+                                                                                                                    5000008
000009+                                                                                                                    5000009
000010+dcl-pr parseUrl extproc(*dclcase);                                                                                  5000010
000011+    client pointer value;                                                                                           5000011
000012+    url pointer value options(*string);                                                                             5000012
000013+end-pr;                                                                                                             5000013
000014+                                                                                                                    5000014
000015+dcl-pr sendRequest int(10) extproc(*dclcase);                                                                       5000015
000016+    client pointer value;                                                                                           5000016
000017+end-pr;                                                                                                             5000017
000018+                                                                                                                    5000018
000019+dcl-pr receiveHeader int(10) extproc(*dclcase);                                                                     5000019
000020+    client pointer value;                                                                                           5000020
000021+end-pr;                                                                                                             5000021
000022+                                                                                                                    5000022
000023+dcl-pr receiveData int(10) extproc(*dclcase);                                                                       5000023
000024+    client pointer value;                                                                                           5000024
000025+end-pr;                                                                                                             5000025
000010 /include 'libc.rpginc'                                                                                               000010
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  libc.rpgi+                                                   *                     6
        * External name  . . . . . . :  ext/headers/libc.rpginc                                      *                     6
        * Last change  . . . . . . . :  23-05-23  11:26:39                                           *                     6
        *--------------------------------------------------------------------------------------------*
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     29
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000001+ /if not defined(QUSEC)                                                                                             6000001
000002+ /define QUSEC                                                                                                      6000002
000003+ /copy QSYSINC/QRPGLESRC,QUSEC                                                                                      6000003
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  QUSEC                                                        *                     7
        * External name  . . . . . . :  QSYSINC/QRPGLESRC(QUSEC)                                     *                     7
        * Last change  . . . . . . . :  17-02-19  10:02:41                                           *                     7
        * Text 'description' . . . . :  COMMON STRUCTURE FOR ERROR CODE PARAMETER                    *                     7
        *--------------------------------------------------------------------------------------------*
000001+D*** START HEADER FILE SPECIFICATIONS ****************************                                        000000    7000001
000002+D*                                                                                                        000000    7000002
000003+D*Header File Name: H/QUSEC                                                                               000000    7000003
000004+D*                                                                                                        000000    7000004
000005+D*Descriptive Name: Error Code Parameter.                                                                 000000    7000005
000006+D*                                                                                                        000000    7000006
000007+D*5763-SS1, 5722-SS1 (C) Copyright IBM Corp. 1994, 2001.                                                  000000    7000007
000008+D*All rights reserved.                                                                                    000000    7000008
000009+D*US Government Users Restricted Rights -                                                                 000000    7000009
000010+D*Use, duplication or disclosure restricted                                                               000000    7000010
000011+D*by GSA ADP Schedule Contract with IBM Corp.                                                             000000    7000011
000012+D*                                                                                                        000000    7000012
000013+D*Licensed Materials-Property of IBM                                                                      000000    7000013
000014+D*                                                                                                        000000    7000014
000015+D*                                                                                                        000000    7000015
000016+D*Description: Include header file for the error code parameter.                                          000000    7000016
000017+D*                                                                                                        000000    7000017
000018+D*Header Files Included: None.                                                                            000000    7000018
000019+D*                                                                                                        000000    7000019
000020+D*Macros List: None.                                                                                      000000    7000020
000021+D*                                                                                                        000000    7000021
000022+D*Structure List: Qus_EC_t                                                                                000000    7000022
000023+D*             Qus_ERRC0200_t                                                                             000000    7000023
000024+D*                                                                                                        000000    7000024
000025+D*Function Prototype List: None.                                                                          000000    7000025
000026+D*                                                                                                        000000    7000026
000027+D*Change Activity:                                                                                        000000    7000027
000028+D*                                                                                                        000000    7000028
000029+D*CFD List:                                                                                               000000    7000029
000030+D*                                                                                                        000000    7000030
000031+D*FLAG REASON       LEVEL DATE   PGMR      CHANGE DESCRIPTION                                             000000    7000031
000032+D*---- ------------ ----- ------ --------- ----------------------                                         000000    7000032
000033+D*                                                                                                        000000    7000033
000034+D*End CFD List.                                                                                           000000    7000034
000035+D*                                                                                                        000000    7000035
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     30
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000036+D*Additional notes about the Change Activity                                                              000000    7000036
000037+D*End Change Activity.                                                                                    000000    7000037
000038+D*** END HEADER FILE SPECIFICATIONS ******************************                                        000000    7000038
000039+D*****************************************************************                                        000000    7000039
000040+D*Record structure for Error Code Parameter                                                               000000    7000040
000041+D****                                                          ***                                        000000    7000041
000042+D*NOTE: The following type definition only defines the fixed                                              000000    7000042
000043+D*   portion of the format.  Varying length field Exception                                               000000    7000043
000044+D*   Data will not be defined here.                                                                       000000    7000044
000045+D*****************************************************************                                        000000    7000045
000046+DQUSEC            DS                                                                                      000000    7000046
000047+D*                                             Qus EC                                                     000000    7000047
000048+D QUSBPRV                 1      4I 0                                                                     000000    7000048
000049+D*                                             Bytes Provided                                             000000    7000049
000050+D QUSBAVL                 5      8I 0                                                                     000000    7000050
000051+D*                                             Bytes Available                                            000000    7000051
000052+D QUSEI                   9     15                                                                        000000    7000052
000053+D*                                             Exception Id                                               000000    7000053
000054+D QUSERVED               16     16                                                                        000000    7000054
000055+D*                                             Reserved                                                   000000    7000055
000056+D*QUSED01                17     17                                                                        000000    7000056
000057+D*                                                                                                        000000    7000057
000058+D*                                      Varying length                                                    000000    7000058
000059+DQUSC0200         DS                                                                                      000000    7000059
000060+D*                                             Qus ERRC0200                                               000000    7000060
000061+D QUSK01                  1      4I 0                                                                     000000    7000061
000062+D*                                             Key                                                        000000    7000062
000063+D QUSBPRV00               5      8I 0                                                                     000000    7000063
000064+D*                                             Bytes Provided                                             000000    7000064
000065+D QUSBAVL14               9     12I 0                                                                     000000    7000065
000066+D*                                             Bytes Available                                            000000    7000066
000067+D QUSEI00                13     19                                                                        000000    7000067
000068+D*                                             Exception Id                                               000000    7000068
000069+D QUSERVED39             20     20                                                                        000000    7000069
000070+D*                                             Reserved                                                   000000    7000070
000071+D QUSCCSID11             21     24I 0                                                                     000000    7000071
000072+D*                                             CCSID                                                      000000    7000072
000073+D QUSOED01               25     28I 0                                                                     000000    7000073
000074+D*                                             Offset Exc Data                                            000000    7000074
000075+D QUSLED01               29     32I 0                                                                     000000    7000075
000076+D*                                             Length Exc Data                                            000000    7000076
000077+D*QUSRSV214              33     33                                                                        000000    7000077
000078+D*                                             Reserved2                                                  000000    7000078
000079+D*                                                                                                        000000    7000079
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     31
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000080+D*QUSED02                34     34                                                                        000000    7000080
000081+D*                                                                                                        000000    7000081
000082+D*                                      Varying Length    @B1A                                            000000    7000082
000004+ /endif                                                                                                             6000004
000005+                                                                                                                    6000005
000006+ /if defined (LIBC)                                                                                                 6000006
            LINES EXCLUDED: 1
000008+ /endif                                                                                                             6000008
000009+                                                                                                                    6000009
000010+ /define LIBC                                                                                                       6000010
000011+                                                                                                                    6000011
000012+ *-------------------------------------------------------------------------                                         6000012
000013+ * Prototypes for C-Functions                                                                                       6000013
000014+ *-------------------------------------------------------------------------                                         6000014
000015+ *                                                                                                                  6000015
000016+ * string functions                                                                                                 6000016
000017+ *                                                                                                                  6000017
000018+D strtok          PR              *   extproc('strtok')                                                             6000018
000019+D  i_string                       *   value  options(*string)                                                       6000019
000020+D  i_token                        *   value  options(*string)                                                       6000020
000021+ *                                                                                                                  6000021
000022+D strlen          PR            10U 0 extproc('strlen')                                                             6000022
000023+D   string                        *   value                                                                         6000023
000024+ *                                                                                                                  6000024
000025+D strcmp          PR            10I 0 extproc('strcmp')                                                             6000025
000026+D  string1                        *   value                                                                         6000026
000027+D  string2                        *   value                                                                         6000027
000028+ *                                                                                                                  6000028
000029+D strncmp         PR            10I 0 extproc('strncmp')                                                            6000029
000030+D  string1                        *   value                                                                         6000030
000031+D  string2                        *   value                                                                         6000031
000032+D  count                        10I 0 value                                                                         6000032
000033+ *                                                                                                                  6000033
000034+D strcmpi         PR            10I 0 extproc('strcmpi')                                                            6000034
000035+D  string1                        *   value                                                                         6000035
000036+D  string2                        *   value                                                                         6000036
000037+ *                                                                                                                  6000037
000038+D strcasecmp      PR            10I 0 extproc('strcasecmp')                                                         6000038
000039+D  string1                        *   value                                                                         6000039
000040+D  string2                        *   value                                                                         6000040
000041+ *                                                                                                                  6000041
000042+D strncasecmp     PR            10I 0 extproc('strncasecmp')                                                        6000042
000043+D  string1                        *   value                                                                         6000043
000044+D  string2                        *   value                                                                         6000044
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     32
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000045+D  count                        10I 0 value                                                                         6000045
000046+ *                                                                                                                  6000046
000047+D strstr          PR              *   extproc('strstr')                                                             6000047
000048+D  string1                        *   value                                                                         6000048
000049+D  string2                        *   value                                                                         6000049
000050+ *                                                                                                                  6000050
000051+D strcspn         PR            10I 0 extproc('strcspn')                                                            6000051
000052+D  string1                        *   value                                                                         6000052
000053+D  string2                        *   value                                                                         6000053
000054+ *                                                                                                                  6000054
000055+D requestControlBlockLower...                                                                                       6000055
000056+D                 DS                  qualified                                                                     6000056
000057+D   type                        10I 0 inz(0)                                                                        6000057
000058+D   ccsid                       10I 0 inz(0)                                                                        6000058
000059+D   case                        10I 0 inz(0)                                                                        6000059
000060+D   res1                        10A   inz(*ALLX'00')                                                                6000060
000061+ *                                                                                                                  6000061
000062+D requestControlBlockUpper...                                                                                       6000062
000063+D                 DS                  qualified                                                                     6000063
000064+D   type                        10I 0 inz(1)                                                                        6000064
000065+D   ccsid                       10I 0 inz(0)                                                                        6000065
000066+D   case                        10I 0 inz(0)                                                                        6000066
000067+D   res1                        10A   inz(*ALLX'00')                                                                6000067
000068+ *                                                                                                                  6000068
000069+D convertCase     PR                  extproc('QlgConvertCase')                                                     6000069
000070+D   reqContBlock                      const                                                                         6000070
000071+D                                     likeds(requestControlBlockUpper)                                              6000071
000072+D   input                     1024A   const options(*varsize)                                                       6000072
000073+D   output                    1024A   options(*varsize)                                                             6000073
000074+D   len                         10I 0 const                                                                         6000074
000075+D   errorcode                         likeds(QUSEC) options(*varsize)                                               6000075
000076+                                                                                                                    6000076
000077+ *                                                                                                                  6000077
000078+ * memory functions                                                                                                 6000078
000079+ *                                                                                                                  6000079
000080+D memcpy          PR              *          extproc('memcpy')                                                      6000080
000081+D  dest                           *   value                                                                         6000081
000082+D  source                         *   value                                                                         6000082
000083+D  count                        10U 0 value                                                                         6000083
000084+ *                                                                                                                  6000084
000085+D memset          PR              *          extproc('memset')                                                      6000085
000086+D  i_pDest                        *   value                                                                         6000086
000087+D  i_char                       10I 0 value                                                                         6000087
000088+D  i_count                      10U 0 value                                                                         6000088
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     33
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000089+ *                                                                                                                  6000089
000090+D memmove         PR              *          extproc('memmove')                                                     6000090
000091+D  pMemDest                       *   value                                                                         6000091
000092+D  pMemSrc                        *   value                                                                         6000092
000093+D  memSize                      10U 0 value                                                                         6000093
000094+ *                                                                                                                  6000094
000095+D memcmp          PR            10I 0        extproc('memcmp')                                                      6000095
000096+D  pBuf1                          *   value                                                                         6000096
000097+D  pBuf2                          *   value                                                                         6000097
000098+D  count                        10U 0 value                                                                         6000098
000099+ *                                                                                                                  6000099
000100+D memicmp         PR            10I 0        extproc('__memicmp')                                                   6000100
000101+D  pBuf1                          *   value                                                                         6000101
000102+D  pBuf2                          *   value                                                                         6000102
000103+D  count                        10U 0 value                                                                         6000103
000104+                                                                                                                    6000104
000105+ *                                                                                                                  6000105
000106+ * math functions                                                                                                   6000106
000107+ *                                                                                                                  6000107
000108+D ceiling         PR             8F   extproc('ceil')                                                               6000108
000109+D   value                        8F   value                                                                         6000109
000110+ *                                                                                                                  6000110
000111+D floor           PR             8F   extproc('floor')                                                              6000111
000112+D   value                        8F   value                                                                         6000112
000113+                                                                                                                    6000113
000114+ *                                                                                                                  6000114
000115+ * other functions                                                                                                  6000115
000116+ *                                                                                                                  6000116
000117+D tmpnam          PR              *   extproc('tmpnam')                                                             6000117
000118+D   buffer                      39A   options(*omit)                                                                6000118
000119+ *                                                                                                                  6000119
000120+D tmpnamIFS       PR              *   extproc('_C_IFS_tmpnam')                                                      6000120
000121+D   buffer                      39A   options(*omit)                                                                6000121
000122+ *                                                                                                                  6000122
000123+D system          PR            10I 0 extproc('system')                                                             6000123
000124+D   command                       *   value options(*string)                                                        6000124
000125+ *                                                                                                                  6000125
000126+D srand           PR                         extproc('srand')                                                       6000126
000127+D  i_seed                       10U 0 value                                                                         6000127
000128+ *                                                                                                                  6000128
000129+D rand            PR            10I 0        extproc('rand')                                                        6000129
000130+ *                                                                                                                  6000130
000131+D qsort           PR              *          extproc('qsort')                                                       6000131
000132+D  memPtr                         *   value                                                                         6000132
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     34
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000133+D  numElem                      10U 0 value                                                                         6000133
000134+D  width                        10U 0 value                                                                         6000134
000135+D  pSortFunc                      *   value  procptr                                                                6000135
000136+ *                                                                                                                  6000136
000137+D bsearch         PR              *          extproc('bsearch')                                                     6000137
000138+D  keyPtr                         *   value                                                                         6000138
000139+D  memPtr                         *   value                                                                         6000139
000140+D  numElem                      10U 0 value                                                                         6000140
000141+D  width                        10U 0 value                                                                         6000141
000142+D  pSearchFnc                     *   value  procptr                                                                6000142
000143+                                                                                                                    6000143
000144+ *                                                                                                                  6000144
000145+ * error handling                                                                                                   6000145
000146+ *                                                                                                                  6000146
000147+D errno           PR              *   extproc('__errno')                                                            6000147
000148+ *                                                                                                                  6000148
000149+D strerr          PR              *   extproc('strerror')                                                           6000149
000150+D  errnum                       10I 0 value                                                                         6000150
000151+ * for backwards compatibility                                                                                      6000151
000152+D strerror        PR              *   extproc('strerror')                                                           6000152
000153+D  errnum                       10I 0 value                                                                         6000153
000154+                                                                                                                    6000154
000155+                                                                                                                    6000155
000156+ *                                                                                                                  6000156
000157+ * fcntl() commands                                                                                                 6000157
000158+ *                                                                                                                  6000158
000159+D F_DUPFD         C                   0                                                                             6000159
000160+D F_GETFL         C                   6                                                                             6000160
000161+D F_SETFL         C                   7                                                                             6000161
000162+D F_GETOWN        C                   8                                                                             6000162
000163+D F_SETOWN        C                   9                                                                             6000163
000164+ *                                                                                                                  6000164
000165+ * fcntl() flags                                                                                                    6000165
000166+ *                                                                                                                  6000166
000167+D O_NONBLOCK      C                   128                                                                           6000167
000168+D O_NDELAY        C                   128                                                                           6000168
000169+D FNDELAY         C                   128                                                                           6000169
000170+D FASYNC          C                   512                                                                           6000170
000171+                                                                                                                    6000171
000172+ *--------------------------------------------------------------------                                              6000172
000173+ *   fcntl()--Change Descriptor Attributes                                                                          6000173
000174+ *                                                                                                                  6000174
000175+ *   int fcntl(int descriptor, int command, ...)                                                                    6000175
000176+ *                                                                                                                  6000176
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     35
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000177+ *   The third parameter (when used with sockets) is also an                                                        6000177
000178+ *   integer passed by value.. it specifies an argument for                                                         6000178
000179+ *   some of the commands.                                                                                          6000179
000180+ *                                                                                                                  6000180
000181+ *   commands supported in sockets are:                                                                             6000181
000182+ *          F_GETFL -- Return the status flags for the descriptor                                                   6000182
000183+ *          F_SETFL -- Set status flags for the descriptor                                                          6000183
000184+ *                    (Arg =)status flags (ORed) to set.                                                            6000184
000185+ * (the commands below arent terribly useful in RPG)                                                                6000185
000186+ *          F_DUPFD -- Duplicate the descriptor                                                                     6000186
000187+ *                    (Arg =)minimum value that new descriptor can be                                               6000187
000188+ *          F_GETOWN -- Return the process ID or group ID that's                                                    6000188
000189+ *                     set to receive SIGIO & SIGURG                                                                6000189
000190+ *          F_SETOWN -- Set the process ID or group ID that's                                                       6000190
000191+ *                     to receive SIGIO & SIGURG                                                                    6000191
000192+ *                    (Arg =)process ID (or neg value for group ID)                                                 6000192
000193+ *                                                                                                                  6000193
000194+ *  returns -1 upon error.                                                                                          6000194
000195+ *          successful values are command-specific.                                                                 6000195
000196+ *--------------------------------------------------------------------                                              6000196
000197+D fcntl           PR            10I 0 extproc('fcntl')                                                              6000197
000198+D   socketDesc                  10I 0 value                                                                         6000198
000199+D   command                     10I 0 value                                                                         6000199
000200+D   arg                         10I 0 value options(*nopass)                                                        6000200
000201+                                                                                                                    6000201
000202+                                                                                                                    6000202
000203+D atoi            PR            10I 0 extproc('atoi')                                                               6000203
000204+D   string                        *   value                                                                         6000204
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000011 /include 'message.rpginc'                                                                                            000011
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  message.r+                                                   *                     8
        * External name  . . . . . . :  ext/headers/message.rpginc                                   *                     8
        * Last change  . . . . . . . :  19-06-23  16:31:36                                           *                     8
        *--------------------------------------------------------------------------------------------*
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     36
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              8000001
000002+                                                                                                                    8000002
000003+/if not defined (MESSAGE_H)                                                                                         8000003
000004+/define MESSAGE_H                                                                                                   8000004
000005+                                                                                                                    8000005
000006+dcl-pr message_send extproc(*CWIDEN : *dclcase);                                                                    8000006
000007+    messageId pointer value options(*string);                                                                       8000007
000008+    messageFile pointer value options(*string);                                                                     8000008
000009+    type pointer value options(*string);                                                                            8000009
000010+    message pointer value options(*string);                                                                         8000010
000011+    replaceValue1 pointer value options(*string : *nopass);                                                         8000011
000012+    replaceValue2 pointer value options(*string : *nopass);                                                         8000012
000013+    replaceValue3 pointer value options(*string : *nopass);                                                         8000013
000014+    replaceValue4 pointer value options(*string : *nopass);                                                         8000014
000015+    replaceValue5 pointer value options(*string : *nopass);                                                         8000015
000016+    replaceValue6 pointer value options(*string : *nopass);                                                         8000016
000017+    replaceValue7 pointer value options(*string : *nopass);                                                         8000017
000018+end-pr;                                                                                                             8000018
000019+                                                                                                                    8000019
000020+                                                                                                                    8000020
000021+dcl-pr message_sendPastControlBoundary extproc(*CWIDEN : *dclcase);                                                 8000021
000022+    messageId pointer value options(*string);                                                                       8000022
000023+    messageFile pointer value options(*string);                                                                     8000023
000024+    type pointer value options(*string);                                                                            8000024
000025+    message pointer value options(*string);                                                                         8000025
000026+    replaceValue1 pointer value options(*string : *nopass);                                                         8000026
000027+    replaceValue2 pointer value options(*string : *nopass);                                                         8000027
000028+    replaceValue3 pointer value options(*string : *nopass);                                                         8000028
000029+    replaceValue4 pointer value options(*string : *nopass);                                                         8000029
000030+    replaceValue5 pointer value options(*string : *nopass);                                                         8000030
000031+    replaceValue6 pointer value options(*string : *nopass);                                                         8000031
000032+    replaceValue7 pointer value options(*string : *nopass);                                                         8000032
000033+end-pr;                                                                                                             8000033
000034+                                                                                                                    8000034
000035+                                                                                                                    8000035
000036+dcl-pr message_info extproc(*CWIDEN : *dclcase);                                                                    8000036
000037+    message pointer value options(*string);                                                                         8000037
000038+    replaceValue1 pointer value options(*string : *nopass);                                                         8000038
000039+    replaceValue2 pointer value options(*string : *nopass);                                                         8000039
000040+    replaceValue3 pointer value options(*string : *nopass);                                                         8000040
000041+    replaceValue4 pointer value options(*string : *nopass);                                                         8000041
000042+    replaceValue5 pointer value options(*string : *nopass);                                                         8000042
000043+    replaceValue6 pointer value options(*string : *nopass);                                                         8000043
000044+    replaceValue7 pointer value options(*string : *nopass);                                                         8000044
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     37
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000045+end-pr;                                                                                                             8000045
000046+                                                                                                                    8000046
000047+dcl-pr message_escape extproc(*CWIDEN : *dclcase);                                                                  8000047
000048+    message pointer value options(*string);                                                                         8000048
000049+    replaceValue1 pointer value options(*string : *nopass);                                                         8000049
000050+    replaceValue2 pointer value options(*string : *nopass);                                                         8000050
000051+    replaceValue3 pointer value options(*string : *nopass);                                                         8000051
000052+    replaceValue4 pointer value options(*string : *nopass);                                                         8000052
000053+    replaceValue5 pointer value options(*string : *nopass);                                                         8000053
000054+    replaceValue6 pointer value options(*string : *nopass);                                                         8000054
000055+    replaceValue7 pointer value options(*string : *nopass);                                                         8000055
000056+end-pr;                                                                                                             8000056
000057+                                                                                                                    8000057
000058+/endif                                                                                                              8000058
000012 /include 'simpleList.rpginc'                                                                                         000012
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  simpleLis+                                                   *                     9
        * External name  . . . . . . :  ext/headers/simpleList.rpginc                                *                     9
        * Last change  . . . . . . . :  23-05-23  11:26:39                                           *                     9
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                              9000001
000002+                                                                                                                    9000002
000003+/if not defined (SIMPLELIST)                                                                                        9000003
000004+/define SIMPLELIST                                                                                                  9000004
000005+                                                                                                                    9000005
000006+/include 'varchar.rpginc'                                                                                           9000006
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  varchar.r+                                                   *                    10
        * External name  . . . . . . :  ext/headers/varchar.rpginc                                   *                    10
        * Last change  . . . . . . . :  23-05-23  11:26:40                                           *                    10
        *--------------------------------------------------------------------------------------------*
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     38
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                             10000001
000002+                                                                                                                   10000002
000003+/if not defined (VARCHAR)                                                                                          10000003
000004+/define VARCHAR                                                                                                    10000004
000005+                                                                                                                   10000005
000006+dcl-ds LVARPUCHAR_t qualified template;                                                                            10000006
000007+    length uns(10);                                                                                                10000007
000008+    string pointer;                                                                                                10000008
000009+end-ds;                                                                                                            10000009
000010+                                                                                                                   10000010
000011+dcl-ds PLVARCHAR_t qualified template;                                                                             10000011
000012+    length int(10);                                                                                                10000012
000013+    string char(1048576);                                                                                          10000013
000014+end-ds;                                                                                                            10000014
000015+                                                                                                                   10000015
000016+dcl-ds VARCHAR_t qualified template;                                                                               10000016
000017+    length int(5);                                                                                                 10000017
000018+    string char(32767);                                                                                            10000018
000019+end-ds;                                                                                                            10000019
000020+                                                                                                                   10000020
000021+dcl-pr vc2str  pointer extproc(*CWIDEN:'vc2str');                                                                  10000021
000022+    input_varchar varchar(32760:2) options(*varsize);                                                              10000022
000023+end-pr;                                                                                                            10000023
000024+                                                                                                                   10000024
000025+                                                                                                                   10000025
000026+/endif                                                                                                             10000026
000007+                                                                                                                    9000007
000008+                                                                                                                    9000008
000009+dcl-ds SLISTNODE_t qualified template;                                                                              9000009
000010+   pNext pointer; // pointer of type SLISTNODE_t                                                                    9000010
000011+   payLoadLength int(10);                                                                                           9000011
000012+   payloadData pointer;                                                                                             9000012
000013+end-ds;                                                                                                             9000013
000014+                                                                                                                    9000014
000015+dcl-ds SLIST_t qualified template;                                                                                  9000015
000016+   pHead pointer;                                                                                                   9000016
000017+   pTail pointer;                                                                                                   9000017
000018+   length int(10);                                                                                                  9000018
000019+end-ds;                                                                                                             9000019
000020+                                                                                                                    9000020
000021+dcl-ds SLISTITERATOR_t qualified align(*full) template;                                                             9000021
000022+   pThis pointer; // pointer of type SLISTNODE_t                                                                    9000022
000023+   pNext pointer; // pointer of type SLISTNODE_t                                                                    9000023
000024+   hasNext ind;                                                                                                     9000024
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     39
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000025+end-ds;                                                                                                             9000025
000026+                                                                                                                    9000026
000027+dcl-ds SLISTKEYVAL_t qualified template;                                                                            9000027
000028+   key likeds(LVARPUCHAR_t);                                                                                        9000028
000029+   value likeds(LVARPUCHAR_t);                                                                                      9000029
000030+end-ds;                                                                                                             9000030
000031+                                                                                                                    9000031
000032+dcl-pr sList_new pointer extproc('sList_new') end-pr;                                                               9000032
000033+                                                                                                                    9000033
000034+dcl-pr sList_free extproc('sList_free');                                                                            9000034
000035+   sList pointer value; // simpleList.c: PSLIST                                                                     9000035
000036+end-pr;                                                                                                             9000036
000037+                                                                                                                    9000037
000038+dcl-pr sList_push pointer extproc(*CWIDEN: 'sList_push'); // SLISTNODE_t                                            9000038
000039+   sList pointer value; // PSLIST                                                                                   9000039
000040+   len uns(10) value;                                                                                               9000040
000041+   data pointer options(*string) value;                                                                             9000041
000042+   head ind value;                                                                                                  9000042
000043+end-pr;                                                                                                             9000043
000044+                                                                                                                    9000044
000045+dcl-pr sList_pushLVPC pointer extproc('sList_pushLVPC');                                                            9000045
000046+   sList pointer value; // PSLIST                                                                                   9000046
000047+   key likeds(LVARPUCHAR_t) const;                                                                                  9000047
000048+   value likeds(LVARPUCHAR_t) const;                                                                                9000048
000049+end-pr;                                                                                                             9000049
000050+                                                                                                                    9000050
000051+dcl-pr sList_lookupLVPC varchar(1048576:4) rtnparm extproc('sList_lookupLVPC');                                     9000051
000052+   sList pointer value; // PSLIST                                                                                   9000052
000053+   searchTerm varchar(1048576:4) const;                                                                             9000053
000054+end-pr;                                                                                                             9000054
000055+                                                                                                                    9000055
000056+dcl-pr sList_setIterator likeds(SLISTITERATOR_t) extproc('sList_setIterator');                                      9000056
000057+   slist pointer value; // PSLIST                                                                                   9000057
000058+end-pr;                                                                                                             9000058
000059+                                                                                                                    9000059
000060+dcl-pr sList_foreach ind extproc('sList_foreach');                                                                  9000060
000061+   iterator likeds(SLISTITERATOR_t) const;                                                                          9000061
000062+end-pr;                                                                                                             9000062
000063+                                                                                                                    9000063
000064+/endif                                                                                                              9000064
000013 /include 'sockets.rpginc'                                                                                            000013
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     40
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  sockets.r+                                                   *                    11
        * External name  . . . . . . :  headers/sockets.rpginc                                       *                    11
        * Last change  . . . . . . . :  29-11-23  16:48:42                                           *                    11
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                             11000001
000002+                                                                                                                   11000002
000003+/if not defined (ILEVATOR_SOCKETS)                                                                                 11000003
000004+/define ILEVATOR_SOCKETS                                                                                           11000004
000005+                                                                                                                   11000005
000006+dcl-c PLAIN_SOCKET 0;                                                                                              11000006
000007+dcl-c SECURE_HANDSHAKE_IMEDIATE 1;                                                                                 11000007
000008+dcl-c SECURE_HANDSHAKE_LATER 2;                                                                                    11000008
000009+                                                                                                                   11000009
000010+dcl-pr sockets_setSSL extproc(*CWIDEN:'sockets_setSSL');                                                           11000010
000011+    sockets pointer value;                                                                                         11000011
000012+    useSSL  int(3)  value;                                                                                         11000012
000013+    certificateFile pointer options(*string) value;                                                                11000013
000014+    keyringPassword pointer options(*string) value;                                                                11000014
000015+end-pr;                                                                                                            11000015
000016+                                                                                                                   11000016
000017+dcl-pr sockets_new pointer extproc(*CWIDEN:'sockets_new') end-pr;                                                  11000017
000018+                                                                                                                   11000018
000019+dcl-pr sockets_free extproc(*CWIDEN:'sockets_free');                                                               11000019
000020+    sockets pointer value;                                                                                         11000020
000021+end-pr;                                                                                                            11000021
000022+                                                                                                                   11000022
000023+dcl-pr sockets_connect int(3) extproc(*CWIDEN:'sockets_connect');                                                  11000023
000024+    sockets  pointer value;                                                                                        11000024
000025+    server pointer options(*string) value;                                                                         11000025
000026+    port    int(10) value;                                                                                         11000026
000027+    timeout int(10) value;                                                                                         11000027
000028+end-pr;                                                                                                            11000028
000029+                                                                                                                   11000029
000030+                                                                                                                   11000030
000031+dcl-pr sockets_copy_socket int(3) extproc(*CWIDEN:'sockets_copy_socket');                                          11000031
000032+    toSockets  pointer value;                                                                                      11000032
000033+    fromSockets  pointer value;                                                                                    11000033
000034+end-pr;                                                                                                            11000034
000035+                                                                                                                   11000035
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     41
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000036+                                                                                                                   11000036
000037+dcl-pr sockets_set_secure int(3) extproc(*CWIDEN:'sockets_set_secure');                                            11000037
000038+    sockets  pointer value;                                                                                        11000038
000039+end-pr;                                                                                                            11000039
000040+                                                                                                                   11000040
000041+dcl-pr sockets_send int(10) extproc(*dclcase);                                                                     11000041
000042+    sockets pointer value;                                                                                         11000042
000043+    buffer pointer value;                                                                                          11000043
000044+    length int(10) value;                                                                                          11000044
000045+end-pr;                                                                                                            11000045
000046+                                                                                                                   11000046
000047+dcl-pr sockets_setTrace extproc(*CWIDEN:'sockets_setTrace');                                                       11000047
000048+    sockets  pointer value;                                                                                        11000048
000049+    traceFile  pointer options(*string) value;                                                                     11000049
000050+end-pr;                                                                                                            11000050
000051+                                                                                                                   11000051
000052+/endif                                                                                                             11000052
000014 /include 'teraspace.rpginc'                                                                                          000014
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  teraspace+                                                   *                    12
        * External name  . . . . . . :  ext/headers/teraspace.rpginc                                 *                    12
        * Last change  . . . . . . . :  23-05-23  11:26:40                                           *                    12
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000001+**FREE                                                                                                             12000001
000002+                                                                                                                   12000002
000003+/if not defined (TERASPACE_H)                                                                                      12000003
000004+/define TERASPACE_H                                                                                                12000004
000005+                                                                                                                   12000005
000006+dcl-pr teraspace_alloc pointer extproc(*dclcase);                                                                  12000006
000007+  length uns(20) value;                                                                                            12000007
000008+end-pr;                                                                                                            12000008
000009+                                                                                                                   12000009
000010+dcl-pr teraspace_calloc pointer extproc(*dclcase);                                                                 12000010
000011+  length uns(20) value;                                                                                            12000011
000012+end-pr;                                                                                                            12000012
000013+                                                                                                                   12000013
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     42
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000014+dcl-pr teraspace_free extproc(*dclcase);                                                                           12000014
000015+  p pointer;                                                                                                       12000015
000016+end-pr;                                                                                                            12000016
000017+                                                                                                                   12000017
000018+dcl-pr teraspace_strdup pointer extproc(*dclcase);                                                                 12000018
000019+  p pointer options(*string) value;                                                                                12000019
000020+end-pr;                                                                                                            12000020
000021+                                                                                                                   12000021
000022+dcl-pr teraspace_strTrimDup pointer extproc(*dclcase);                                                             12000022
000023+  p pointer options(*string) value;                                                                                12000023
000024+end-pr;                                                                                                            12000024
000025+                                                                                                                   12000025
000026+dcl-pr teraspace_realloc pointer extproc(*dclcase);                                                                12000026
000027+  p pointer;                                                                                                       12000027
000028+  length uns(20) value;                                                                                            12000028
000029+end-pr;                                                                                                            12000029
000030+                                                                                                                   12000030
000031+dcl-pr teraspace_size uns(20) extproc(*dclcase);                                                                   12000031
000032+  p pointer;                                                                                                       12000032
000033+end-pr;                                                                                                            12000033
000034+                                                                                                                   12000034
000035+dcl-pr teraspace_stat extproc(*dclcase) end-pr;                                                                    12000035
000036+                                                                                                                   12000036
000037+dcl-pr teraspace_leak ind extproc(*dclcase) end-pr;                                                                12000037
000038+                                                                                                                   12000038
000039+dcl-pr teraspace_use uns(20) extproc(*dclcase) end-pr;                                                             12000039
000040+                                                                                                                   12000040
000041+/endif                                                                                                             12000041
000015                                                                                                                      000015
000016                                                                                                                      000016
000017 dcl-pr fopen pointer extproc('_C_IFS_fopen');                                                                        000017
000018     filename pointer value options(*string);                                                                         000018
000019     mode pointer value options(*string);                                                                             000019
000020 end-pr;                                                                                                              000020
000021                                                                                                                      000021
000022 dcl-pr fclose int(10) extproc('_C_IFS_fclose');                                                                      000022
000023     stream pointer value;                                                                                            000023
000024 end-pr;                                                                                                              000024
000025                                                                                                                      000025
000026 dcl-pr unlink int(10) extproc(*dclcase);                                                                             000026
000027     path pointer value options(*string);                                                                             000027
000028 end-pr;                                                                                                              000028
000029                                                                                                                      000029
000030 dcl-pr access int(10) extproc('access');                                                                             000030
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     43
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000031     path pointer value options(*string);                                                                             000031
000032     mode int(10) value;                                                                                              000032
000033 end-pr;                                                                                                              000033
000034                                                                                                                      000034
000035                                                                                                                      000035
000036                                                                                                                      000036
000037 //                                                                                                                   000037
000038 // Access mode flags for access() and accessx()                                                                      000038
000039 //                                                                                                                   000039
000040 // F_OK = File Exists                                                                                                000040
000041 // R_OK = Read Access                                                                                                000041
000042 // W_OK = Write Access                                                                                               000042
000043 // X_OK = Execute or Search                                                                                          000043
000044 //                                                                                                                   000044
000045 dcl-c F_OK 0;                                                                                                        000045
000046 dcl-c R_OK 4;                                                                                                        000046
000047 dcl-c W_OK 2;                                                                                                        000047
000048 dcl-c X_OK 1;                                                                                                        000048
000049                                                                                                                      000049
000050 dcl-s ENUM int(3) template;                                                                                          000050
000051 dcl-c FALSE 0;                                                                                                       000051
000052 dcl-c TRUE 1;                                                                                                        000052
000053 dcl-c NULL x'00';                                                                                                    000053
000054                                                                                                                      000054
000055 dcl-s listedHttpStatusCodes int(5) dim(41) ctdata;                                                                   000055
000056                                                                                                                      000056
000057 dcl-c DEFAULT_TIMEOUT 30.000; // 30 seconds                                                                          000057
000058 dcl-c DEFAULT_RETRIES 2;                                                                                             000058
000059 dcl-c NO_RETRIES 0;                                                                                                  000059
000060                                                                                                                      000060
000061 dcl-s UPPER char(26) ccsid(*utf8) inz('ABCDEFGHIJKLMNOPQRSTUVWXYZ');                                                 000061
000062 dcl-s LOWER char(26) ccsid(*utf8) inz('abcdefghijklmnopqrstuvwxyz');                                                 000062
000063                                                                                                                      000063
000064 dcl-c ILEVATOR_VERSION '0.1.0';                                                                                      000064
000065                                                                                                                      000065
000066                                                                                                                      000066
000067 dcl-proc iv_newHttpClient export;                                                                                    000067
000068     dcl-pi *n pointer end-pi;                                                                                        000068
000069                                                                                                                      000069
000070     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000070
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     44
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000071                                                                                                                      000071
000072     pClient = teraspace_alloc(%size(ilevator_t));                                                                    000072
000073     clear client;                                                                                                    000073
000074                                                                                                                      000074
000075     client.method = *NULL;                                                                                           000075
000076     client.url = *NULL;                                                                                              000076
000077                                                                                                                      000077
000078     client.buffer = teraspace_alloc(IV_BUFFER_SIZE);                                                                 000078
000079     client.bufferSize = IV_BUFFER_SIZE;                                                                              000079
000080                                                                                                                      000080
000081     client.sockets =  sockets_new();                                                                                 000081
000082     client.headerList = sList_new();                                                                                 000082
000083     client.timeout = DEFAULT_TIMEOUT;                                                                                000083
000084     client.retries = DEFAULT_RETRIES;                                                                                000084
000085                                                                                                                      000085
000086     client.server = NULL;                                                                                            000086
000087     client.port = 0;                                                                                                 000087
000088     client.resource = NULL;                                                                                          000088
000089     client.host = NULL;                                                                                              000089
000090     client.user = NULL;                                                                                              000090
000091     client.password = NULL;                                                                                          000091
000092     client.location = NULL;                                                                                          000092
000093     client.message = NULL;                                                                                           000093
000094     client.requestHeaderList = *NULL;                                                                                000094
000095                                                                                                                      000095
000096     iv_addHeader(pClient : 'User-Agent' : 'ILEvator for IBM i/' + ILEVATOR_VERSION);                                 000096
000097                                                                                                                      000097
000098     loadConfigFromEnvVar(pClient);                                                                                   000098
000099                                                                                                                      000099
000100     return pClient;                                                                                                  000100
000101 end-proc;                                                                                                            000101
000102                                                                                                                      000102
000103                                                                                                                      000103
000104 dcl-proc iv_free export;                                                                                             000104
000105     dcl-pi *n;                                                                                                       000105
000106       pClient pointer value;                                                                                         000106
000107     end-pi;                                                                                                          000107
000108                                                                                                                      000108
000109     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000109
000110                                                                                                                      000110
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     45
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000111     if (pClient = *null);                                                                            B01             000111
000112       return;                                                                                         01             000112
000113     endif;                                                                                           E01             000113
000114                                                                                                                      000114
000115     iv_freeList(client.headerList);                                                                                  000115
000116                                                                                                                      000116
000117     teraspace_free(client.method);                                                                                   000117
000118     teraspace_free(client.url);                                                                                      000118
000119     sockets_free(client.sockets);                                                                                    000119
000120     sList_free(client.headerList);                                                                                   000120
000121     teraspace_free(client.authProvider);                                                                             000121
000122     teraspace_free(client.buffer);                                                                                   000122
000123     iv_free (client.proxyTunnel);                                                                                    000123
000124     teraspace_free(pClient);                                                                                         000124
000125 end-proc;                                                                                                            000125
000126                                                                                                                      000126
000127                                                                                                                      000127
000128 dcl-proc iv_freeList export;                                                                                         000128
000129   dcl-pi *n;                                                                                                         000129
000130     list pointer;                                                                                                    000130
000131   end-pi;                                                                                                            000131
000132                                                                                                                      000132
000133   dcl-ds iterator likeds(SLISTITERATOR_t) inz;                                                                       000133
000134   dcl-ds node likeds(SLISTNODE_t) based(iterator.pThis);                                                             000134
000135   dcl-ds payload likeds(SLISTKEYVAL_t) based(node.payloadData);                                                      000135
000136                                                                                                                      000136
000137   iterator = sList_setIterator(list);                                                                                000137
000138                                                                                                                      000138
000139   dow (sList_foreach(iterator));                                                                     B01             000139
000140     teraspace_free(payload.key.string);                                                               01             000140
000141     teraspace_free(payload.value.string);                                                             01             000141
000142   enddo;                                                                                             E01             000142
000143                                                                                                                      000143
000144   sList_free(list);                                                                                                  000144
000145 end-proc;                                                                                                            000145
000146                                                                                                                      000146
000147                                                                                                                      000147
000148 dcl-proc iv_setResponseHeaderBuffer export;                                                                          000148
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     46
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000149     dcl-pi *n;                                                                                                       000149
000150         pClient pointer value;                                                                                       000150
000151         buffer pointer value;                                                                                        000151
000152         bufferSize int(10) value;                                                                                    000152
000153         bufferType int(5) value;                                                                                     000153
000154         bufferCcsid int(10) value;                                                                                   000154
000155     end-pi;                                                                                                          000155
000156                                                                                                                      000156
000157     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000157
000158                                                                                                                      000158
000159     iv_anychar_set(                                                                                                  000159
000160         %addr( client.responseHeaderBuffer)  :                                                                       000160
000161         buffer :                                                                                                     000161
000162         bufferSize :                                                                                                 000162
000163         bufferType :                                                                                                 000163
000164         bufferCcsid                                                                                                  000164
000165     );                                                                                                               000165
000166 end-proc;                                                                                                            000166
000167                                                                                                                      000167
000168                                                                                                                      000168
000169 dcl-proc iv_setResponseDataBuffer export;                                                                            000169
000170     dcl-pi *n;                                                                                                       000170
000171         pClient pointer value;                                                                                       000171
000172         buffer pointer value;                                                                                        000172
000173         bufferSize int(10) value;                                                                                    000173
000174         bufferType int(5) value;                                                                                     000174
000175         bufferCcsid int(10) value;                                                                                   000175
000176     end-pi;                                                                                                          000176
000177                                                                                                                      000177
000178     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000178
000179                                                                                                                      000179
000180     iv_anychar_set(                                                                                                  000180
000181         %addr(client.responseDataBuffer) :                                                                           000181
000182         buffer :                                                                                                     000182
000183         bufferSize :                                                                                                 000183
000184         bufferType :                                                                                                 000184
000185         bufferCcsid                                                                                                  000185
000186     );                                                                                                               000186
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     47
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000187 end-proc;                                                                                                            000187
000188                                                                                                                      000188
000189                                                                                                                      000189
000190 dcl-proc iv_setRequestDataBuffer export;                                                                             000190
000191     dcl-pi *n;                                                                                                       000191
000192         pClient pointer value;                                                                                       000192
000193         buffer pointer value;                                                                                        000193
000194         bufferSize int(10) value;                                                                                    000194
000195         bufferType int(5) value;                                                                                     000195
000196         bufferCcsid int(10) value;                                                                                   000196
000197     end-pi;                                                                                                          000197
000198                                                                                                                      000198
000199     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000199
000200                                                                                                                      000200
000201     iv_anychar_set(                                                                                                  000201
000202         %addr(client.requestDataBuffer) :                                                                            000202
000203         buffer :                                                                                                     000203
000204         bufferSize :                                                                                                 000204
000205         bufferType :                                                                                                 000205
000206         bufferCcsid                                                                                                  000206
000207     );                                                                                                               000207
000208 end-proc;                                                                                                            000208
000209                                                                                                                      000209
000210 dcl-proc iv_setProxyTunnel  export;                                                                                  000210
000211     dcl-pi *n;                                                                                                       000211
000212         pClient pointer value;                                                                                       000212
000213         url pointer options(*string) value;                                                                          000213
000214     end-pi;                                                                                                          000214
000215                                                                                                                      000215
000216     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000216
000217     dcl-ds proxy  likeds(ilevator_t) based(client.proxyTunnel);                                                      000217
000218     client.proxyTunnel = iv_newHttpClient();                                                                         000218
000219     proxy.url    = teraspace_strTrimDup(url);                                                                        000219
000220                                                                                                                      000220
000221 end-proc;                                                                                                            000221
000222                                                                                                                      000222
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     48
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000223                                                                                                                      000223
000224 dcl-proc iv_setResponseFile export;                                                                                  000224
000225     dcl-pi *n;                                                                                                       000225
000226         pClient       pointer value;                                                                                 000226
000227         fileName      pointer options(*string) value;                                                                000227
000228         fileCcsid     int(10)  options(*nopass) value;                                                               000228
000229     end-pi;                                                                                                          000229
000230                                                                                                                      000230
000231     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000231
000232     dcl-s c_errno int(10) based(pErrno);                                                                             000232
000233     dcl-s mode char(32);                                                                                             000233
000234                                                                                                                      000234
000235     if (%parms() = 2);                                                                               B01             000235
000236         mode = 'wb,o_ccsid=1252';                                                                     01             000236
000237     else;                                                                                            X01             000237
000238         mode = 'wb,o_ccsid=' + %char(fileCcsid);                                                      01             000238
000239     endif;                                                                                           E01             000239
000240                                                                                                                      000240
000241  unlink(fileName);                                                                                                   000241
000242                                                                                                                      000242
000243  client.responseDataFile = fopen(fileName : mode);                                                                   000243
000244  if (client.responseDataFile = *null);                                                               B01             000244
000245      pErrno = errno();                                                                                01             000245
000246         message_info('Response output open failed: ' + %str(strerror(c_errno):1000));                 01             000246
000247  endif;                                                                                              E01             000247
000248 end-proc;                                                                                                            000248
000249                                                                                                                      000249
000250                                                                                                                      000250
000251 dcl-proc iv_setCommTrace export;                                                                                     000251
000252     dcl-pi *n;                                                                                                       000252
000253         pClient         pointer value;                                                                               000253
000254         traceFileName   pointer options(*string) value;                                                              000254
000255     end-pi;                                                                                                          000255
000256                                                                                                                      000256
000257     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000257
000258                                                                                                                      000258
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     49
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000259     sockets_setTrace(client.sockets : traceFileName);                                                                000259
000260                                                                                                                      000260
000261 end-proc;                                                                                                            000261
000262                                                                                                                      000262
000263 dcl-proc iv_execute export;                                                                                          000263
000264     dcl-pi *n ind;                                                                                                   000264
000265         pClient pointer value;                                                                                       000265
000266         method pointer options(*string) value;                                                                       000266
000267         url pointer options(*string) value;                                                                          000267
000268         headers pointer options(*nopass) value;                                                                      000268
000269     end-pi;                                                                                                          000269
000270                                                                                                                      000270
000271     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000271
000272     dcl-s  apiStatus int(10) inz(IV_STATUS_RETRY);                                                                   000272
000273     dcl-s  try int(5);                                                                                               000273
000274     dcl-s  ok like(ENUM);                                                                                            000274
000275     dcl-s  success ind;                                                                                              000275
000276                                                                                                                      000276
000277     if (%parms() >= 4);                                                                              B01             000277
000278         client.requestHeaderList = headers;                                                           01             000278
000279     endif;                                                                                           E01             000279
000280                                                                                                                      000280
000281     client.method = teraspace_strTrimDup(method);                                                                    000281
000282     client.url    = teraspace_strTrimDup(url);                                                                       000282
000283                                                                                                                      000283
000284     parseUrl(pClient : url);                                                                                         000284
000285                                                                                                                      000285
000286     iv_debug('Port: %s' : %str(%addr(client.port):10) );                                                             000286
000287     iv_debug('Server: %s' : %str(%addr(client.server):200) );                                                        000287
000288     iv_debug('Host: %s' : %str(%addr(client.host):200) );                                                            000288
000289     iv_debug('Resource: %s' : %str(%addr(client.resource):200) );                                                    000289
000290                                                                                                                      000290
000291     if client.proxyTunnel <> *NULL;                                                                  B01             000291
000292         success = connect_using_proxy_tunnel (client);                                                01             000292
000293         if not success;                                                                              B02             000293
000294             return *OFF;                                                                              02             000294
000295         endif;                                                                                       E02             000295
000296     endif;                                                                                           E01             000296
000297                                                                                                                      000297
000298     for try = 0 to client.retries;                                                                   B01             000298
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     50
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000299                                                                                                                      000299
000300         // Already connect by proxy                                                                                  000300
000301         if client.proxyTunnel = *NULL;                                                               B02             000301
000302                                                                                                                      000302
000303             ok = sockets_connect(                                                                     02             000303
000304                 client.sockets :                                                                      02             000304
000305                 client.server :                                                                       02             000305
000306                 client.port :                                                                         02             000306
000307                 client.timeout * 1000 // from seconds to milliseconds                                 02             000307
000308             );                                                                                        02             000308
000309             if (ok = TRUE);                                                                          B03             000309
000310                 apiStatus = IV_STATUS_OK;                                                             03             000310
000311             else;                                                                                    X03             000311
000312                 apiStatus = IV_STATUS_ERROR;                                                          03             000312
000313                 iter;                                                                                 03             000313
000314             endif;                                                                                   E03             000314
000315         endif;                                                                                       E02             000315
000316                                                                                                                      000316
000317         apiStatus = sendRequest(pClient);                                                             01             000317
000318         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000318
000319             leave;                                                                                    02             000319
000320         endif;                                                                                       E02             000320
000321                                                                                                                      000321
000322         apiStatus = receiveHeader(pClient);                                                           01             000322
000323         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000323
000324             leave;                                                                                    02             000324
000325         endif;                                                                                       E02             000325
000326         if (apiStatus = IV_STATUS_RETRY);                                                            B02             000326
000327             iter;                                                                                     02             000327
000328         endif;                                                                                       E02             000328
000329                                                                                                                      000329
000330         iv_debug('HTTP response status: %s' : %char(client.status));                                  01             000330
000331                                                                                                                      000331
000332         // Don't try to get data if it was a HEAD request - it is only the header                                    000332
000333         // or status 204 => no content                                                                               000333
000334         if (%str(client.method:10) = 'HEAD' or client.status = 204);                                 B02             000334
000335             // No content, don't read any longer                                                                     000335
000336             apiStatus = IV_STATUS_OK;                                                                 02             000336
000337         elseif (client.responseIsChunked);                                                           X02             000337
000338             apiStatus = iv_chunked_receive(pClient);                                                  02             000338
000339         else;                                                                                        X02             000339
000340             apiStatus = receiveData(pClient);                                                         02             000340
000341         endif;                                                                                       E02             000341
000342                                                                                                                      000342
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     51
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000343         if (apiStatus = IV_STATUS_OK);                                                               B02             000343
000344             leave;                                                                                    02             000344
000345         endif;                                                                                       E02             000345
000346         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000346
000347             leave;                                                                                    02             000347
000348         endif;                                                                                       E02             000348
000349         if (apiStatus = IV_STATUS_RETRY);                                                            B02             000349
000350             iter;                                                                                     02             000350
000351         endif;                                                                                       E02             000351
000352                                                                                                                      000352
000353     endfor;                                                                                          E01             000353
000354                                                                                                                      000354
000355     iv_anychar_finalize(%addr(client.responseHeaderBuffer));                                                         000355
000356     iv_anychar_finalize(%addr(client.responseDataBuffer));                                                           000356
000357                                                                                                                      000357
000358     if (client.responseDataFile <> *null);                                                           B01             000358
000359         fclose(client.responseDataFile);                                                              01             000359
000360     endif;                                                                                           E01             000360
000361                                                                                                                      000361
000362     return (apiStatus = IV_STATUS_OK);                                                                               000362
000363 end-proc;                                                                                                            000363
000364                                                                                                                      000364
000365                                                                                                                      000365
000366 dcl-proc connect_using_proxy_tunnel ;                                                                                000366
000367                                                                                                                      000367
000368     dcl-pi *n ind;                                                                                                   000368
000369         client likeds(ilevator_t);                                                                                   000369
000370     end-pi;                                                                                                          000370
000371     dcl-s  try int(5);                                                                                               000371
000372     dcl-s  ok like(ENUM);                                                                                            000372
000373                                                                                                                      000373
000374     dcl-s  apiStatus  int(10) inz(IV_STATUS_RETRY);                                                                  000374
000375     dcl-s  pProxy     pointer;                                                                                       000375
000376     dcl-ds proxy      likeds(ilevator_t) based(pProxy);                                                              000376
000377                                                                                                                      000377
000378     pProxy = client.proxyTunnel;                                                                                     000378
000379                                                                                                                      000379
000380     proxy.method = teraspace_strTrimDup('CONNECT');                                                                  000380
000381                                                                                                                      000381
000382     parseUrl(pProxy : proxy.url);                                                                                    000382
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     52
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000383                                                                                                                      000383
000384     for try = 0 to proxy.retries;                                                                    B01             000384
000385                                                                                                                      000385
000386         ok = sockets_connect(                                                                         01             000386
000387             proxy.sockets :                                                                           01             000387
000388             proxy.host :                                                                              01             000388
000389             proxy.port :                                                                              01             000389
000390             proxy.timeout * 1000 // from seconds to milliseconds                                      01             000390
000391         );                                                                                            01             000391
000392         if (ok <> TRUE);                                                                             B02             000392
000393             apiStatus = IV_STATUS_ERROR;                                                              02             000393
000394             iter;                                                                                     02             000394
000395         endif;                                                                                       E02             000395
000396                                                                                                                      000396
000397         apiStatus = sendRequest(pProxy);                                                              01             000397
000398         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000398
000399             leave;                                                                                    02             000399
000400         endif;                                                                                       E02             000400
000401                                                                                                                      000401
000402         apiStatus = receiveHeader(pProxy);                                                            01             000402
000403                                                                                                                      000403
000404         iv_debug('HTTP CONNECT proxy response status: %s' : %char(proxy.status));                     01             000404
000405                                                                                                                      000405
000406         if (apiStatus = IV_STATUS_OK);                                                               B02             000406
000407             // Inherit the proxy socket on the main client                                                           000407
000408             sockets_copy_socket ( client.sockets : proxy.sockets);                                    02             000408
000409             sockets_set_secure (client.sockets);                                                      02             000409
000410             return *ON; // Success                                                                    02             000410
000411         endif;                                                                                       E02             000411
000412                                                                                                                      000412
000413         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000413
000414             leave;                                                                                    02             000414
000415         elseif (apiStatus = IV_STATUS_RETRY);                                                        X02             000415
000416             iter;                                                                                     02             000416
000417         endif;                                                                                       E02             000417
000418                                                                                                                      000418
000419     endfor;                                                                                          E01             000419
000420                                                                                                                      000420
000421     return *OFF; // This far !! error                                                                                000421
000422                                                                                                                      000422
000423 end-proc;                                                                                                            000423
000424                                                                                                                      000424
000425                                                                                                                      000425
000426 dcl-proc iv_setCertificate export;                                                                                   000426
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     53
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000427     dcl-pi *n ind;                                                                                                   000427
000428         pClient pointer value;                                                                                       000428
000429         certificateFile pointer options(*string) value;                                                              000429
000430         certificatePassword pointer options(*string : *nopass) value;                                                000430
000431     end-pi;                                                                                                          000431
000432                                                                                                                      000432
000433     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000433
000434     dcl-s c_errno int(10) based(pErrno);                                                                             000434
000435     dcl-s empty_str char(1) inz(x'00');                                                                              000435
000436                                                                                                                      000436
000437     if (0 <> access(certificateFile : R_OK));                                                        B01             000437
000438         pErrno = errno();                                                                             01             000438
000439         message_info('Certificate error: ' +                                                          01             000439
000440             %str(strerror(c_errno) : 1000) +                                                          01             000440
000441             ' File: ' + %str(certificateFile : 1000)                                                  01             000441
000442         );                                                                                            01             000442
000443         return *off;                                                                                  01             000443
000444     endif;                                                                                           E01             000444
000445                                                                                                                      000445
000446     if (%parms < 3);                                                                                 B01             000446
000447         certificatePassword = %addr(empty_str);                                                       01             000447
000448     endif;                                                                                           E01             000448
000449                                                                                                                      000449
000450     sockets_setSSL(                                                                                                  000450
000451         client.sockets :                                                                                             000451
000452         SECURE_HANDSHAKE_IMEDIATE :                                                                                  000452
000453         certificateFile :                                                                                            000453
000454         certificatePassword                                                                                          000454
000455     );                                                                                                               000455
000456                                                                                                                      000456
000457     iv_debug('SSL enabled');                                                                                         000457
000458     iv_debug('Using certificate file ' + %str(certificateFile));                                                     000458
000459                                                                                                                      000459
000460     return *on;                                                                                                      000460
000461 end-proc;                                                                                                            000461
000462                                                                                                                      000462
000463                                                                                                                      000463
000464 dcl-proc iv_getStatus export;                                                                                        000464
000465     dcl-pi *n int(5);                                                                                                000465
000466         pClient pointer value;                                                                                       000466
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     54
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000467     end-pi;                                                                                                          000467
000468                                                                                                                      000468
000469     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000469
000470                                                                                                                      000470
000471     return client.status;                                                                                            000471
000472 end-proc;                                                                                                            000472
000473                                                                                                                      000473
000474 dcl-proc iv_getErrorMessage export;                                                                                  000474
000475     dcl-pi *n varchar(256);                                                                                          000475
000476         pClient pointer value;                                                                                       000476
000477     end-pi;                                                                                                          000477
000478                                                                                                                      000478
000479     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000479
000480                                                                                                                      000480
000481     return client.message;                                                                                           000481
000482 end-proc;                                                                                                            000482
000483                                                                                                                      000483
000484                                                                                                                      000484
000485 dcl-proc iv_setAuthProvider export;                                                                                  000485
000486     dcl-pi *n;                                                                                                       000486
000487         pClient pointer value;                                                                                       000487
000488         authProvider pointer value;                                                                                  000488
000489     end-pi;                                                                                                          000489
000490                                                                                                                      000490
000491     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000491
000492                                                                                                                      000492
000493     if (client.authProvider <> *null);                                                               B01             000493
000494         teraspace_free(client.authProvider);                                                          01             000494
000495     endif;                                                                                           E01             000495
000496                                                                                                                      000496
000497     client.authProvider = authProvider;                                                                              000497
000498 end-proc;                                                                                                            000498
000499                                                                                                                      000499
000500                                                                                                                      000500
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     55
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000501 dcl-proc addHeader export;                                                                                           000501
000502     dcl-pi *n;                                                                                                       000502
000503         list pointer value;                                                                                          000503
000504         headerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8) value;                                                000504
000505         headerValue varchar(IV_HEADER_VALUE_SIZE:2) ccsid(*utf8) value;                                              000505
000506     end-pi;                                                                                                          000506
000507                                                                                                                      000507
000508     dcl-s lowerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8);                                                     000508
000509     dcl-ds listKey likeds(LVARPUCHAR_t);                                                                             000509
000510     dcl-ds listValue likeds(LVARPUCHAR_t);                                                                           000510
000511                                                                                                                      000511
000512     if (headerName = *blank);                                                                        B01             000512
000513       return;                                                                                         01             000513
000514     endif;                                                                                           E01             000514
000515                                                                                                                      000515
000516     // TODO use OS API for proper conversion                                                                         000516
000517     lowerName = %xlate(UPPER : LOWER : headerName);                                                                  000517
000518                                                                                                                      000518
000519     listKey.length = %len(lowerName);                                                                                000519
000520     listKey.string = teraspace_alloc(listKey.length + 1);                                                            000520
000521     %str(listKey.string : listKey.length + 1) = lowerName;                                                           000521
000522                                                                                                                      000522
000523     listValue.length = %len(headerValue);                                                                            000523
000524     listValue.string = teraspace_alloc(listValue.length + 1);                                                        000524
000525     %str(listValue.string : listValue.length + 1) = headerValue;                                                     000525
000526                                                                                                                      000526
000527     sList_pushLVPC(list : listKey : listValue);                                                                      000527
000528 end-proc;                                                                                                            000528
000529                                                                                                                      000529
000530                                                                                                                      000530
000531 dcl-proc iv_addHeader export;                                                                                        000531
000532     dcl-pi *n;                                                                                                       000532
000533         pClient pointer value;                                                                                       000533
000534         headerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8) value;                                                000534
000535         headerValue varchar(IV_HEADER_VALUE_SIZE:2) ccsid(*utf8) value;                                              000535
000536     end-pi;                                                                                                          000536
000537                                                                                                                      000537
000538     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000538
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     56
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000539     dcl-s lowerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8);                                                     000539
000540     dcl-ds listKey likeds(LVARPUCHAR_t);                                                                             000540
000541     dcl-ds listValue likeds(LVARPUCHAR_t);                                                                           000541
000542                                                                                                                      000542
000543     if (headerName = *blank);                                                                        B01             000543
000544       return;                                                                                         01             000544
000545     endif;                                                                                           E01             000545
000546                                                                                                                      000546
000547     addHeader(client.headerList : headerName : headerValue);                                                         000547
000548 end-proc;                                                                                                            000548
000549                                                                                                                      000549
000550                                                                                                                      000550
000551 dcl-proc iv_addHeaders export;                                                                                       000551
000552     dcl-pi *n;                                                                                                       000552
000553         pClient pointer value;                                                                                       000553
000554         headers pointer value;                                                                                       000554
000555     end-pi;                                                                                                          000555
000556                                                                                                                      000556
000557     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000557
000558     dcl-ds iterator likeds(SLISTITERATOR_t);                                                                         000558
000559     dcl-ds node likeds(SLISTNODE_t) based(iterator.pThis);                                                           000559
000560     dcl-ds nodePayload likeds(SLISTKEYVAL_t) based(node.payloadData);                                                000560
000561     dcl-s headerName varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8);                                                      000561
000562     dcl-s headerValue varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8);                                                    000562
000563                                                                                                                      000563
000564     iterator = sList_setIterator(headers);                                                                           000564
000565     dow (sList_foreach(iterator));                                                                   B01             000565
000566         headerName = %str(nodePayload.key.string : nodePayload.key.length);                           01             000566
000567         headerValue = %str(nodePayload.value.string : nodePayload.value.length);                      01             000567
000568         addHeader(client.headerList : headerName : headerValue);                                      01             000568
000569     enddo;                                                                                           E01             000569
000570 end-proc;                                                                                                            000570
000571                                                                                                                      000571
000572                                                                                                                      000572
000573 dcl-proc iv_get export;                                                                                              000573
000574     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000574
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     57
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000575         url varchar(IV_URL_SIZE:2) value;                                                                            000575
000576         acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                           000576
000577         headers pointer value options(*nopass);                                                                      000577
000578     end-pi;                                                                                                          000578
000579                                                                                                                      000579
000580     dcl-s client pointer;                                                                                            000580
000581     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000581
000582     dcl-s rc ind inz(*off);                                                                                          000582
000583                                                                                                                      000583
000584     client = iv_newHttpClient();                                                                                     000584
000585                                                                                                                      000585
000586     iv_setResponseDataBuffer(                                                                                        000586
000587         client :                                                                                                     000587
000588         %addr(returnBuffer) :                                                                                        000588
000589         IV_BUFFER_SIZE :                                                                                             000589
000590         IV_VARCHAR4 :                                                                                                000590
000591         IV_CCSID_UTF8                                                                                                000591
000592     );                                                                                                               000592
000593                                                                                                                      000593
000594     if (%parms() >= 3);                                                                              B01             000594
000595         iv_addHeader(client : 'Accept' : acceptMimeType);                                             01             000595
000596     endif;                                                                                           E01             000596
000597                                                                                                                      000597
000598     if (%parms() >= 4);                                                                              B01             000598
000599         iv_addHeaders(client : headers);                                                              01             000599
000600     endif;                                                                                           E01             000600
000601                                                                                                                      000601
000602     rc = iv_execute(client : 'GET' : url);                                                                           000602
000603                                                                                                                      000603
000604     if (not isSuccessfulRequest(client));                                                            B01             000604
000605         sendStatusCodeEscapeMessage(client : returnBuffer);                                           01             000605
000606     endif;                                                                                           E01             000606
000607                                                                                                                      000607
000608     return returnBuffer;                                                                                             000608
000609                                                                                                                      000609
000610 on-exit;                                                                                                             000610
000611     iv_free(client);                                                                                                 000611
000612 end-proc;                                                                                                            000612
000613                                                                                                                      000613
000614                                                                                                                      000614
000615 dcl-proc sendStatusCodeEscapeMessage;                                                                                000615
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     58
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000616     dcl-pi *n;                                                                                                       000616
000617         client pointer value;                                                                                        000617
000618         returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                          000618
000619     end-pi;                                                                                                          000619
000620                                                                                                                      000620
000621     sendStatusCodeMessage(client : returnBuffer : '*ESCAPE');                                                        000621
000622 end-proc;                                                                                                            000622
000623                                                                                                                      000623
000624                                                                                                                      000624
000625 dcl-proc sendStatusCodeInfoMessage;                                                                                  000625
000626     dcl-pi *n;                                                                                                       000626
000627         client pointer value;                                                                                        000627
000628         returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                          000628
000629     end-pi;                                                                                                          000629
000630                                                                                                                      000630
000631     sendStatusCodeMessage(client : returnBuffer : '*INFO');                                                          000631
000632 end-proc;                                                                                                            000632
000633                                                                                                                      000633
000634                                                                                                                      000634
000635 dcl-proc sendStatusCodeMessage;                                                                                      000635
000636     dcl-pi *n;                                                                                                       000636
000637         client pointer value;                                                                                        000637
000638         returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                          000638
000639         messageType char(10) value;                                                                                  000639
000640     end-pi;                                                                                                          000640
000641                                                                                                                      000641
000642     dcl-s status int(5);                                                                                             000642
000643     dcl-s messageFile char(20) inz('ILEVATOR  *LIBL');                                                               000643
000644     dcl-s messageId char(7);                                                                                         000644
000645     dcl-s messageBody varchar(1000);                                                                                 000645
000646                                                                                                                      000646
000647     status = iv_getStatus(client);                                                                                   000647
000648                                                                                                                      000648
000649     if (%lookup(status : listedHttpStatusCodes) > 0);                                                B01             000649
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     59
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000650         messageId = 'ILV0' + %char(status);                                                           01             000650
000651                                                                                                                      000651
000652         monitor;                                                                                     B02             000652
000653             messageBody = returnBuffer;                                                               02             000653
000654         on-error;                                                                                    X02             000654
000655             messageBody = 'The message body contains not convertible characters.';                    02             000655
000656         endmon;                                                                                      E02             000656
000657     else;                                                                                            X01             000657
000658         messageId = 'ILV0999';                                                                        01             000658
000659         messageBody = 'Unsupported HTTP status code ' + %char(status);                                01             000659
000660     endif;                                                                                           E01             000660
000661                                                                                                                      000661
000662     message_sendPastControlBoundary(messageId : messageFile : messageType : messageBody);                            000662
000663 end-proc;                                                                                                            000663
000664                                                                                                                      000664
000665                                                                                                                      000665
000666 dcl-proc isSuccessfulRequest;                                                                                        000666
000667     dcl-pi *n ind;                                                                                                   000667
000668         client pointer value;                                                                                        000668
000669     end-pi;                                                                                                          000669
000670                                                                                                                      000670
000671     dcl-s status int(5);                                                                                             000671
000672                                                                                                                      000672
000673     status = iv_getStatus(client);                                                                                   000673
000674                                                                                                                      000674
000675     return status < 400;                                                                                             000675
000676 end-proc;                                                                                                            000676
000677                                                                                                                      000677
000678                                                                                                                      000678
000679 dcl-proc sendAndReceiveData export;                                                                                  000679
000680     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000680
000681         method pointer options(*string) value;                                                                       000681
000682         url varchar(IV_URL_SIZE:2) value;                                                                            000682
000683         messageBody varchar(IV_BUFFER_SIZE:4) value ccsid(1208);                                                     000683
000684         contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              000684
000685         headers pointer value options(*nopass);                                                                      000685
000686     end-pi;                                                                                                          000686
000687                                                                                                                      000687
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     60
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000688     dcl-s client pointer;                                                                                            000688
000689     dcl-ds clientDs likeds(ilevator_t) based(client);                                                                000689
000690     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000690
000691     dcl-s rc ind inz(*off);                                                                                          000691
000692     dcl-s messageBodyLength uns(10);                                                                                 000692
000693                                                                                                                      000693
000694     client = iv_newHttpClient();                                                                                     000694
000695                                                                                                                      000695
000696     iv_setResponseDataBuffer(                                                                                        000696
000697         client :                                                                                                     000697
000698         %addr(returnBuffer) :                                                                                        000698
000699         IV_BUFFER_SIZE :                                                                                             000699
000700         IV_VARCHAR4 :                                                                                                000700
000701         IV_CCSID_UTF8                                                                                                000701
000702     );                                                                                                               000702
000703                                                                                                                      000703
000704     messageBodyLength = %len(messageBody);                                                                           000704
000705     if (messageBodyLength > 0);                                                                      B01             000705
000706         iv_setRequestDataBuffer(                                                                      01             000706
000707             client :                                                                                  01             000707
000708             %addr(messageBody) :                                                                      01             000708
000709             messageBodyLength :                                                                       01             000709
000710             IV_VARCHAR4 :                                                                             01             000710
000711             IV_CCSID_UTF8                                                                             01             000711
000712         );                                                                                            01             000712
000713         clientDs.requestDataBuffer.length = messageBodyLength;                                        01             000713
000714     endif;                                                                                           E01             000714
000715                                                                                                                      000715
000716     if (%parms() >= 5);                                                                              B01             000716
000717         iv_addHeader(client : 'Content-Type' : contentType);                                          01             000717
000718     endif;                                                                                           E01             000718
000719                                                                                                                      000719
000720     if (%parms() >= 6);                                                                              B01             000720
000721         iv_addHeaders(client : headers);                                                              01             000721
000722     endif;                                                                                           E01             000722
000723                                                                                                                      000723
000724     rc = iv_execute(client : method : url);                                                                          000724
000725                                                                                                                      000725
000726     if (not isSuccessfulRequest(client));                                                            B01             000726
000727         sendStatusCodeEscapeMessage(client : returnBuffer);                                           01             000727
000728     endif;                                                                                           E01             000728
000729                                                                                                                      000729
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     61
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000730     return returnBuffer;                                                                                             000730
000731                                                                                                                      000731
000732     on-exit;                                                                                                         000732
000733         iv_free(client);                                                                                             000733
000734 end-proc;                                                                                                            000734
000735                                                                                                                      000735
000736                                                                                                                      000736
000737 dcl-proc iv_patch export;                                                                                            000737
000738     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000738
000739         url varchar(IV_URL_SIZE:2) value;                                                                            000739
000740         messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                     000740
000741         contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              000741
000742         headers pointer value options(*nopass);                                                                      000742
000743     end-pi;                                                                                                          000743
000744                                                                                                                      000744
000745     if (%parms() = 3);                                                                               B01             000745
000746         return sendAndReceiveData('PATCH' : url : messageBody);                                       01             000746
000747     elseif (%parms() = 4);                                                                           X01             000747
000748         return sendAndReceiveData('PATCH' : url : messageBody : contentType);                         01             000748
000749     elseif (%parms() = 5);                                                                           X01             000749
000750         return sendAndReceiveData('PATCH' : url : messageBody : contentType : headers);               01             000750
000751     endif;                                                                                           E01             000751
000752 end-proc;                                                                                                            000752
000753                                                                                                                      000753
000754                                                                                                                      000754
000755 dcl-proc iv_post export;                                                                                             000755
000756     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000756
000757         url varchar(IV_URL_SIZE:2) value;                                                                            000757
000758         messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                     000758
000759         contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              000759
000760         headers pointer value options(*nopass);                                                                      000760
000761     end-pi;                                                                                                          000761
000762                                                                                                                      000762
000763     if (%parms() = 3);                                                                               B01             000763
000764         return sendAndReceiveData('POST' : url : messageBody);                                        01             000764
000765     elseif (%parms() = 4);                                                                           X01             000765
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     62
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000766         return sendAndReceiveData('POST' : url : messageBody : contentType);                          01             000766
000767     elseif (%parms() = 5);                                                                           X01             000767
000768         return sendAndReceiveData('POST' : url : messageBody : contentType : headers);                01             000768
000769     endif;                                                                                           E01             000769
000770 end-proc;                                                                                                            000770
000771                                                                                                                      000771
000772                                                                                                                      000772
000773 dcl-proc iv_postForm export;                                                                                         000773
000774     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000774
000775         url varchar(IV_URL_SIZE:2) value;                                                                            000775
000776         formData likeds(iv_lvarpuchar_t);                                                                            000776
000777         headers pointer value options(*nopass);                                                                      000777
000778     end-pi;                                                                                                          000778
000779                                                                                                                      000779
000780     dcl-s client pointer;                                                                                            000780
000781     dcl-ds clientDs likeds(ilevator_t) based(client);                                                                000781
000782     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000782
000783     dcl-s rc ind inz(*off);                                                                                          000783
000784                                                                                                                      000784
000785     client = iv_newHttpClient();                                                                                     000785
000786                                                                                                                      000786
000787     iv_setResponseDataBuffer(                                                                                        000787
000788         client :                                                                                                     000788
000789         %addr(returnBuffer) :                                                                                        000789
000790         IV_BUFFER_SIZE :                                                                                             000790
000791         IV_VARCHAR4 :                                                                                                000791
000792         IV_CCSID_UTF8                                                                                                000792
000793     );                                                                                                               000793
000794                                                                                                                      000794
000795     if (formData.length > 0);                                                                        B01             000795
000796         iv_setRequestDataBuffer(                                                                      01             000796
000797             client :                                                                                  01             000797
000798             formData.string :                                                                         01             000798
000799             formData.length :                                                                         01             000799
000800             IV_BYTES :                                                                                01             000800
000801             0                                                                                         01             000801
000802         );                                                                                            01             000802
000803         clientDs.requestDataBuffer.length = formData.length;                                          01             000803
000804     endif;                                                                                           E01             000804
000805                                                                                                                      000805
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     63
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000806     iv_addHeader(client : 'Content-Type' : 'application/x-www-form-urlencoded');                                     000806
000807                                                                                                                      000807
000808     if (%parms() >= 4);                                                                              B01             000808
000809         iv_addHeaders(client : headers);                                                              01             000809
000810     endif;                                                                                           E01             000810
000811                                                                                                                      000811
000812     rc = iv_execute(client : 'POST' : url);                                                                          000812
000813                                                                                                                      000813
000814     if (not isSuccessfulRequest(client));                                                            B01             000814
000815         sendStatusCodeEscapeMessage(client : returnBuffer);                                           01             000815
000816     endif;                                                                                           E01             000816
000817                                                                                                                      000817
000818     return returnBuffer;                                                                                             000818
000819                                                                                                                      000819
000820     on-exit;                                                                                                         000820
000821         iv_free(client);                                                                                             000821
000822 end-proc;                                                                                                            000822
000823                                                                                                                      000823
000824                                                                                                                      000824
000825 dcl-proc iv_put export;                                                                                              000825
000826     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000826
000827         url varchar(IV_URL_SIZE:2) value;                                                                            000827
000828         messageBody varchar(IV_BUFFER_SIZE:4) const ccsid(1208);                                                     000828
000829         contentType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              000829
000830         headers pointer value options(*nopass);                                                                      000830
000831     end-pi;                                                                                                          000831
000832                                                                                                                      000832
000833     if (%parms() = 3);                                                                               B01             000833
000834         return sendAndReceiveData('PUT' : url : messageBody);                                         01             000834
000835     elseif (%parms() = 4);                                                                           X01             000835
000836         return sendAndReceiveData('PUT' : url : messageBody : contentType);                           01             000836
000837     elseif (%parms() = 5);                                                                           X01             000837
000838         return sendAndReceiveData('PUT' : url : messageBody : contentType : headers);                 01             000838
000839     endif;                                                                                           E01             000839
000840 end-proc;                                                                                                            000840
000841                                                                                                                      000841
000842                                                                                                                      000842
000843 dcl-proc iv_setTimeout export;                                                                                       000843
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     64
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000844     dcl-pi *n;                                                                                                       000844
000845         pClient pointer value;                                                                                       000845
000846         timeout packed(9:3) value;                                                                                   000846
000847     end-pi;                                                                                                          000847
000848                                                                                                                      000848
000849     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000849
000850                                                                                                                      000850
000851     client.timeout = timeout;                                                                                        000851
000852 end-proc;                                                                                                            000852
000853                                                                                                                      000853
000854                                                                                                                      000854
000855 dcl-proc iv_setRetries export;                                                                                       000855
000856     dcl-pi *n;                                                                                                       000856
000857         pClient pointer value;                                                                                       000857
000858         retries int(5) value;                                                                                        000858
000859     end-pi;                                                                                                          000859
000860                                                                                                                      000860
000861     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000861
000862                                                                                                                      000862
000863     client.retries = retries;                                                                                        000863
000864 end-proc;                                                                                                            000864
000865                                                                                                                      000865
000866                                                                                                                      000866
000867 dcl-proc iv_delete export;                                                                                           000867
000868     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000868
000869         url varchar(IV_URL_SIZE:2) value;                                                                            000869
000870         headers pointer value options(*nopass);                                                                      000870
000871     end-pi;                                                                                                          000871
000872                                                                                                                      000872
000873     dcl-s client pointer;                                                                                            000873
000874     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000874
000875     dcl-s rc ind inz(*off);                                                                                          000875
000876                                                                                                                      000876
000877     client = iv_newHttpClient();                                                                                     000877
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     65
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000878                                                                                                                      000878
000879     iv_setResponseDataBuffer(                                                                                        000879
000880         client :                                                                                                     000880
000881         %addr(returnBuffer) :                                                                                        000881
000882         IV_BUFFER_SIZE :                                                                                             000882
000883         IV_VARCHAR4 :                                                                                                000883
000884         IV_CCSID_UTF8                                                                                                000884
000885     );                                                                                                               000885
000886                                                                                                                      000886
000887     if (%parms() >= 3);                                                                              B01             000887
000888         iv_addHeaders(client : headers);                                                              01             000888
000889     endif;                                                                                           E01             000889
000890                                                                                                                      000890
000891     rc = iv_execute(client : 'DELETE' : url);                                                                        000891
000892                                                                                                                      000892
000893     if (not isSuccessfulRequest(client));                                                            B01             000893
000894         sendStatusCodeEscapeMessage(client : returnBuffer);                                           01             000894
000895     endif;                                                                                           E01             000895
000896                                                                                                                      000896
000897     return returnBuffer;                                                                                             000897
000898                                                                                                                      000898
000899 on-exit;                                                                                                             000899
000900     iv_free(client);                                                                                                 000900
000901 end-proc;                                                                                                            000901
000902                                                                                                                      000902
000903                                                                                                                      000903
000904 dcl-proc iv_head export;                                                                                             000904
000905     dcl-pi *n ind;                                                                                                   000905
000906         url varchar(IV_URL_SIZE:2) value;                                                                            000906
000907         headers pointer value options(*nopass);                                                                      000907
000908     end-pi;                                                                                                          000908
000909                                                                                                                      000909
000910     dcl-s client pointer;                                                                                            000910
000911     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000911
000912     dcl-s rc ind inz(*off);                                                                                          000912
000913                                                                                                                      000913
000914     client = iv_newHttpClient();                                                                                     000914
000915                                                                                                                      000915
000916     iv_setResponseDataBuffer(                                                                                        000916
000917         client :                                                                                                     000917
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     66
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000918         %addr(returnBuffer) :                                                                                        000918
000919         IV_BUFFER_SIZE :                                                                                             000919
000920         IV_VARCHAR4 :                                                                                                000920
000921         IV_CCSID_UTF8                                                                                                000921
000922     );                                                                                                               000922
000923                                                                                                                      000923
000924     if (%parms() >= 2);                                                                              B01             000924
000925         iv_addHeaders(client : headers);                                                              01             000925
000926     endif;                                                                                           E01             000926
000927                                                                                                                      000927
000928     rc = iv_execute(client : 'HEAD' : url);                                                                          000928
000929                                                                                                                      000929
000930     if (not isSuccessfulRequest(client));                                                            B01             000930
000931         sendStatusCodeInfoMessage(client : returnBuffer);                                             01             000931
000932     endif;                                                                                           E01             000932
000933                                                                                                                      000933
000934     return rc and isSuccessfulRequest(client);                                                                       000934
000935 on-exit;                                                                                                             000935
000936     iv_free(client);                                                                                                 000936
000937 end-proc;                                                                                                            000937
000938                                                                                                                      000938
000939                                                                                                                      000939
000940 dcl-proc iv_options export;                                                                                          000940
000941     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000941
000942         url varchar(IV_URL_SIZE:2) value;                                                                            000942
000943         acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                           000943
000944         headers pointer value options(*nopass);                                                                      000944
000945     end-pi;                                                                                                          000945
000946                                                                                                                      000946
000947     dcl-s client pointer;                                                                                            000947
000948     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000948
000949     dcl-s rc ind inz(*off);                                                                                          000949
000950                                                                                                                      000950
000951     client = iv_newHttpClient();                                                                                     000951
000952                                                                                                                      000952
000953     iv_setResponseDataBuffer(                                                                                        000953
000954         client :                                                                                                     000954
000955         %addr(returnBuffer) :                                                                                        000955
000956         IV_BUFFER_SIZE :                                                                                             000956
000957         IV_VARCHAR4 :                                                                                                000957
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     67
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000958         IV_CCSID_UTF8                                                                                                000958
000959     );                                                                                                               000959
000960                                                                                                                      000960
000961     if (%parms() >= 3);                                                                              B01             000961
000962         iv_addHeader(client : 'Accept' : acceptMimeType);                                             01             000962
000963     endif;                                                                                           E01             000963
000964                                                                                                                      000964
000965     if (%parms() >= 4);                                                                              B01             000965
000966         iv_addHeaders(client : headers);                                                              01             000966
000967     endif;                                                                                           E01             000967
000968                                                                                                                      000968
000969     rc = iv_execute(client : 'OPTIONS' : url);                                                                       000969
000970                                                                                                                      000970
000971     if (not isSuccessfulRequest(client));                                                            B01             000971
000972         sendStatusCodeEscapeMessage(client : returnBuffer);                                           01             000972
000973     endif;                                                                                           E01             000973
000974                                                                                                                      000974
000975     return returnBuffer;                                                                                             000975
000976                                                                                                                      000976
000977 on-exit;                                                                                                             000977
000978     iv_free(client);                                                                                                 000978
000979 end-proc;                                                                                                            000979
000980                                                                                                                      000980
000981                                                                                                                      000981
000982 dcl-proc iv_buildList export;                                                                                        000982
000983     dcl-pi *n pointer;                                                                                               000983
000984         key1 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                       000984
000985         value1 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                    000985
000986         key2 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                       000986
000987         value2 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                    000987
000988         key3 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                       000988
000989         value3 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                    000989
000990         key4 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                       000990
000991         value4 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                    000991
000992         key5 varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const options(*nopass);                                       000992
000993         value5 varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const options(*nopass);                                    000993
000994     end-pi;                                                                                                          000994
000995                                                                                                                      000995
000996     dcl-s list pointer;                                                                                              000996
000997                                                                                                                      000997
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     68
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
000998     list = sList_new();                                                                                              000998
000999                                                                                                                      000999
001000     if (%parms() >= 2);                                                                              B01             001000
001001        addHeader(list : key1 : value1);                                                               01             001001
001002     endif;                                                                                           E01             001002
001003     if (%parms() >= 4);                                                                              B01             001003
001004        addHeader(list : key2 : value2);                                                               01             001004
001005     endif;                                                                                           E01             001005
001006     if (%parms() >= 6);                                                                              B01             001006
001007        addHeader(list : key3 : value3);                                                               01             001007
001008     endif;                                                                                           E01             001008
001009     if (%parms() >= 8);                                                                              B01             001009
001010        addHeader(list : key4 : value4);                                                               01             001010
001011     endif;                                                                                           E01             001011
001012     if (%parms() >= 10);                                                                             B01             001012
001013        addHeader(list : key5 : value5);                                                               01             001013
001014     endif;                                                                                           E01             001014
001015                                                                                                                      001015
001016     return list;                                                                                                     001016
001017 end-proc;                                                                                                            001017
001018                                                                                                                      001018
001019                                                                                                                      001019
001020 dcl-proc iv_addHeaderToList export;                                                                                  001020
001021     dcl-pi *n;                                                                                                       001021
001022         list pointer value;                                                                                          001022
001023         headerKey varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8) const;                                                   001023
001024         headerValue varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8) const;                                                001024
001025     end-pi;                                                                                                          001025
001026                                                                                                                      001026
001027     addHeader(list : headerKey : headerValue);                                                                       001027
001028 end-proc;                                                                                                            001028
001029                                                                                                                      001029
001030                                                                                                                      001030
001031 dcl-proc iv_addEntryToList export;                                                                                   001031
001032     dcl-pi *n;                                                                                                       001032
001033         list pointer value;                                                                                          001033
001034         key pointer value options(*string);                                                                          001034
001035         value pointer value options(*string);                                                                        001035
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     69
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
001036     end-pi;                                                                                                          001036
001037                                                                                                                      001037
001038     dcl-ds listKey likeds(LVARPUCHAR_t);                                                                             001038
001039     dcl-ds listValue likeds(LVARPUCHAR_t);                                                                           001039
001040                                                                                                                      001040
001041     if (strlen(key) = 0);                                                                            B01             001041
001042       return;                                                                                         01             001042
001043     endif;                                                                                           E01             001043
001044                                                                                                                      001044
001045     listKey.length = strlen(key);                                                                                    001045
001046     listKey.string = teraspace_alloc(listKey.length + 1);                                                            001046
001047     memcpy(listKey.string : key : listKey.length + 1);                                                               001047
001048                                                                                                                      001048
001049     listValue.length = strlen(value);                                                                                001049
001050     listValue.string = teraspace_alloc(listValue.length + 1);                                                        001050
001051     memcpy(listValue.string : value : listValue.length + 1);                                                         001051
001052                                                                                                                      001052
001053     sList_pushLVPC(list : listKey : listValue);                                                                      001053
001054 end-proc;                                                                                                            001054
001055                                                                                                                      001055
001056                                                                                                                      001056
001057 dcl-proc loadConfigFromEnvVar;                                                                                       001057
001058     dcl-pi *n;                                                                                                       001058
001059         client pointer const;                                                                                        001059
001060     end-pi;                                                                                                          001060
001061                                                                                                                      001061
001062     dcl-pr getenv pointer extproc('getenv');                                                                         001062
001063         *n pointer value options(*string : *trim);                                                                   001063
001064     end-pr;                                                                                                          001064
001065                                                                                                                      001065
001066     dcl-s certValue pointer;                                                                                         001066
001067     dcl-s passValue pointer;                                                                                         001067
001068                                                                                                                      001068
001069     certValue = getenv('ILEVATOR_CERTIFICATE');                                                                      001069
001070     passValue = getenv('ILEVATOR_CERTIFICATE_PASSWORD');                                                             001070
001071                                                                                                                      001071
001072     if (certValue <> *null and passValue <> *null);                                                  B01             001072
001073         iv_setCertificate(client : certValue : passValue);                                            01             001073
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     70
Seq    <---------------------- Source Specifications ----------------------------------------------------->  Do  Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10  Num Date   Number
001074     elseif (certValue <> *null);                                                                     X01             001074
001075         iv_setCertificate(client : certValue);                                                        01             001075
001076     endif;                                                                                           E01             001076
001077 end-proc;                                                                                                            001077
001078                                                                                                                      001078
001079                                                                                                                      001079
001080 dcl-proc iv_setRequestHandler export;                                                                                001080
001081     dcl-pi *n;                                                                                                       001081
001082         p_client pointer value;                                                                                      001082
001083         handler pointer value;                                                                                       001083
001084     end-pi;                                                                                                          001084
001085                                                                                                                      001085
001086     dcl-ds client likeds(ilevator_t) based(p_client);                                                                001086
001087                                                                                                                      001087
001088     client.requestHandler = handler;                                                                                 001088
001089 end-proc;                                                                                                            001089
001090                                                                                                                      001090
001091                                                                                                                      001091
       * * * * *   E N D   O F   S O U R C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     71
          A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
 Msg id  Sv   Statement    Message text
*RNF5409 00        000241  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000359  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000408  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000409  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000527  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        001047  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        001051  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        001053  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        001073  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        001075  The prototyped call returns a value which is lost when
                           CALLP is used.
 * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                            / C o p y   M e m b e r s
Statement  Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
Number     Id              Library    File       Member            Date     Time
    000005    1 api.rpginc headers/api.rpginc                1252  29-11-23 12:18:13
    000006    2 anychar.r+ headers/anychar.rpginc            1252  23-05-23 11:26:42
    000007    3 chunked.r+ headers/chunked.rpginc            1252  23-05-23 11:26:42
    000008    4 debug.rpg+ headers/debug.rpginc              1252  23-05-23 11:26:42
    000009    5 httpclien+ headers/httpclient.rpginc         1252  23-05-23 11:26:43
    000010    6 libc.rpgi+ ext/headers/libc.rpginc           1252  23-05-23 11:26:39
   6000003    7 QUSEC      QSYSINC    QRPGLESRC  QUSEC         37  17-02-19 10:02:41
    000011    8 message.r+ ext/headers/message.rpginc        1252  19-06-23 16:31:36
    000012    9 simpleLis+ ext/headers/simpleList.rpginc     1252  23-05-23 11:26:39
   9000006   10 varchar.r+ ext/headers/varchar.rpginc        1252  23-05-23 11:26:40
    000013   11 sockets.r+ headers/sockets.rpginc            1252  29-11-23 16:48:42
    000014   12 teraspace+ ext/headers/teraspace.rpginc      1252  23-05-23 11:26:40
         * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     72
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     73
Seq    <---------------------- Data Records -------------------------------------------------------------->      Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10      Date   Number
                       C o m p i l e   T i m e   D a t a
001092 **CTDATA listedHttpStatusCodes                                                                                       001092
        *--------------------------------------------------------------------*
        * Array . . . : LISTEDHTTPSTATUSCODES                                *
        *--------------------------------------------------------------------*
001093   400                                                                                                                001093
001094   401                                                                                                                001094
001095   402                                                                                                                001095
001096   403                                                                                                                001096
001097   404                                                                                                                001097
001098   405                                                                                                                001098
001099   406                                                                                                                001099
001100   407                                                                                                                001100
001101   408                                                                                                                001101
001102   409                                                                                                                001102
001103   410                                                                                                                001103
001104   411                                                                                                                001104
001105   412                                                                                                                001105
001106   413                                                                                                                001106
001107   414                                                                                                                001107
001108   415                                                                                                                001108
001109   416                                                                                                                001109
001110   417                                                                                                                001110
001111   418                                                                                                                001111
001112   421                                                                                                                001112
001113   422                                                                                                                001113
001114   423                                                                                                                001114
001115   424                                                                                                                001115
001116   425                                                                                                                001116
001117   426                                                                                                                001117
001118   428                                                                                                                001118
001119   429                                                                                                                001119
001120   431                                                                                                                001120
001121   451                                                                                                                001121
001122   500                                                                                                                001122
001123   501                                                                                                                001123
001124   502                                                                                                                001124
001125   503                                                                                                                001125
001126   504                                                                                                                001126
001127   505                                                                                                                001127
001128   506                                                                                                                001128
001129   507                                                                                                                001129
001130   508                                                                                                                001130
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     74
Seq    <---------------------- Data Records -------------------------------------------------------------->      Change Statement
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10      Date   Number
001131   510                                                                                                                001131
001132   511                                                                                                                001132
001133   999                                                                                                                001133
    * * * * *   E N D   O F   C O M P I L E   T I M E   D A T A   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     75
                          C r o s s   R e f e r e n c e
      File and Record References:
         File              Device             References (D=Defined)
           Record
         No references in the source.
      Global Field References:
         Field             Attributes         References (D=Defined M=Modified)
         ACCESS            I(10,0)                000030D     000437
                           PROTOTYPE
         ADDHEADER         PROTOTYPE              000501      000547M     000568M     001001M
                                                  001004M     001007M     001010M     001013M
                                                  001027M
         ANYCHAR_T         DS(32)                1000022     1000023     1000024     2000007D
                           TEMPLATE
*RNF7031   CCSID           I(10,0)               2000012D
*RNF7031   DATA            *(16)                 2000008D
*RNF7031   LENGTH          U(10,0)               2000010D
*RNF7031   SIZE            U(10,0)               2000009D
*RNF7031   TYPE            I(10,0)               2000011D
*RNF7031 ATOI              I(10,0)               6000203D
                           PROTOTYPE
*RNF7031 BSEARCH           *(16)                 6000137D
                           PROTOTYPE
*RNF7031 CEILING           F(8)                  6000108D
                           PROTOTYPE
         CONNECT_USING_PROXY_TUNNEL...
                           N(1)                   000292      000366
                           PROTOTYPE
*RNF7031 CONVERTCASE       PROTOTYPE             6000069D
         DEFAULT_RETRIES   CONST                  000058D     000084
         DEFAULT_TIMEOUT   CONST                  000057D     000083
         ENUM              I(3,0)                 000050D     000274      000372
                           TEMPLATE
         ERRNO             *(16)                 6000147D     000245      000438
                           PROTOTYPE
*RNF7031 F_DUPFD           CONST                 6000159D
*RNF7031 F_GETFL           CONST                 6000160D
*RNF7031 F_GETOWN          CONST                 6000162D
*RNF7031 F_OK              CONST                  000045D
*RNF7031 F_SETFL           CONST                 6000161D
*RNF7031 F_SETOWN          CONST                 6000163D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     76
*RNF7031 FALSE             CONST                  000051D
*RNF7031 FASYNC            CONST                 6000170D
         FCLOSE            I(10,0)                000022D     000359M
                           PROTOTYPE
*RNF7031 FCNTL             I(10,0)               6000197D
                           PROTOTYPE
*RNF7031 FLOOR             F(8)                  6000111D
                           PROTOTYPE
*RNF7031 FNDELAY           CONST                 6000169D
         FOPEN             *(16)                  000017D     000243
                           PROTOTYPE
         ILEVATOR_T        DS(35200)             1000010D     000070      000072      000109
                           TEMPLATE               000157      000178      000199      000216
                                                  000217      000231      000257      000271
                                                  000369      000376      000433      000469
                                                  000479      000491      000538      000557
                                                  000689      000781      000849      000861
                                                  001086
*RNF7031   AUTHPROVIDER    *(16)                 1000026D
*RNF7031   BUFFER          *(16)                 1000047D
*RNF7031   BUFFEREND       *(16)                 1000050D
*RNF7031   BUFFERSIZE      I(10,0)               1000048D
*RNF7031   BUFFERTOTALLENGTH...
                           I(10,0)               1000049D
*RNF7031   CCSID           I(10,0)               1000035D
*RNF7031   CONTENTDATA     *(16)                 1000030D
*RNF7031   CONTENTLENGTH   I(10,0)               1000031D
*RNF7031   CONTENTLENGTHCALCULATED...
                           I(10,0)               1000032D
*RNF7031   HEADERLEN       I(10,0)               1000029D
*RNF7031   HEADERLIST      *(16)                 1000019D
*RNF7031   HOST            A(512)                1000041D
*RNF7031   LOCATION        A(256)                1000044D
*RNF7031   MESSAGE         A(256)                1000045D
*RNF7031   METHOD          *(16)                 1000012D
*RNF7031   PASSWORD        A(256)                1000043D
*RNF7031   PORT            I(10,0)               1000039D
*RNF7031   PROXYTUNNEL     *(16)                 1000051D
*RNF7031   RAWRESPONSE     *(16)                 1000034D
*RNF7031   REQUESTDATABUFFER...
                           DS(32)                1000022D
*RNF7031   REQUESTHANDLER  *(16)                 1000027D
*RNF7031   REQUESTHEADERLIST...
                           *(16)                 1000020D
*RNF7031   RESOURCE        A(32766)              1000040D
*RNF7031   RESPONSEDATABUFFER...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     77
                           DS(32)                1000024D
*RNF7031   RESPONSEDATAFILE...
                           *(16)                 1000025D
*RNF7031   RESPONSEHEADERBUFFER...
                           DS(32)                1000023D
*RNF7031   RESPONSEHEADERHASCONTENTLENGTH...
                           N(1)                  1000017D
*RNF7031   RESPONSEISCHUNKED...
                           N(1)                  1000018D
*RNF7031   RETRIES         I(5,0)                1000015D
*RNF7031   SERVER          A(512)                1000038D
*RNF7031   SOCKETS         *(16)                 1000011D
*RNF7031   STATUS          I(10,0)               1000036D
*RNF7031   TIMEOUT         P(9,3)                1000014D
*RNF7031   URL             *(16)                 1000013D
*RNF7031   USEPROXY        N(1)                  1000016D
*RNF7031   USER            A(256)                1000042D
         ILEVATOR_VERSION  CONST                  000064D     000096
         ISSUCCESSFULREQUEST...
                           N(1)                   000604      000666      000726      000814
                           PROTOTYPE              000893      000930      000934      000971
         IV_ADDENTRYTOLIST PROTOTYPE             1000992D     001031
         IV_ADDHEADER      PROTOTYPE             1000868D     000096M     000531      000595M
                                                  000717M     000806M     000962M
         IV_ADDHEADERS     PROTOTYPE             1000886D     000551      000599M     000721M
                                                  000809M     000888M     000925M     000966M
         IV_ADDHEADERTOLIST...
                           PROTOTYPE             1000976D     001020
*RNF7031 IV_ANYCHAR_APPEND PROTOTYPE             2000024D
         IV_ANYCHAR_FINALIZE...
                           PROTOTYPE             2000030D     000355M     000356M
         IV_ANYCHAR_SET    PROTOTYPE             2000016D     000159M     000180M     000201M
         IV_BUFFER_SIZE    CONST                 1000096D    1000710     1000728     1000763
                                                 1000783     1000785     1000804     1000806
                                                 1000828     1000848     1000850      000078
                                                  000079      000574      000581      000589
                                                  000618      000628      000638      000680
                                                  000683      000690      000699      000738
                                                  000740      000756      000758      000774
                                                  000782      000790      000826      000828
                                                  000868      000874      000882      000911
                                                  000919      000941      000948      000956
         IV_BUILDLIST      *(16)                 1000939D     000982
                           PROTOTYPE
         IV_BYTES          CONST                 1000075D     000800
*RNF7031 IV_CCSID_BINARY   CONST                 1000450D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     78
*RNF7031 IV_CCSID_JOB      CONST                 1000438D
         IV_CCSID_UTF8     CONST                 1000442D     000591      000701      000711
                                                  000792      000884      000921      000958
*RNF7031 IV_CCSID_WIN1252  CONST                 1000446D
         IV_CHUNKED_RECEIVE...
                           I(10,0)               3000009D     000338
                           PROTOTYPE
         IV_DEBUG          PROTOTYPE             4000012D     000286M     000287M     000288M
                                                  000289M     000330M     000404M     000457M
                                                  000458M
*RNF7031 IV_DEBUG_INIT     I(10,0)               4000010D
                           PROTOTYPE
*RNF7031 IV_DECODEBASE64   A(2097152)            1000619D
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_DELETE         A(1048576)            1000728D     000867
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
*RNF7031 IV_ENCODEBASE64   A(2097152)            1000633D
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_EXECUTE        N(1)                  1000548D     000263      000602      000724
                           PROTOTYPE              000812      000891      000928      000969
         IV_FREE           PROTOTYPE             1000431D     000104      000123M     000611M
                                                  000733M     000821M     000900M     000936M
                                                  000978M
         IV_FREELIST       PROTOTYPE             1000960D     000115M     000128
         IV_GET            A(1048576)            1000710D     000573
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_GETERRORMESSAGE...
                           A(256)                1000592D     000474
                           VARYING(2)
                           PROTOTYPE
         IV_GETSTATUS      I(5,0)                1000580D     000464      000647      000673
                           PROTOTYPE
         IV_HEAD           N(1)                  1000745D     000904
                           PROTOTYPE
         IV_HEADER_NAME_SIZE...
                           CONST                 1000100D    1000870     1000940     1000942
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     79
                                                 1000944     1000946     1000948     1000978
                                                  000504      000508      000534      000539
                                                  000561      000984      000986      000988
                                                  000990      000992      001023
         IV_HEADER_VALUE_SIZE...
                           CONST                 1000104D    1000712     1000765     1000786
                                                 1000807     1000851     1000871     1000941
                                                 1000943     1000945     1000947     1000949
                                                 1000979      000505      000535      000562
                                                  000576      000684      000741      000759
                                                  000829      000943      000985      000987
                                                  000989      000991      000993      001024
*RNF7031 IV_HTTP           CONST                 1000109D
*RNF7031 IV_HTTP_ACCEPTED  CONST                 1000138D
*RNF7031 IV_HTTP_ALREADY_REPORTED...
                           CONST                 1000169D
*RNF7031 IV_HTTP_BAD_GATEWAY...
                           CONST                 1000349D
*RNF7031 IV_HTTP_BAD_REQUEST...
                           CONST                 1000179D
*RNF7031 IV_HTTP_CONFLICT  CONST                 1000236D
*RNF7031 IV_HTTP_CREATED   CONST                 1000131D
*RNF7031 IV_HTTP_EXPECTATION_FAILED...
                           CONST                 1000278D
*RNF7031 IV_HTTP_FAILED_DEPENDENCY...
                           CONST                 1000300D
*RNF7031 IV_HTTP_FORBIDDEN CONST                 1000197D
*RNF7031 IV_HTTP_GATEWAY_TIMEOUT...
                           CONST                 1000365D
*RNF7031 IV_HTTP_GONE      CONST                 1000244D
*RNF7031 IV_HTTP_IM_USED   CONST                 1000175D
*RNF7031 IV_HTTP_INSUFFICIENT_STORAGE...
                           CONST                 1000380D
*RNF7031 IV_HTTP_INTERNAL_SERVER_ERROR...
                           CONST                 1000338D
*RNF7031 IV_HTTP_LENGTH_REQUIRED...
                           CONST                 1000249D
*RNF7031 IV_HTTP_LOCKED    CONST                 1000296D
*RNF7031 IV_HTTP_LOOP_DETECTED...
                           CONST                 1000384D
*RNF7031 IV_HTTP_METHOD_NOT_ALLOWED...
                           CONST                 1000213D
*RNF7031 IV_HTTP_MISDIRECTED_REQUEST...
                           CONST                 1000288D
*RNF7031 IV_HTTP_MULTI_STATUS...
                           CONST                 1000164D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     80
*RNF7031 IV_HTTP_NETWORK_AUTH_REQUIRED...
                           CONST                 1000393D
*RNF7031 IV_HTTP_NO_CONTENT...
                           CONST                 1000150D
*RNF7031 IV_HTTP_NON_AUTHORITIVE_INFO...
                           CONST                 1000145D
*RNF7031 IV_HTTP_NOT_ACCEPTABLE...
                           CONST                 1000219D
*RNF7031 IV_HTTP_NOT_EXTENDED...
                           CONST                 1000388D
*RNF7031 IV_HTTP_NOT_FOUND CONST                 1000206D
*RNF7031 IV_HTTP_NOT_IMPLEMENTED...
                           CONST                 1000344D
*RNF7031 IV_HTTP_OK        CONST                 1000126D
*RNF7031 IV_HTTP_PARTIAL_CONTENT...
                           CONST                 1000159D
*RNF7031 IV_HTTP_PAYLOAD_TOO_LARGE...
                           CONST                 1000258D
*RNF7031 IV_HTTP_PAYMENT_REQUIRED...
                           CONST                 1000191D
*RNF7031 IV_HTTP_PRECONDITION_FAILED...
                           CONST                 1000253D
*RNF7031 IV_HTTP_PRECONDITION_REQUIRED...
                           CONST                 1000319D
*RNF7031 IV_HTTP_PROXY_AUTH_REQUIRED...
                           CONST                 1000223D
*RNF7031 IV_HTTP_REQUEST_HEADER_FIELDS_TOO_LARGE...
                           CONST                 1000329D
*RNF7031 IV_HTTP_REQUEST_TIMEOUT...
                           CONST                 1000232D
*RNF7031 IV_HTTP_REQUEST_URI_TOO_LONG...
                           CONST                 1000262D
*RNF7031 IV_HTTP_REQUESTED_RANGE_NOT_SATISFIABLE...
                           CONST                 1000273D
*RNF7031 IV_HTTP_RESET_CONTENT...
                           CONST                 1000154D
*RNF7031 IV_HTTP_SERVICE_UNAVAILABLE...
                           CONST                 1000360D
*RNF7031 IV_HTTP_TEAPOT    CONST                 1000282D
*RNF7031 IV_HTTP_TOO_EARLY CONST                 1000305D
*RNF7031 IV_HTTP_TOO_MANY_REQUESTS...
                           CONST                 1000323D
*RNF7031 IV_HTTP_UNAUTHORIZED...
                           CONST                 1000185D
*RNF7031 IV_HTTP_UNAVAILABLE_FOR_LEGAL_REASONS...
                           CONST                 1000334D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     81
*RNF7031 IV_HTTP_UNPROCESSABLE_ENTITY...
                           CONST                 1000292D
*RNF7031 IV_HTTP_UNSUPPORTED_MEDIA_TYPE...
                           CONST                 1000267D
*RNF7031 IV_HTTP_UPGRADE_REQUIRED...
                           CONST                 1000312D
*RNF7031 IV_HTTP_VARIANT_ALSO_NEGOTIATES...
                           CONST                 1000375D
*RNF7031 IV_HTTP_VERSION_NOT_SUPPORTED...
                           CONST                 1000369D
*RNF7031 IV_HTTPS          CONST                 1000114D
*RNF7031 IV_JOBLOG         PROTOTYPE             1000647D
*RNF7031 IV_LONGUTF8VARCHAR...
                           A(2097152)            1000058D
                           VARYING(4)
                           CCSID(1208)
                           TEMPLATE
         IV_LVARPUCHAR_T   DS(32)                1000063D    1000830      000776
                           TEMPLATE
*RNF7031   LENGTH          U(10,0)               1000064D
*RNF7031   STRING          *(16)                 1000065D
*RNF7031 IV_MEDIA_TYPE_ALL CONST                 1000399D
*RNF7031 IV_MEDIA_TYPE_JSON...
                           CONST                 1000403D
*RNF7031 IV_MEDIA_TYPE_XML CONST                 1000407D
*RNF7031 IV_METHOD_SIZE    CONST                 1000088D
         IV_NEWHTTPCLIENT  *(16)                 1000421D     000067      000218      000584
                           PROTOTYPE              000694      000785      000877      000914
                                                  000951
         IV_OPTIONS        A(1048576)            1000763D     000940
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_PATCH          A(1048576)            1000783D     000737
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_POST           A(1048576)            1000804D     000755
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_POSTFORM       A(1048576)            1000828D     000773
                           BASED(_QRNL_PST+)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     82
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_PUT            A(1048576)            1000848D     000825
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_SETAUTHPROVIDER...
                           PROTOTYPE             1000604D     000485
         IV_SETCERTIFICATE N(1)                  1000565D     000426      001073M     001075M
                           PROTOTYPE
         IV_SETCOMMTRACE   PROTOTYPE             1000660D     000251
         IV_SETPROXYTUNNEL PROTOTYPE             1000532D     000210
         IV_SETREQUESTDATABUFFER...
                           PROTOTYPE             1000465D     000190      000706M     000796M
         IV_SETREQUESTHANDLER...
                           PROTOTYPE             1001006D     001080
         IV_SETRESPONSEDATABUFFER...
                           PROTOTYPE             1000503D     000169      000586M     000696M
                                                  000787M     000879M     000916M     000953M
         IV_SETRESPONSEFILE...
                           PROTOTYPE             1000520D     000224
         IV_SETRESPONSEHEADERBUFFER...
                           PROTOTYPE             1000484D     000148
         IV_SETRETRIES     PROTOTYPE             1000912D     000855
         IV_SETTIMEOUT     PROTOTYPE             1000899D     000843
         IV_STATUS_ERROR   CONST                 1000070D     000312      000318      000323
                                                  000346      000393      000398      000413
         IV_STATUS_OK      CONST                 1000068D     000310      000336      000343
                                                  000362      000406
         IV_STATUS_RETRY   CONST                 1000069D     000272      000326      000349
                                                  000374      000415
         IV_URL_SIZE       CONST                 1000092D    1000711     1000729     1000746
                                                 1000764     1000784     1000805     1000829
                                                 1000849      000575      000682      000739
                                                  000757      000775      000827      000869
                                                  000906      000942
*RNF7031 IV_VARCHAR2       CONST                 1000079D
         IV_VARCHAR4       CONST                 1000083D     000590      000700      000710
                                                  000791      000883      000920      000957
*RNF7031 IV_XLATELVC       A(2097152)            1000691D
                           VARYING(4)
                           CCSID(65535)
                           PROTOTYPE
*RNF7031 IV_XLATEVC        A(32768)              1000675D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     83
                           VARYING(2)
                           CCSID(65535)
                           PROTOTYPE
         LISTEDHTTPSTATUSCODES(41)...
                           I(5,0)                 000055D     000649      001092M
         LOADCONFIGFROMENVVAR...
                           PROTOTYPE              000098M     001057
         LOWER             A(26)                  000062D     000517
                           CCSID(1208)
         LVARPUCHAR_T      DS(32)               10000006D    9000028     9000029     9000047
                           TEMPLATE              9000048      000509      000510      000540
                                                  000541      001038      001039
*RNF7031   LENGTH          U(10,0)              10000007D
*RNF7031   STRING          *(16)                10000008D
*RNF7031 MEMCMP            I(10,0)               6000095D
                           PROTOTYPE
         MEMCPY            *(16)                 6000080D     001047M     001051M
                           PROTOTYPE
*RNF7031 MEMICMP           I(10,0)               6000100D
                           PROTOTYPE
*RNF7031 MEMMOVE           *(16)                 6000090D
                           PROTOTYPE
*RNF7031 MEMSET            *(16)                 6000085D
                           PROTOTYPE
*RNF7031 MESSAGE_ESCAPE    PROTOTYPE             8000047D
         MESSAGE_INFO      PROTOTYPE             8000036D     000246M     000439M
*RNF7031 MESSAGE_SEND      PROTOTYPE             8000006D
         MESSAGE_SENDPASTCONTROLBOUNDARY...
                           PROTOTYPE             8000021D     000662M
*RNF7031 NO_RETRIES        CONST                  000059D
         NULL              CONST                  000053D     000086      000088      000089
                                                  000090      000091      000092      000093
*RNF7031 O_NDELAY          CONST                 6000168D
*RNF7031 O_NONBLOCK        CONST                 6000167D
         PARSEURL          PROTOTYPE             5000010D     000284M     000382M
*RNF7031 PLAIN_SOCKET      CONST                11000006D
*RNF7031 PLVARCHAR_T       DS(1048580)          10000011D
                           TEMPLATE
*RNF7031   LENGTH          I(10,0)              10000012D
*RNF7031   STRING          A(1048576)           10000013D
*RNF7031 QSORT             *(16)                 6000131D
                           PROTOTYPE
*RNF7031 QUSBAVL           I(10,0)               7000050D
*RNF7031 QUSBAVL14         I(10,0)               7000065D
*RNF7031 QUSBPRV           I(10,0)               7000048D
*RNF7031 QUSBPRV00         I(10,0)               7000063D
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     84
*RNF7031 QUSCCSID11        I(10,0)               7000071D
*RNF7031 QUSC0200          DS(32)                7000059D
         QUSEC             DS(16)                7000046D    6000075
*RNF7031 QUSEI             A(7)                  7000052D
*RNF7031 QUSEI00           A(7)                  7000067D
*RNF7031 QUSERVED          A(1)                  7000054D
*RNF7031 QUSERVED39        A(1)                  7000069D
*RNF7031 QUSK01            I(10,0)               7000061D
*RNF7031 QUSLED01          I(10,0)               7000075D
*RNF7031 QUSOED01          I(10,0)               7000073D
         R_OK              CONST                  000046D     000437
*RNF7031 RAND              I(10,0)               6000129D
                           PROTOTYPE
         RECEIVEDATA       I(10,0)               5000023D     000340
                           PROTOTYPE
         RECEIVEHEADER     I(10,0)               5000019D     000322      000402
                           PROTOTYPE
*RNF7031 REQUESTCONTROLBLOCKLOWER...
                           DS(22)                6000055D
*RNF7031   CASE            I(10,0)               6000059D
*RNF7031   CCSID           I(10,0)               6000058D
*RNF7031   RES1            A(10)                 6000060D
*RNF7031   TYPE            I(10,0)               6000057D
         REQUESTCONTROLBLOCKUPPER...
                           DS(22)                6000062D    6000071
*RNF7031   CASE            I(10,0)               6000066D
*RNF7031   CCSID           I(10,0)               6000065D
*RNF7031   RES1            A(10)                 6000067D
*RNF7031   TYPE            I(10,0)               6000064D
         SECURE_HANDSHAKE_IMEDIATE...
                           CONST                11000007D     000452
*RNF7031 SECURE_HANDSHAKE_LATER...
                           CONST                11000008D
         SENDANDRECEIVEDATA...
                           A(1048576)             000679      000746      000748      000750
                           BASED(_QRNL_PST+)      000764      000766      000768      000834
                           VARYING(4)             000836      000838
                           CCSID(1208)
                           PROTOTYPE
         SENDREQUEST       I(10,0)               5000015D     000317      000397
                           PROTOTYPE
         SENDSTATUSCODEESCAPEMESSAGE...
                           PROTOTYPE              000605M     000615      000727M     000815M
                                                  000894M     000972M
         SENDSTATUSCODEINFOMESSAGE...
                           PROTOTYPE              000625      000931M
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     85
         SENDSTATUSCODEMESSAGE...
                           PROTOTYPE              000621M     000631M     000635
         SLIST_FOREACH     N(1)                  9000060D     000139      000565
                           PROTOTYPE
         SLIST_FREE        PROTOTYPE             9000034D     000120M     000144M
*RNF7031 SLIST_LOOKUPLVPC  A(1048576)            9000051D
                           VARYING(4)
                           PROTOTYPE
         SLIST_NEW         *(16)                 9000032D     000082      000998
                           PROTOTYPE
*RNF7031 SLIST_PUSH        *(16)                 9000038D
                           PROTOTYPE
         SLIST_PUSHLVPC    *(16)                 9000045D     000527M     001053M
                           PROTOTYPE
         SLIST_SETITERATOR DS(48)                9000056D     000137      000564
                           PROTOTYPE
*RNF7031 SLIST_T           DS(36)                9000015D
                           TEMPLATE
*RNF7031   LENGTH          I(10,0)               9000018D
*RNF7031   PHEAD           *(16)                 9000016D
*RNF7031   PTAIL           *(16)                 9000017D
         SLISTITERATOR_T   DS(48)                9000021D    9000056     9000061      000133
                           TEMPLATE               000558
*RNF7031   HASNEXT         N(1)                  9000024D
*RNF7031   PNEXT           *(16)                 9000023D
*RNF7031   PTHIS           *(16)                 9000022D
         SLISTKEYVAL_T     DS(64)                9000027D     000135      000560
                           TEMPLATE
*RNF7031   KEY             DS(32)                9000028D
*RNF7031   VALUE           DS(32)                9000029D
         SLISTNODE_T       DS(48)                9000009D     000134      000559
                           TEMPLATE
*RNF7031   PAYLOADDATA     *(16)                 9000012D
*RNF7031   PAYLOADLENGTH   I(10,0)               9000011D
*RNF7031   PNEXT           *(16)                 9000010D
         SOCKETS_CONNECT   I(3,0)               11000023D     000303      000386
                           PROTOTYPE
         SOCKETS_COPY_SOCKET...
                           I(3,0)               11000031D     000408M
                           PROTOTYPE
         SOCKETS_FREE      PROTOTYPE            11000019D     000119M
         SOCKETS_NEW       *(16)                11000017D     000081
                           PROTOTYPE
*RNF7031 SOCKETS_SEND      I(10,0)              11000041D
                           PROTOTYPE
         SOCKETS_SET_SECURE...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     86
                           I(3,0)               11000037D     000409M
                           PROTOTYPE
         SOCKETS_SETSSL    PROTOTYPE            11000010D     000450M
         SOCKETS_SETTRACE  PROTOTYPE            11000047D     000259M
*RNF7031 SRAND             PROTOTYPE             6000126D
*RNF7031 STRCASECMP        I(10,0)               6000038D
                           PROTOTYPE
*RNF7031 STRCMP            I(10,0)               6000025D
                           PROTOTYPE
*RNF7031 STRCMPI           I(10,0)               6000034D
                           PROTOTYPE
*RNF7031 STRCSPN           I(10,0)               6000051D
                           PROTOTYPE
*RNF7031 STRERR            *(16)                 6000149D
                           PROTOTYPE
         STRERROR          *(16)                 6000152D     000246      000440
                           PROTOTYPE
         STRLEN            U(10,0)               6000022D     001041      001045      001049
                           PROTOTYPE
*RNF7031 STRNCASECMP       I(10,0)               6000042D
                           PROTOTYPE
*RNF7031 STRNCMP           I(10,0)               6000029D
                           PROTOTYPE
*RNF7031 STRSTR            *(16)                 6000047D
                           PROTOTYPE
*RNF7031 STRTOK            *(16)                 6000018D
                           PROTOTYPE
*RNF7031 SYSTEM            I(10,0)               6000123D
                           PROTOTYPE
         TERASPACE_ALLOC   *(16)                12000006D     000072      000078      000520
                           PROTOTYPE              000524      001046      001050
*RNF7031 TERASPACE_CALLOC  *(16)                12000010D
                           PROTOTYPE
         TERASPACE_FREE    PROTOTYPE            12000014D     000117M     000118M     000121M
                                                  000122M     000124M     000140M     000141M
                                                  000494M
*RNF7031 TERASPACE_LEAK    N(1)                 12000037D
                           PROTOTYPE
*RNF7031 TERASPACE_REALLOC *(16)                12000026D
                           PROTOTYPE
*RNF7031 TERASPACE_SIZE    U(20,0)              12000031D
                           PROTOTYPE
*RNF7031 TERASPACE_STAT    PROTOTYPE            12000035D
*RNF7031 TERASPACE_STRDUP  *(16)                12000018D
                           PROTOTYPE
         TERASPACE_STRTRIMDUP...
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     87
                           *(16)                12000022D     000219      000281      000282
                           PROTOTYPE              000380
*RNF7031 TERASPACE_USE     U(20,0)              12000039D
                           PROTOTYPE
*RNF7031 TMPNAM            *(16)                 6000117D
                           PROTOTYPE
*RNF7031 TMPNAMIFS         *(16)                 6000120D
                           PROTOTYPE
         TRUE              CONST                  000052D     000309      000392
         UNLINK            I(10,0)                000026D     000241M
                           PROTOTYPE
         UPPER             A(26)                  000061D     000517
                           CCSID(1208)
*RNF7031 VARCHAR_T         DS(32769)            10000016D
                           TEMPLATE
*RNF7031   LENGTH          I(5,0)               10000017D
*RNF7031   STRING          A(32767)             10000018D
*RNF7031 VC2STR            *(16)                10000021D
                           PROTOTYPE
*RNF7031 W_OK              CONST                  000047D
*RNF7031 X_OK              CONST                  000048D
      Field References for subprocedure IV_NEWHTTPCLIENT
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000070D     000073M     000075M     000076M
                           BASED(PCLIENT)         000078M     000079M     000081M     000082M
                                                  000083M     000084M     000086M     000087M
                                                  000088M     000089M     000090M     000091M
                                                  000092M     000093M     000094M
           BUFFER          *(16)                  000078
           BUFFERSIZE      I(10,0)                000079
           HEADERLIST      *(16)                  000082
           HOST            A(512)                 000089
           LOCATION        A(256)                 000092
           MESSAGE         A(256)                 000093
           METHOD          *(16)                  000075
           PASSWORD        A(256)                 000091
           PORT            I(10,0)                000087
           REQUESTHEADERLIST...
                           *(16)                  000094
           RESOURCE        A(32766)               000088
           RETRIES         I(5,0)                 000084
           SERVER          A(512)                 000086
           SOCKETS         *(16)                  000081
           TIMEOUT         P(9,3)                 000083
           URL             *(16)                  000076
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     88
           USER            A(256)                 000090
         PCLIENT           *(16)                  000070      000072M     000096      000098
                                                  000100
      Field References for subprocedure IV_FREE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000109D     000115      000117      000118
                           BASED(PCLIENT)         000119      000120      000121      000122
                                                  000123
           AUTHPROVIDER    *(16)                  000121
           BUFFER          *(16)                  000122
           HEADERLIST      *(16)                  000115      000120
           METHOD          *(16)                  000117
           PROXYTUNNEL     *(16)                  000123
           SOCKETS         *(16)                  000119
           URL             *(16)                  000118
         PCLIENT           *(16)                  000106D     000109      000111      000124
      Field References for subprocedure IV_FREELIST
         Field             Attributes         References (D=Defined M=Modified)
         ITERATOR          DS(48)                 000133D     000134      000137M     000139
           PTHIS           *(16)                  000134
         LIST              *(16)                  000130D     000137      000144
                           BASED(_QRNL_PST+)
         NODE              DS(48)                 000134D     000135
                           BASED(ITERATOR.+)
           PAYLOADDATA     *(16)                  000135
         PAYLOAD           DS(64)                 000135D     000140      000141
                           BASED(NODE.PAYL+)
           KEY             DS(32)                 000140
             STRING        *(16)                  000140
           VALUE           DS(32)                 000141
             STRING        *(16)                  000141
      Field References for subprocedure IV_SETRESPONSEHEADERBUFFER
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            *(16)                  000151D     000161
         BUFFERCCSID       I(10,0)                000154D     000164
         BUFFERSIZE        I(10,0)                000152D     000162
         BUFFERTYPE        I(5,0)                 000153D     000163
         CLIENT            DS(35200)              000157D     000160
                           BASED(PCLIENT)
           RESPONSEHEADERBUFFER...
                           DS(32)                 000160
         PCLIENT           *(16)                  000150D     000157
      Field References for subprocedure IV_SETRESPONSEDATABUFFER
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     89
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            *(16)                  000172D     000182
         BUFFERCCSID       I(10,0)                000175D     000185
         BUFFERSIZE        I(10,0)                000173D     000183
         BUFFERTYPE        I(5,0)                 000174D     000184
         CLIENT            DS(35200)              000178D     000181
                           BASED(PCLIENT)
           RESPONSEDATABUFFER...
                           DS(32)                 000181
         PCLIENT           *(16)                  000171D     000178
      Field References for subprocedure IV_SETREQUESTDATABUFFER
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            *(16)                  000193D     000203
         BUFFERCCSID       I(10,0)                000196D     000206
         BUFFERSIZE        I(10,0)                000194D     000204
         BUFFERTYPE        I(5,0)                 000195D     000205
         CLIENT            DS(35200)              000199D     000202
                           BASED(PCLIENT)
           REQUESTDATABUFFER...
                           DS(32)                 000202
         PCLIENT           *(16)                  000192D     000199
      Field References for subprocedure IV_SETPROXYTUNNEL
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000216D     000217      000218M
                           BASED(PCLIENT)
           PROXYTUNNEL     *(16)                  000217      000218
         PCLIENT           *(16)                  000212D     000216
         PROXY             DS(35200)              000217D     000219M
                           BASED(CLIENT.PR+)
           URL             *(16)                  000219
         URL               *(16)                  000213D     000219
      Field References for subprocedure IV_SETRESPONSEFILE
         Field             Attributes         References (D=Defined M=Modified)
         C_ERRNO           I(10,0)                000232D     000246
                           BASED(PERRNO)
         CLIENT            DS(35200)              000231D     000243M     000244
                           BASED(PCLIENT)
           RESPONSEDATAFILE...
                           *(16)                  000243      000244
         FILECCSID         I(10,0)                000228D     000238
         FILENAME          *(16)                  000227D     000241      000243
         MODE              A(32)                  000233D     000236M     000238M     000243
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     90
         PCLIENT           *(16)                  000226D     000231
         PERRNO            *(16)                  000232      000245M
      Field References for subprocedure IV_SETCOMMTRACE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000257D     000259
                           BASED(PCLIENT)
           SOCKETS         *(16)                  000259
         PCLIENT           *(16)                  000253D     000257
         TRACEFILENAME     *(16)                  000254D     000259
      Field References for subprocedure IV_EXECUTE
         Field             Attributes         References (D=Defined M=Modified)
         APISTATUS         I(10,0)                000272D     000310M     000312M     000317M
                                                  000318      000322M     000323      000326
                                                  000336M     000338M     000340M     000343
                                                  000346      000349      000362
         CLIENT            DS(35200)              000271D     000278M     000281M     000282M
                           BASED(PCLIENT)         000286      000287      000288      000289
                                                  000291      000292      000298      000301
                                                  000304      000305      000306      000307
                                                  000330      000334      000334      000337
                                                  000355      000356      000358      000359
           HOST            A(512)                 000288
           METHOD          *(16)                  000281      000334
           PORT            I(10,0)                000286      000306
           PROXYTUNNEL     *(16)                  000291      000301
           REQUESTHEADERLIST...
                           *(16)                  000278
           RESOURCE        A(32766)               000289
           RESPONSEDATABUFFER...
                           DS(32)                 000356
           RESPONSEDATAFILE...
                           *(16)                  000358      000359
           RESPONSEHEADERBUFFER...
                           DS(32)                 000355
           RESPONSEISCHUNKED...
                           N(1)                   000337
           RETRIES         I(5,0)                 000298
           SERVER          A(512)                 000287      000305
           SOCKETS         *(16)                  000304
           STATUS          I(10,0)                000330      000334
           TIMEOUT         P(9,3)                 000307
           URL             *(16)                  000282
         HEADERS           *(16)                  000268D     000278
         METHOD            *(16)                  000266D     000281
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     91
         OK                I(3,0)                 000274D     000303M     000309
         PCLIENT           *(16)                  000265D     000271      000284      000317
                                                  000322      000338      000340
         SUCCESS           N(1)                   000275D     000292M     000293
         TRY               I(5,0)                 000273D     000298
         URL               *(16)                  000267D     000282      000284
      Field References for subprocedure CONNECT_USING_PROXY_TUNNEL
         Field             Attributes         References (D=Defined M=Modified)
         APISTATUS         I(10,0)                000374D     000393M     000397M     000398
                                                  000402M     000406      000413      000415
         CLIENT            DS(35200)              000369D     000378      000408      000409
                           BASED(_QRNL_PST+)
           PROXYTUNNEL     *(16)                  000378
           SOCKETS         *(16)                  000408      000409
         OK                I(3,0)                 000372D     000386M     000392
         PPROXY            *(16)                  000375D     000376      000378M     000382
                                                  000397      000402
         PROXY             DS(35200)              000376D     000380M     000382      000384
                           BASED(PPROXY)          000387      000388      000389      000390
                                                  000404      000408
           HOST            A(512)                 000388
           METHOD          *(16)                  000380
           PORT            I(10,0)                000389
           RETRIES         I(5,0)                 000384
           SOCKETS         *(16)                  000387      000408
           STATUS          I(10,0)                000404
           TIMEOUT         P(9,3)                 000390
           URL             *(16)                  000382
         TRY               I(5,0)                 000371D     000384
      Field References for subprocedure IV_SETCERTIFICATE
         Field             Attributes         References (D=Defined M=Modified)
         C_ERRNO           I(10,0)                000434D     000440
                           BASED(PERRNO)
         CERTIFICATEFILE   *(16)                  000429D     000437      000441      000453
                                                  000458
         CERTIFICATEPASSWORD...
                           *(16)                  000430D     000447M     000454
         CLIENT            DS(35200)              000433D     000451
                           BASED(PCLIENT)
           SOCKETS         *(16)                  000451
         EMPTY_STR         A(1)                   000435D     000447
         PCLIENT           *(16)                  000428D     000433
         PERRNO            *(16)                  000434      000438M
      Field References for subprocedure IV_GETSTATUS
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     92
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000469D     000471
                           BASED(PCLIENT)
           STATUS          I(10,0)                000471
         PCLIENT           *(16)                  000466D     000469
      Field References for subprocedure IV_GETERRORMESSAGE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000479D     000481
                           BASED(PCLIENT)
           MESSAGE         A(256)                 000481
         PCLIENT           *(16)                  000476D     000479
      Field References for subprocedure IV_SETAUTHPROVIDER
         Field             Attributes         References (D=Defined M=Modified)
         AUTHPROVIDER      *(16)                  000488D     000497
         CLIENT            DS(35200)              000491D     000493      000494      000497M
                           BASED(PCLIENT)
           AUTHPROVIDER    *(16)                  000493      000494      000497
         PCLIENT           *(16)                  000487D     000491
      Field References for subprocedure ADDHEADER
         Field             Attributes         References (D=Defined M=Modified)
         HEADERNAME        A(1024)                000504D     000512      000517
                           VARYING(2)
                           CCSID(1208)
         HEADERVALUE       A(16384)               000505D     000523      000525
                           VARYING(2)
                           CCSID(1208)
         LIST              *(16)                  000503D     000527
         LISTKEY           DS(32)                 000509D     000519M     000520M     000520
                                                  000521M     000521      000527
           LENGTH          U(10,0)                000519      000520      000521
           STRING          *(16)                  000520      000521
         LISTVALUE         DS(32)                 000510D     000523M     000524M     000524
                                                  000525M     000525      000527
           LENGTH          U(10,0)                000523      000524      000525
           STRING          *(16)                  000524      000525
         LOWERNAME         A(1024)                000508D     000517M     000519      000521
                           VARYING(2)
                           CCSID(1208)
      Field References for subprocedure IV_ADDHEADER
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000538D     000547
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     93
                           BASED(PCLIENT)
           HEADERLIST      *(16)                  000547
         HEADERNAME        A(1024)                000534D     000543      000547
                           VARYING(2)
                           CCSID(1208)
         HEADERVALUE       A(16384)               000535D     000547
                           VARYING(2)
                           CCSID(1208)
*RNF7031 LISTKEY           DS(32)                 000540D
*RNF7031 LISTVALUE         DS(32)                 000541D
*RNF7031 LOWERNAME         A(1024)                000539D
                           VARYING(2)
                           CCSID(1208)
         PCLIENT           *(16)                  000533D     000538
      Field References for subprocedure IV_ADDHEADERS
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000557D     000568
                           BASED(PCLIENT)
           HEADERLIST      *(16)                  000568
         HEADERNAME        A(1024)                000561D     000566M     000568
                           VARYING(2)
                           CCSID(1208)
         HEADERS           *(16)                  000554D     000564
         HEADERVALUE       A(16384)               000562D     000567M     000568
                           VARYING(2)
                           CCSID(1208)
         ITERATOR          DS(48)                 000558D     000559      000564M     000565
           PTHIS           *(16)                  000559
         NODE              DS(48)                 000559D     000560
                           BASED(ITERATOR.+)
           PAYLOADDATA     *(16)                  000560
         NODEPAYLOAD       DS(64)                 000560D     000566      000566      000567
                           BASED(NODE.PAYL+)      000567
           KEY             DS(32)                 000566      000566
             LENGTH        U(10,0)                000566
             STRING        *(16)                  000566
           VALUE           DS(32)                 000567      000567
             LENGTH        U(10,0)                000567
             STRING        *(16)                  000567
         PCLIENT           *(16)                  000553D     000557
      Field References for subprocedure IV_GET
         Field             Attributes         References (D=Defined M=Modified)
         ACCEPTMIMETYPE    A(16384)               000576D     000595
                           VARYING(2)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     94
                           CCSID(1208)
         CLIENT            *(16)                  000580D     000584M     000587      000595
                                                  000599      000602      000604      000605
                                                  000611
         HEADERS           *(16)                  000577D     000599
         RC                N(1)                   000582D     000602M
         RETURNBUFFER      A(1048576)             000581D     000588      000605      000608
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000575D     000602
                           VARYING(2)
      Field References for subprocedure SENDSTATUSCODEESCAPEMESSAGE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000617D     000621
         RETURNBUFFER      A(1048576)             000618D     000621
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
      Field References for subprocedure SENDSTATUSCODEINFOMESSAGE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000627D     000631
         RETURNBUFFER      A(1048576)             000628D     000631
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
      Field References for subprocedure SENDSTATUSCODEMESSAGE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000637D     000647
         MESSAGEBODY       A(1000)                000645D     000653M     000655M     000659M
                           VARYING(2)             000662
         MESSAGEFILE       A(20)                  000643D     000662
         MESSAGEID         A(7)                   000644D     000650M     000658M     000662
         MESSAGETYPE       A(10)                  000639D     000662
         RETURNBUFFER      A(1048576)             000638D     000653
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
         STATUS            I(5,0)                 000642D     000647M     000649      000650
                                                  000659
      Field References for subprocedure ISSUCCESSFULREQUEST
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000668D     000673
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     95
         STATUS            I(5,0)                 000671D     000673M     000675
      Field References for subprocedure SENDANDRECEIVEDATA
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000688D     000689      000694M     000697
                                                  000707      000717      000721      000724
                                                  000726      000727      000733
         CLIENTDS          DS(35200)              000689D     000713M
                           BASED(CLIENT)
           REQUESTDATABUFFER...
                           DS(32)                 000713
             LENGTH        U(10,0)                000713
         CONTENTTYPE       A(16384)               000684D     000717
                           VARYING(2)
                           CCSID(1208)
         HEADERS           *(16)                  000685D     000721
         MESSAGEBODY       A(1048576)             000683D     000704      000708
                           VARYING(4)
                           CCSID(1208)
         MESSAGEBODYLENGTH U(10,0)                000692D     000704M     000705      000709
                                                  000713
         METHOD            *(16)                  000681D     000724
         RC                N(1)                   000691D     000724M
         RETURNBUFFER      A(1048576)             000690D     000698      000727      000730
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000682D     000724
                           VARYING(2)
      Field References for subprocedure IV_PATCH
         Field             Attributes         References (D=Defined M=Modified)
         CONTENTTYPE       A(16384)               000741D     000748      000750
                           VARYING(2)
                           CCSID(1208)
         HEADERS           *(16)                  000742D     000750
         MESSAGEBODY       A(1048576)             000740D     000746      000748      000750
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000739D     000746      000748      000750
                           VARYING(2)
      Field References for subprocedure IV_POST
         Field             Attributes         References (D=Defined M=Modified)
         CONTENTTYPE       A(16384)               000759D     000766      000768
                           VARYING(2)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     96
                           CCSID(1208)
         HEADERS           *(16)                  000760D     000768
         MESSAGEBODY       A(1048576)             000758D     000764      000766      000768
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000757D     000764      000766      000768
                           VARYING(2)
      Field References for subprocedure IV_POSTFORM
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000780D     000781      000785M     000788
                                                  000797      000806      000809      000812
                                                  000814      000815      000821
         CLIENTDS          DS(35200)              000781D     000803M
                           BASED(CLIENT)
           REQUESTDATABUFFER...
                           DS(32)                 000803
             LENGTH        U(10,0)                000803
         FORMDATA          DS(32)                 000776D     000795      000798      000799
                           BASED(_QRNL_PST+)      000803
           LENGTH          U(10,0)                000795      000799      000803
           STRING          *(16)                  000798
         HEADERS           *(16)                  000777D     000809
         RC                N(1)                   000783D     000812M
         RETURNBUFFER      A(1048576)             000782D     000789      000815      000818
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000775D     000812
                           VARYING(2)
      Field References for subprocedure IV_PUT
         Field             Attributes         References (D=Defined M=Modified)
         CONTENTTYPE       A(16384)               000829D     000836      000838
                           VARYING(2)
                           CCSID(1208)
         HEADERS           *(16)                  000830D     000838
         MESSAGEBODY       A(1048576)             000828D     000834      000836      000838
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000827D     000834      000836      000838
                           VARYING(2)
      Field References for subprocedure IV_SETTIMEOUT
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     97
         CLIENT            DS(35200)              000849D     000851M
                           BASED(PCLIENT)
           TIMEOUT         P(9,3)                 000851
         PCLIENT           *(16)                  000845D     000849
         TIMEOUT           P(9,3)                 000846D     000851
      Field References for subprocedure IV_SETRETRIES
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35200)              000861D     000863M
                           BASED(PCLIENT)
           RETRIES         I(5,0)                 000863
         PCLIENT           *(16)                  000857D     000861
         RETRIES           I(5,0)                 000858D     000863
      Field References for subprocedure IV_DELETE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000873D     000877M     000880      000888
                                                  000891      000893      000894      000900
         HEADERS           *(16)                  000870D     000888
         RC                N(1)                   000875D     000891M
         RETURNBUFFER      A(1048576)             000874D     000881      000894      000897
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000869D     000891
                           VARYING(2)
      Field References for subprocedure IV_HEAD
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            *(16)                  000910D     000914M     000917      000925
                                                  000928      000930      000931      000934
                                                  000936
         HEADERS           *(16)                  000907D     000925
         RC                N(1)                   000912D     000928M     000934
         RETURNBUFFER      A(1048576)             000911D     000918      000931
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000906D     000928
                           VARYING(2)
      Field References for subprocedure IV_OPTIONS
         Field             Attributes         References (D=Defined M=Modified)
         ACCEPTMIMETYPE    A(16384)               000943D     000962
                           VARYING(2)
                           CCSID(1208)
         CLIENT            *(16)                  000947D     000951M     000954      000962
                                                  000966      000969      000971      000972
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     98
                                                  000978
         HEADERS           *(16)                  000944D     000966
         RC                N(1)                   000949D     000969M
         RETURNBUFFER      A(1048576)             000948D     000955      000972      000975
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000942D     000969
                           VARYING(2)
      Field References for subprocedure IV_BUILDLIST
         Field             Attributes         References (D=Defined M=Modified)
         KEY1              A(1024)                000984D     001001
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         KEY2              A(1024)                000986D     001004
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         KEY3              A(1024)                000988D     001007
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         KEY4              A(1024)                000990D     001010
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         KEY5              A(1024)                000992D     001013
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         LIST              *(16)                  000996D     000998M     001001      001004
                                                  001007      001010      001013      001016
         VALUE1            A(16384)               000985D     001001
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         VALUE2            A(16384)               000987D     001004
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         VALUE3            A(16384)               000989D     001007
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         VALUE4            A(16384)               000991D     001010
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page     99
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         VALUE5            A(16384)               000993D     001013
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
      Field References for subprocedure IV_ADDHEADERTOLIST
         Field             Attributes         References (D=Defined M=Modified)
         HEADERKEY         A(1024)                001023D     001027
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         HEADERVALUE       A(16384)               001024D     001027
                           BASED(_QRNL_PST+)
                           VARYING(2)
                           CCSID(1208)
         LIST              *(16)                  001022D     001027
      Field References for subprocedure IV_ADDENTRYTOLIST
         Field             Attributes         References (D=Defined M=Modified)
         KEY               *(16)                  001034D     001041      001045      001047
         LIST              *(16)                  001033D     001053
         LISTKEY           DS(32)                 001038D     001045M     001046M     001046
                                                  001047      001047      001053
           LENGTH          U(10,0)                001045      001046      001047
           STRING          *(16)                  001046      001047
         LISTVALUE         DS(32)                 001039D     001049M     001050M     001050
                                                  001051      001051      001053
           LENGTH          U(10,0)                001049      001050      001051
           STRING          *(16)                  001050      001051
         VALUE             *(16)                  001035D     001049      001051
      Field References for subprocedure LOADCONFIGFROMENVVAR
         Field             Attributes         References (D=Defined M=Modified)
         CERTVALUE         *(16)                  001066D     001069M     001072      001073
                                                  001074      001075
         CLIENT            *(16)                  001059D     001073      001075
                           BASED(_QRNL_PST+)
         GETENV            *(16)                  001062D     001069      001070
                           PROTOTYPE
         PASSVALUE         *(16)                  001067D     001070M     001072      001073
      Field References for subprocedure IV_SETREQUESTHANDLER
         Field             Attributes         References (D=Defined M=Modified)
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    100
         CLIENT            DS(35200)              001086D     001088M
                           BASED(P_CLIENT)
           REQUESTHANDLER  *(16)                  001088
         HANDLER           *(16)                  001083D     001088
         P_CLIENT          *(16)                  001082D     001086
      Indicator References:
         Indicator                            References (D=Defined M=Modified)
       * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    101
                      E x t e r n a l   R e f e r e n c e s
      Statically bound procedures:
         Procedure                            References
         ceil                                    6000108
         rand                                    6000129
         atoi                                    6000203
         floor                                   6000111
         srand                                   6000126
         qsort                                   6000131
         fcntl                                   6000197
         strtok                                  6000018
         strlen                                  6000022      001041      001045      001049
         strcmp                                  6000025
         strstr                                  6000047
         memcpy                                  6000080      001047      001051
         memset                                  6000085
         memcmp                                  6000095
         tmpnam                                  6000117
         system                                  6000123
         vc2str                                 10000021
         unlink                                               000241
         access                                   000030      000437
         getenv                                   001062      001069      001070
         strncmp                                 6000029
         strcmpi                                 6000034
         strcspn                                 6000051
         memmove                                 6000090
         bsearch                                 6000137
         __errno                                 6000147      000245      000438
         iv_debug                                             000286      000287      000288
                                                  000289      000330      000404      000457
                                                  000458
         parseUrl                                             000284      000382
         strerror                                6000149     6000152      000246      000440
         iv_joblog                               1000647
         __memicmp                               6000100
         sList_new                               9000032      000082      000998
         iv_xlateVc                              1000675
         strcasecmp                              6000038
         sList_free                              9000034      000120      000144
         sList_push                              9000038
         iv_xlateLvc                             1000691
         sendRequest                                          000317      000397
         receiveData                                          000340
         strncasecmp                             6000042
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    102
         sockets_new                            11000017      000081
         message_send                            8000006
         message_info                            8000036      000246      000442
         sockets_free                           11000019      000119
         sockets_send
         _C_IFS_fopen                             000017      000243
         iv_debug_init
         receiveHeader                                        000322      000402
         _C_IFS_tmpnam                           6000120
         sList_foreach                           9000060      000139      000565
         teraspace_use
         _C_IFS_fclose                            000022      000359
         iv_anychar_set                          2000016      000165      000186      000207
         QlgConvertCase                          6000069
         message_escape                          8000047
         sList_pushLVPC                          9000045      000527      001053
         sockets_setSSL                         11000010      000455
         teraspace_free                                       000117      000118      000121
                                                  000122      000124      000140      000141
                                                  000494
         teraspace_size
         teraspace_stat
         teraspace_leak
         iv_decodeBase64                         1000619
         iv_encodeBase64                         1000633
         sockets_connect                        11000023      000308      000391
         teraspace_alloc                                      000072      000078      000520
                                                  000524      001046      001050
         sList_lookupLVPC                        9000051
         sockets_setTrace                       11000047      000259
         teraspace_calloc
         teraspace_strdup
         iv_anychar_append                       2000024
         sList_setIterator                       9000056      000137      000564
         teraspace_realloc
         iv_chunked_receive                                   000338
         sockets_set_secure                     11000037      000409
         iv_anychar_finalize                     2000030      000355      000356
         sockets_copy_socket                    11000031      000408
         teraspace_strTrimDup                                 000219      000281      000282
                                                  000380
         message_sendPastControlBoundary         8000021      000662
      Imported fields:
         Field             Attributes         Defined
         No references in the source.
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    103
      Exported fields:
         Field             Attributes         Defined
         No references in the source.
   * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    104
                          M e s s a g e   S u m m a r y
 Msg id  Sv Number Message text
*RNF5409 00     10 The prototyped call returns a value which is lost when CALLP
                   is used.
*RNF7031 00   1346 The name or indicator is not referenced.
       * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
 5770WDS V7R4M0  190419 RN        IBM ILE RPG             ILEVATOR/API             DKSRV134   29-11-23 16:48:52        Page    105
                            F i n a l   S u m m a r y
  Message Totals:
    Information  (00) . . . . . . . :     1356
    Warning      (10) . . . . . . . :        0
    Error        (20) . . . . . . . :        0
    Severe Error (30+)  . . . . . . :        0
    ---------------------------------  -------
    Total . . . . . . . . . . . . . :     1356
  Source Totals:
    Records . . . . . . . . . . . . :     2755
    Specifications  . . . . . . . . :     1342
    Data records  . . . . . . . . . :       41
    Comments  . . . . . . . . . . . :     1224
         * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
Module API placed in library ILEVATOR. 00 highest severity. Created on 29-11-23 at 16:48:52.
          * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *
