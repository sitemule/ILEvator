CPD000D: Command QSYS/CRTRPGMOD not safe for a multithreaded job.
RNS9305: Module API placed in library ILEVATOR. 00 highest severity. Created on 11-05-23 at 16:32:26.
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      1
  Command  . . . . . . . . . . . . :   CRTRPGMOD
    Issued by  . . . . . . . . . . :     NLI
  Module . . . . . . . . . . . . . :   API
    Library  . . . . . . . . . . . :     ILEVATOR
  Text 'description' . . . . . . . :   *SRCMBRTXT
  Source stream file   . . . . . . :   src/api.rpgmod
    CCSID  . . . . . . . . . . . . :     500
  Text 'description' . . . . . . . :
  Last Change  . . . . . . . . . . :   11-05-23  16:32:10
  Generation severity level  . . . :   10
  Compiler options . . . . . . . . :   *XREF      *GEN       *NOSECLVL  *SHOWCPY
                                       *EXPDDS    *EXT       *NOSHOWSKP *SRCSTMT
                                       *DEBUGIO   *NOUNREF   *NOEVENTF
  Debugging views  . . . . . . . . :   *LIST
  Debug encryption key . . . . . . :   *NONE
  Output . . . . . . . . . . . . . :   *PRINT
  Optimization level . . . . . . . :   *NONE
  Source listing indentation . . . :   *NONE
  Type conversion options  . . . . :   *NONE
  Sort sequence  . . . . . . . . . :   *HEX
  Language identifier  . . . . . . :   *JOBRUN
  Replace module . . . . . . . . . :   *YES
  Authority  . . . . . . . . . . . :   *LIBCRTAUT
  Truncate numeric . . . . . . . . :   *YES
  Fix numeric  . . . . . . . . . . :   *NONE
  Target release . . . . . . . . . :   *CURRENT
  Allow null values  . . . . . . . :   *NO
  Storage model . . .  . . . . . . :   *INHERIT
  Binding directory  . . . . . . . :   *NONE
  Define condition names . . . . . :   *NONE
  Enable performance collection  . :   *PEP
  Profiling data . . . . . . . . . :   *NOCOL
  Licensed Internal Code options . :
  Generate program interface . . . :   *NO
  Include directory  . . . . . . . :   headers
                                   :   ext/headers
  Preprocessor options . . . . . . :   *NONE
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      2
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
                          S o u r c e   L i s t i n g
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001 **FREE                                                                                                               000001
000002                                                                                                                      000002
000003 ctl-opt nomain thread(*concurrent);                                                                                  000003
000004                                                                                                                      000004
000005 /include 'anychar.rpginc'                                                                                            000005
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  anychar.r+                                                   *                     1
        * External name  . . . . . . :  headers/anychar.rpginc                                       *                     1
        * Last change  . . . . . . . :  11-05-23  09:27:18                                           *                     1
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              1000001
000002+                                                                                                                    1000002
000003+/if not defined (ILEVATOR_ANYCHAR_H)                                                                                1000003
000004+/define ILEVATOR_ANYCHAR_H                                                                                          1000004
000005+                                                                                                                    1000005
000006+                                                                                                                    1000006
000007+dcl-ds anychar_t qualified template;                                                                                1000007
000008+    data pointer;                                                                                                   1000008
000009+    size uns(10);                                                                                                   1000009
000010+    length uns(10);                                                                                                 1000010
000011+    type int(10);                                                                                                   1000011
000012+    ccsid int(10);                                                                                                  1000012
000013+end-ds;                                                                                                             1000013
000014+                                                                                                                    1000014
000015+                                                                                                                    1000015
000016+dcl-pr iv_anychar_set extproc(*CWIDEN : 'iv_anychar_set');                                                          1000016
000017+    anychar pointer value;                                                                                          1000017
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      3
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000018+    buffer pointer value;                                                                                           1000018
000019+    bufferSize int(10) value;                                                                                       1000019
000020+    bufferType int(5) value;                                                                                        1000020
000021+    bufferXlate int(5) value;                                                                                       1000021
000022+end-pr;                                                                                                             1000022
000023+                                                                                                                    1000023
000024+dcl-pr iv_anychar_append extproc(*CWIDEN : 'iv_anychar_append');                                                    1000024
000025+    anychar pointer value;                                                                                          1000025
000026+    string pointer value;                                                                                           1000026
000027+    length int(10) value;                                                                                           1000027
000028+end-pr;                                                                                                             1000028
000029+                                                                                                                    1000029
000030+dcl-pr iv_anychar_finalize extproc(*CWIDEN : 'iv_anychar_finalize');                                                1000030
000031+  anychar pointer value;                                                                                            1000031
000032+end-pr;                                                                                                             1000032
000033+                                                                                                                    1000033
000034+/endif                                                                                                              1000034
000006 /include 'chunked.rpginc'                                                                                            000006
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  chunked.r+                                                   *                     2
        * External name  . . . . . . :  headers/chunked.rpginc                                       *                     2
        * Last change  . . . . . . . :  11-05-23  09:27:18                                           *                     2
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              2000001
000002+                                                                                                                    2000002
000003+/if defined (ILEVATOR_CHUNKED_H)                                                                                    2000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              2000005
000006+                                                                                                                    2000006
000007+/define ILEVATOR_CHUNKED_H                                                                                          2000007
000008+                                                                                                                    2000008
000009+dcl-pr iv_chunked_receive int(10) extproc(*dclcase);                                                                2000009
000010+    client pointer value;                                                                                           2000010
000011+end-pr;                                                                                                             2000011
000007 /include 'debug.rpginc'                                                                                              000007
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      4
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  debug.rpg+                                                   *                     3
        * External name  . . . . . . :  headers/debug.rpginc                                         *                     3
        * Last change  . . . . . . . :  11-05-23  09:27:18                                           *                     3
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              3000001
000002+                                                                                                                    3000002
000003+/if defined (ILEVATOR_DEBUG)                                                                                        3000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              3000005
000006+                                                                                                                    3000006
000007+/define ILEVATOR_DEBUG                                                                                              3000007
000008+                                                                                                                    3000008
000009+                                                                                                                    3000009
000010+dcl-pr iv_debug_init int(10) extproc(*dclcase) end-pr;                                                              3000010
000011+                                                                                                                    3000011
000012+dcl-pr iv_debug extproc(*dclcase) opdesc;                                                                           3000012
000013+    message pointer value options(*string);                                                                         3000013
000014+    replaceValue1 pointer value options(*string : *nopass);                                                         3000014
000015+    replaceValue2 pointer value options(*string : *nopass);                                                         3000015
000016+    replaceValue3 pointer value options(*string : *nopass);                                                         3000016
000017+    replaceValue4 pointer value options(*string : *nopass);                                                         3000017
000018+    replaceValue5 pointer value options(*string : *nopass);                                                         3000018
000019+    replaceValue6 pointer value options(*string : *nopass);                                                         3000019
000020+    replaceValue7 pointer value options(*string : *nopass);                                                         3000020
000021+end-pr;                                                                                                             3000021
000008 /include 'httpclient.rpginc'                                                                                         000008
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  httpclien+                                                   *                     4
        * External name  . . . . . . :  headers/httpclient.rpginc                                    *                     4
        * Last change  . . . . . . . :  11-05-23  09:27:18                                           *                     4
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      5
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              4000001
000002+                                                                                                                    4000002
000003+/if defined (ILEVATOR_HTTPCLIENT_H)                                                                                 4000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              4000005
000006+                                                                                                                    4000006
000007+/define ILEVATOR_HTTPCLIENT_H                                                                                       4000007
000008+                                                                                                                    4000008
000009+                                                                                                                    4000009
000010+dcl-pr parseUrl extproc(*dclcase);                                                                                  4000010
000011+    client pointer value;                                                                                           4000011
000012+    url pointer value options(*string);                                                                             4000012
000013+end-pr;                                                                                                             4000013
000014+                                                                                                                    4000014
000015+dcl-pr sendRequest int(10) extproc(*dclcase);                                                                       4000015
000016+    client pointer value;                                                                                           4000016
000017+end-pr;                                                                                                             4000017
000018+                                                                                                                    4000018
000019+dcl-pr receiveHeader int(10) extproc(*dclcase);                                                                     4000019
000020+    client pointer value;                                                                                           4000020
000021+end-pr;                                                                                                             4000021
000022+                                                                                                                    4000022
000023+dcl-pr receiveData int(10) extproc(*dclcase);                                                                       4000023
000024+    client pointer value;                                                                                           4000024
000025+end-pr;                                                                                                             4000025
000009 /include 'ilevator.rpgle'                                                                                            000009
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  ilevator.+                                                   *                     5
        * External name  . . . . . . :  headers/ilevator.rpgle                                       *                     5
        * Last change  . . . . . . . :  11-05-23  16:21:45                                           *                     5
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              5000001
000002+                                                                                                                    5000002
000003+/if defined (ILEVATOR)                                                                                              5000003
            LINES EXCLUDED: 1
000005+/endif                                                                                                              5000005
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      6
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000006+                                                                                                                    5000006
000007+/define ILEVATOR                                                                                                    5000007
000008+                                                                                                                    5000008
000009+///                                                                                                                 5000009
000010+// ILEvator - HTTP client for ILE on IBM i                                                                          5000010
000011+//                                                                                                                  5000011
000012+// It is a HTTP client API for the ILE environment on                                                               5000012
000013+// IBM i for implementing web/microservices alike applications.                                                     5000013
000014+// <p>                                                                                                              5000014
000015+// ILEvator is a service program that provides a simple, blazing fast                                               5000015
000016+// programmable HTTP client for your application so you can easily plug your RPG                                    5000016
000017+// code into a service infrastructure or make simple web applications without                                       5000017
000018+// the need of any third party web client products.                                                                 5000018
000019+//                                                                                                                  5000019
000020+// Øauthor Niels Liisberg                                                                                           5000020
000021+// Ødate 15.12.2022                                                                                                 5000021
000022+// Øproject ILEvator                                                                                                5000022
000023+// Ølink https://github.com/sitemule/ILEvator Project page                                                          5000023
000024+// Øversion 1.0.0                                                                                                   5000024
000025+//                                                                                                                  5000025
000026+// Øinfo Source for HTTP status documentation is the Mozilla developer website                                      5000026
000027+//       at https://developer.mozilla.org/en-US/docs/Web/HTTP/Status .                                              5000027
000028+///                                                                                                                 5000028
000029+                                                                                                                    5000029
000030+                                                                                                                    5000030
000031+///                                                                                                                 5000031
000032+// Template for UTF8 varchars. default to 2M                                                                        5000032
000033+///                                                                                                                 5000033
000034+dcl-s IV_LONGUTF8VARCHAR varchar(2097152:4) ccsid(*utf8) template;                                                  5000034
000035+                                                                                                                    5000035
000036+dcl-c IV_STATUS_OK 0;                                                                                               5000036
000037+dcl-c IV_STATUS_RETRY 1;                                                                                            5000037
000038+dcl-c IV_STATUS_ERROR 2;                                                                                            5000038
000039+                                                                                                                    5000039
000040+dcl-c IV_METHOD_SIZE 10;                                                                                            5000040
000041+dcl-c IV_URL_SIZE 32766;                                                                                            5000041
000042+dcl-c IV_BUFFER_SIZE 1048576;                                                                                       5000042
000043+dcl-c IV_HEADER_NAME_SIZE 1024;                                                                                     5000043
000044+dcl-c IV_HEADER_VALUE_SIZE 16384;                                                                                   5000044
000045+                                                                                                                    5000045
000046+///                                                                                                                 5000046
000047+// Protocol plain HTTP                                                                                              5000047
000048+///                                                                                                                 5000048
000049+dcl-c IV_HTTP       0;                                                                                              5000049
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      7
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000050+                                                                                                                    5000050
000051+///                                                                                                                 5000051
000052+// Protocol HTTPS (Secure HTTP: Certificate and certificate password required)                                      5000052
000053+///                                                                                                                 5000053
000054+dcl-c IV_HTTPS      1;                                                                                              5000054
000055+                                                                                                                    5000055
000056+                                                                                                                    5000056
000057+///                                                                                                                 5000057
000058+// The request has succeeded. The meaning of the success depends on the HTTP method:                                5000058
000059+// <ul>                                                                                                             5000059
000060+//   <li>GET: The resource has been fetched and is transmitted in the message body.</li>                            5000060
000061+//   <li>HEAD: The entity headers are in the message body.</li>                                                     5000061
000062+//   <li>PUT or POST: The resource describing the result of the action is transmitted in the message                5000062
 ...    body.</li>
000063+//   <li>TRACE: The message body contains the request message as received by the server.</li>                       5000063
000064+// </ul>                                                                                                            5000064
000065+///                                                                                                                 5000065
000066+dcl-c IV_HTTP_OK 200;                                                                                               5000066
000067+///                                                                                                                 5000067
000068+// The request has succeeded and a new resource has been created as a result.                                       5000068
000069+// This is typically the response sent after POST requests, or some PUT requests.                                   5000069
000070+///                                                                                                                 5000070
000071+dcl-c IV_HTTP_CREATED 201;                                                                                          5000071
000072+///                                                                                                                 5000072
000073+// The request has been received but not yet acted upon. It is noncommittal,                                        5000073
000074+// since there is no way in HTTP to later send an asynchronous response indicating                                  5000074
000075+// the outcome of the request. It is intended for cases where another process or                                    5000075
000076+// server handles the request, or for batch processing.                                                             5000076
000077+///                                                                                                                 5000077
000078+dcl-c IV_HTTP_ACCEPTED 202;                                                                                         5000078
000079+///                                                                                                                 5000079
000080+// This response code means the returned meta-information is not exactly the same                                   5000080
000081+// as is available from the origin server, but is collected from a local or a                                       5000081
000082+// third-party copy. This is mostly used for mirrors or backups of another resource.                                5000082
000083+// Except for that specific case, the "200 OK" response is preferred to this status.                                5000083
000084+///                                                                                                                 5000084
000085+dcl-c IV_HTTP_NON_AUTHORITIVE_INFO 203;                                                                             5000085
000086+///                                                                                                                 5000086
000087+// There is no content to send for this request, but the headers may be useful.                                     5000087
000088+// The user-agent may update its cached headers for this resource with the new ones.                                5000088
000089+///                                                                                                                 5000089
000090+dcl-c IV_HTTP_NO_CONTENT 204;                                                                                       5000090
000091+///                                                                                                                 5000091
000092+// Tells the user-agent to reset the document which sent this request.                                              5000092
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      8
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000093+///                                                                                                                 5000093
000094+dcl-c IV_HTTP_RESET_CONTENT 205;                                                                                    5000094
000095+///                                                                                                                 5000095
000096+// This response code is used when the Range header is sent from the client to                                      5000096
000097+// request only part of a resource.                                                                                 5000097
000098+///                                                                                                                 5000098
000099+dcl-c IV_HTTP_PARTIAL_CONTENT 206;                                                                                  5000099
000100+///                                                                                                                 5000100
000101+// Conveys information about multiple resources, for situations where multiple                                      5000101
000102+// status codes might be appropriate.                                                                               5000102
000103+///                                                                                                                 5000103
000104+dcl-c IV_HTTP_MULTI_STATUS 207;                                                                                     5000104
000105+///                                                                                                                 5000105
000106+// Used inside a &lt;dav:propstat&gt; response element to avoid repeatedly enumerating                              5000106
000107+// the internal members of multiple bindings to the same collection.                                                5000107
000108+///                                                                                                                 5000108
000109+dcl-c IV_HTTP_ALREADY_REPORTED 208;                                                                                 5000109
000110+///                                                                                                                 5000110
000111+// The server has fulfilled a GET request for the resource, and the response is                                     5000111
000112+// a representation of the result of one or more instance-manipulations applied                                     5000112
000113+// to the current instance.                                                                                         5000113
000114+///                                                                                                                 5000114
000115+dcl-c IV_HTTP_IM_USED 226;                                                                                          5000115
000116+///                                                                                                                 5000116
000117+// The server could not understand the request due to invalid syntax.                                               5000117
000118+///                                                                                                                 5000118
000119+dcl-c IV_HTTP_BAD_REQUEST 400;                                                                                      5000119
000120+///                                                                                                                 5000120
000121+// Although the HTTP standard specifies "unauthorized", semantically this response                                  5000121
000122+// means "unauthenticated". That is, the client must authenticate itself to get                                     5000122
000123+// the requested response.                                                                                          5000123
000124+///                                                                                                                 5000124
000125+dcl-c IV_HTTP_UNAUTHORIZED 401;                                                                                     5000125
000126+///                                                                                                                 5000126
000127+// This response code is reserved for future use. The initial aim for creating                                      5000127
000128+// this code was using it for digital payment systems, however this status code                                     5000128
000129+// is used very rarely and no standard convention exists.                                                           5000129
000130+///                                                                                                                 5000130
000131+dcl-c IV_HTTP_PAYMENT_REQUIRED 402;                                                                                 5000131
000132+///                                                                                                                 5000132
000133+// The client does not have access rights to the content; that is, it is                                            5000133
000134+// unauthorized, so the server is refusing to give the requested resource.                                          5000134
000135+// Unlike 401, the client's identity is known to the server.                                                        5000135
000136+///                                                                                                                 5000136
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page      9
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000137+dcl-c IV_HTTP_FORBIDDEN 403;                                                                                        5000137
000138+///                                                                                                                 5000138
000139+// The server can not find the requested resource. In the browser, this means                                       5000139
000140+// the URL is not recognized. In an API, this can also mean that the endpoint is                                    5000140
000141+// valid but the resource itself does not exist. Servers may also send this                                         5000141
000142+// response instead of 403 to hide the existence of a resource from an                                              5000142
000143+// unauthorized client. This response code is probably the most famous one due                                      5000143
000144+// to its frequent occurrence on the web.                                                                           5000144
000145+///                                                                                                                 5000145
000146+dcl-c IV_HTTP_NOT_FOUND 404;                                                                                        5000146
000147+///                                                                                                                 5000147
000148+// The request method is known by the server but has been disabled and cannot be                                    5000148
000149+// used. For example, an API may forbid DELETE-ing a resource. The two mandatory                                    5000149
000150+// methods, GET and HEAD, must never be disabled and should not return this error                                   5000150
000151+// code.                                                                                                            5000151
000152+///                                                                                                                 5000152
000153+dcl-c IV_HTTP_METHOD_NOT_ALLOWED 405;                                                                               5000153
000154+///                                                                                                                 5000154
000155+// This response is sent when the web server, after performing server-driven                                        5000155
000156+// content negotiation, doesn't find any content that conforms to the criteria                                      5000156
000157+// given by the user agent.                                                                                         5000157
000158+///                                                                                                                 5000158
000159+dcl-c IV_HTTP_NOT_ACCEPTABLE 406;                                                                                   5000159
000160+///                                                                                                                 5000160
000161+// This is similar to 401 but authentication is needed to be done by a proxy.                                       5000161
000162+///                                                                                                                 5000162
000163+dcl-c IV_HTTP_PROXY_AUTH_REQUIRED 407;                                                                              5000163
000164+///                                                                                                                 5000164
000165+// This response is sent on an idle connection by some servers, even without any                                    5000165
000166+// previous request by the client. It means that the server would like to shut                                      5000166
000167+// down this unused connection. This response is used much more since some                                          5000167
000168+// browsers, like Chrome, Firefox 27+, or IE9, use HTTP pre-connection mechanisms                                   5000168
000169+// to speed up surfing. Also note that some servers merely shut down the                                            5000169
000170+// connection without sending this message.                                                                         5000170
000171+///                                                                                                                 5000171
000172+dcl-c IV_HTTP_REQUEST_TIMEOUT 408;                                                                                  5000172
000173+///                                                                                                                 5000173
000174+// This response is sent when a request conflicts with the current state of the server.                             5000174
000175+///                                                                                                                 5000175
000176+dcl-c IV_HTTP_CONFLICT 409;                                                                                         5000176
000177+///                                                                                                                 5000177
000178+// This response is sent when the requested content has been permanently deleted                                    5000178
000179+// from server, with no forwarding address. Clients are expected to remove their                                    5000179
000180+// caches and links to the resource. The HTTP specification intends this status                                     5000180
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     10
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000181+// code to be used for "limited-time, promotional services". APIs should not feel                                   5000181
000182+// compelled to indicate resources that have been deleted with this status code.                                    5000182
000183+///                                                                                                                 5000183
000184+dcl-c IV_HTTP_GONE 410;                                                                                             5000184
000185+///                                                                                                                 5000185
000186+// Server rejected the request because the Content-Length header field is not                                       5000186
000187+// defined and the server requires it.                                                                              5000187
000188+///                                                                                                                 5000188
000189+dcl-c IV_HTTP_LENGTH_REQUIRED 411;                                                                                  5000189
000190+///                                                                                                                 5000190
000191+// The client has indicated preconditions in its headers which the server does not meet.                            5000191
000192+///                                                                                                                 5000192
000193+dcl-c IV_HTTP_PRECONDITION_FAILED 412;                                                                              5000193
000194+///                                                                                                                 5000194
000195+// Request entity is larger than limits defined by server; the server might                                         5000195
000196+// close the connection or return an Retry-After header field.                                                      5000196
000197+///                                                                                                                 5000197
000198+dcl-c IV_HTTP_PAYLOAD_TOO_LARGE 413;                                                                                5000198
000199+///                                                                                                                 5000199
000200+// The URI requested by the client is longer than the server is willing to interpret.                               5000200
000201+///                                                                                                                 5000201
000202+dcl-c IV_HTTP_REQUEST_URI_TOO_LONG 414;                                                                             5000202
000203+///                                                                                                                 5000203
000204+// The media format of the requested data is not supported by the server, so the                                    5000204
000205+// server is rejecting the request.                                                                                 5000205
000206+///                                                                                                                 5000206
000207+dcl-c IV_HTTP_UNSUPPORTED_MEDIA_TYPE 415;                                                                           5000207
000208+///                                                                                                                 5000208
000209+// The range specified by the Range header field in the request can't be                                            5000209
000210+// fulfilled; it's possible that the range is outside the size of the target                                        5000210
000211+// URI's data.                                                                                                      5000211
000212+///                                                                                                                 5000212
000213+dcl-c IV_HTTP_REQUESTED_RANGE_NOT_SATISFIABLE 416;                                                                  5000213
000214+///                                                                                                                 5000214
000215+// This response code means the expectation indicated by the Expect request                                         5000215
000216+// header field can't be met by the server.                                                                         5000216
000217+///                                                                                                                 5000217
000218+dcl-c IV_HTTP_EXPECTATION_FAILED 417;                                                                               5000218
000219+///                                                                                                                 5000219
000220+// The server refuses the attempt to brew coffee with a teapot.                                                     5000220
000221+///                                                                                                                 5000221
000222+dcl-c IV_HTTP_TEAPOT 418;                                                                                           5000222
000223+///                                                                                                                 5000223
000224+// The request was directed at a server that is not able to produce a response.                                     5000224
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     11
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000225+// This can be sent by a server that is not configured to produce responses for                                     5000225
000226+// the combination of scheme and authority that are included in the request URI.                                    5000226
000227+///                                                                                                                 5000227
000228+dcl-c IV_HTTP_MISDIRECTED_REQUEST 421;                                                                              5000228
000229+///                                                                                                                 5000229
000230+// The request was well-formed but was unable to be followed due to semantic errors.                                5000230
000231+///                                                                                                                 5000231
000232+dcl-c IV_HTTP_UNPROCESSABLE_ENTITY 422;                                                                             5000232
000233+///                                                                                                                 5000233
000234+// The resource that is being accessed is locked.                                                                   5000234
000235+///                                                                                                                 5000235
000236+dcl-c IV_HTTP_LOCKED 423;                                                                                           5000236
000237+///                                                                                                                 5000237
000238+// The request failed due to failure of a previous request.                                                         5000238
000239+///                                                                                                                 5000239
000240+dcl-c IV_HTTP_FAILED_DEPENDENCY 424;                                                                                5000240
000241+///                                                                                                                 5000241
000242+// Indicates that the server is unwilling to risk processing a request that                                         5000242
000243+// might be replayed.                                                                                               5000243
000244+///                                                                                                                 5000244
000245+dcl-c IV_HTTP_TOO_EARLY 425;                                                                                        5000245
000246+///                                                                                                                 5000246
000247+// The server refuses to perform the request using the current protocol but                                         5000247
000248+// might be willing to do so after the client upgrades to a different protocol.                                     5000248
000249+// The server sends an Upgrade header in a 426 response to indicate the required                                    5000249
000250+// protocol(s).                                                                                                     5000250
000251+///                                                                                                                 5000251
000252+dcl-c IV_HTTP_UPGRADE_REQUIRED 426;                                                                                 5000252
000253+///                                                                                                                 5000253
000254+// The origin server requires the request to be conditional. This response is                                       5000254
000255+// intended to prevent the 'lost update' problem, where a client GETs a                                             5000255
000256+// resource's state, modifies it, and PUTs it back to the server, when meanwhile                                    5000256
000257+// a third party has modified the state on the server, leading to a conflict.                                       5000257
000258+///                                                                                                                 5000258
000259+dcl-c IV_HTTP_PRECONDITION_REQUIRED 428;                                                                            5000259
000260+///                                                                                                                 5000260
000261+// The user has sent too many requests in a given amount of time ("rate limiting").                                 5000261
000262+///                                                                                                                 5000262
000263+dcl-c IV_HTTP_TOO_MANY_REQUESTS 429;                                                                                5000263
000264+///                                                                                                                 5000264
000265+// The server is unwilling to process the request because its header fields are                                     5000265
000266+// too large. The request may be resubmitted after reducing the size of the                                         5000266
000267+// request header fields.                                                                                           5000267
000268+///                                                                                                                 5000268
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     12
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000269+dcl-c IV_HTTP_REQUEST_HEADER_FIELDS_TOO_LARGE 431;                                                                  5000269
000270+///                                                                                                                 5000270
000271+// The user-agent requested a resource that cannot legally be provided, such as                                     5000271
000272+// a web page censored by a government.                                                                             5000272
000273+///                                                                                                                 5000273
000274+dcl-c IV_HTTP_UNAVAILABLE_FOR_LEGAL_REASONS 451;                                                                    5000274
000275+///                                                                                                                 5000275
000276+// The server has encountered a situation it doesn't know how to handle.                                            5000276
000277+///                                                                                                                 5000277
000278+dcl-c IV_HTTP_INTERNAL_SERVER_ERROR 500;                                                                            5000278
000279+///                                                                                                                 5000279
000280+// The request method is not supported by the server and cannot be handled.                                         5000280
000281+// The only methods that servers are required to support (and therefore that                                        5000281
000282+// must not return this code) are GET and HEAD.                                                                     5000282
000283+///                                                                                                                 5000283
000284+dcl-c IV_HTTP_NOT_IMPLEMENTED 501;                                                                                  5000284
000285+///                                                                                                                 5000285
000286+// This error response means that the server, while working as a gateway to get                                     5000286
000287+// a response needed to handle the request, got an invalid response.                                                5000287
000288+///                                                                                                                 5000288
000289+dcl-c IV_HTTP_BAD_GATEWAY 502;                                                                                      5000289
000290+///                                                                                                                 5000290
000291+// The server is not ready to handle the request. Common causes are a server                                        5000291
000292+// that is down for maintenance or that is overloaded. Note that together with                                      5000292
000293+// this response, a user-friendly page explaining the problem should be sent.                                       5000293
000294+// This responses should be used for temporary conditions and the Retry-After:                                      5000294
000295+// HTTP header should, if possible, contain the estimated time before the                                           5000295
000296+// recovery of the service. The webmaster must also take care about the                                             5000296
000297+// caching-related headers that are sent along with this response, as these                                         5000297
000298+// temporary condition responses should usually not be cached.                                                      5000298
000299+///                                                                                                                 5000299
000300+dcl-c IV_HTTP_SERVICE_UNAVAILABLE 503;                                                                              5000300
000301+///                                                                                                                 5000301
000302+// This error response is given when the server is acting as a gateway and                                          5000302
000303+// cannot get a response in time.                                                                                   5000303
000304+///                                                                                                                 5000304
000305+dcl-c IV_HTTP_GATEWAY_TIMEOUT 504;                                                                                  5000305
000306+///                                                                                                                 5000306
000307+// The HTTP version used in the request is not supported by the server.                                             5000307
000308+///                                                                                                                 5000308
000309+dcl-c IV_HTTP_VERSION_NOT_SUPPORTED 505;                                                                            5000309
000310+///                                                                                                                 5000310
000311+// The server has an internal configuration error: the chosen variant resource                                      5000311
000312+// is configured to engage in transparent content negotiation itself, and is                                        5000312
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     13
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000313+// therefore not a proper end point in the negotiation process.                                                     5000313
000314+///                                                                                                                 5000314
000315+dcl-c IV_HTTP_VARIANT_ALSO_NEGOTIATES 506;                                                                          5000315
000316+///                                                                                                                 5000316
000317+// The method could not be performed on the resource because the server is                                          5000317
000318+// unable to store the representation needed to successfully complete the request.                                  5000318
000319+///                                                                                                                 5000319
000320+dcl-c IV_HTTP_INSUFFICIENT_STORAGE 507;                                                                             5000320
000321+///                                                                                                                 5000321
000322+// The server detected an infinite loop while processing the request.                                               5000322
000323+///                                                                                                                 5000323
000324+dcl-c IV_HTTP_LOOP_DETECTED 508;                                                                                    5000324
000325+///                                                                                                                 5000325
000326+// Further extensions to the request are required for the server to fulfil it.                                      5000326
000327+///                                                                                                                 5000327
000328+dcl-c IV_HTTP_NOT_EXTENDED 510;                                                                                     5000328
000329+///                                                                                                                 5000329
000330+// The 511 status code indicates that the client needs to authenticate to gain                                      5000330
000331+// network access.                                                                                                  5000331
000332+///                                                                                                                 5000332
000333+dcl-c IV_HTTP_NETWORK_AUTH_REQUIRED 511;                                                                            5000333
000334+                                                                                                                    5000334
000335+                                                                                                                    5000335
000336+///                                                                                                                 5000336
000337+// Any media type.                                                                                                  5000337
000338+///                                                                                                                 5000338
000339+dcl-c IV_MEDIA_TYPE_ALL '*/*';                                                                                      5000339
000340+///                                                                                                                 5000340
000341+// Default format for JSON data.                                                                                    5000341
000342+///                                                                                                                 5000342
000343+dcl-c IV_MEDIA_TYPE_JSON 'application/json';                                                                        5000343
000344+///                                                                                                                 5000344
000345+// Default format for XML data.                                                                                     5000345
000346+///                                                                                                                 5000346
000347+dcl-c IV_MEDIA_TYPE_XML 'application/xml';                                                                          5000347
000348+                                                                                                                    5000348
000349+                                                                                                                    5000349
000350+///                                                                                                                 5000350
000351+// create a new  http client                                                                                        5000351
000352+//                                                                                                                  5000352
000353+// Returns pointer to the client                                                                                    5000353
000354+//                                                                                                                  5000354
000355+// Øreturn pointer to the client                                                                                    5000355
000356+///                                                                                                                 5000356
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     14
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000357+dcl-pr iv_newHttpClient pointer extproc(*dclcase);                                                                  5000357
000358+end-pr;                                                                                                             5000358
000359+                                                                                                                    5000359
000360+                                                                                                                    5000360
000361+///                                                                                                                 5000361
000362+// Disconnect and cleanup memory of the client                                                                      5000362
000363+//                                                                                                                  5000363
000364+// Øparam HTTP client                                                                                               5000364
000365+//                                                                                                                  5000365
000366+///                                                                                                                 5000366
000367+dcl-pr iv_free extproc(*dclcase);                                                                                   5000367
000368+    client pointer value;                                                                                           5000368
000369+end-pr;                                                                                                             5000369
000370+                                                                                                                    5000370
000371+                                                                                                                    5000371
000372+///                                                                                                                 5000372
000373+// buffer types                                                                                                     5000373
000374+///                                                                                                                 5000374
000375+dcl-c IV_BYTES 0;                                                                                                   5000375
000376+dcl-c IV_VARCHAR2 1;                                                                                                5000376
000377+dcl-c IV_VARCHAR4 2;                                                                                                5000377
000378+                                                                                                                    5000378
000379+///                                                                                                                 5000379
000380+// Conversion - named values; more exists                                                                           5000380
000381+///                                                                                                                 5000381
000382+dcl-c IV_CCSID_JOB     0;                                                                                           5000382
000383+dcl-c IV_CCSID_UTF8    1208;                                                                                        5000383
000384+dcl-c IV_CCSID_WIN1252 1252;                                                                                        5000384
000385+dcl-c IV_CCSID_BINARY  65535;                                                                                       5000385
000386+                                                                                                                    5000386
000387+///                                                                                                                 5000387
000388+// Set the buffer where the header buffer is placed                                                                 5000388
000389+//                                                                                                                  5000389
000390+//                                                                                                                  5000390
000391+// Øparam pClient pointer to the http client                                                                        5000391
000392+// Øparam pointer to buffer                                                                                         5000392
000393+// Øparam size    size of buffer ( bytes in total)                                                                  5000393
000394+// Øparam buffer  type  0=Byte buffer, 1=varchar2, 2=varchar4                                                       5000394
000395+// Øparam ccsid   Any ccsid, 0=Current job, 65535=no xlate, 1208=UTF-8                                              5000395
000396+///                                                                                                                 5000396
000397+dcl-pr iv_setRequestHeaderBuffer extproc(*dclcase);                                                                 5000397
000398+    pClient       pointer value;                                                                                    5000398
000399+    pBuffer       pointer value;                                                                                    5000399
000400+    bufferSize    int(10) value;                                                                                    5000400
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     15
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000401+    bufferType    int(5) value;                                                                                     5000401
000402+    bufferCcsid   int(10) value;                                                                                    5000402
000403+end-pr;                                                                                                             5000403
000404+                                                                                                                    5000404
000405+///                                                                                                                 5000405
000406+// Set the buffer where the header data (POST)  is placed                                                           5000406
000407+//                                                                                                                  5000407
000408+//                                                                                                                  5000408
000409+// Øparam pClient pointer to the http client                                                                        5000409
000410+// Øparam pointer to buffer                                                                                         5000410
000411+// Øparam size    size of buffer ( bytes in total)                                                                  5000411
000412+// Øparam buffer  type  0=Byte buffer, 1=varchar2, 2=varchar4                                                       5000412
000413+// Øparam ccsid   Any ccsid, 0=Current job, 65535=no xlate, 1208=UTF-8                                              5000413
000414+///                                                                                                                 5000414
000415+dcl-pr iv_setRequestDataBuffer extproc(*dclcase);                                                                   5000415
000416+    pClient       pointer value;                                                                                    5000416
000417+    pBuffer       pointer value;                                                                                    5000417
000418+    bufferSize    int(10) value;                                                                                    5000418
000419+    bufferType    int(5) value;                                                                                     5000419
000420+    bufferCcsid   int(10) value;                                                                                    5000420
000421+end-pr;                                                                                                             5000421
000422+                                                                                                                    5000422
000423+///                                                                                                                 5000423
000424+// Set the buffer where the  response header is received                                                            5000424
000425+//                                                                                                                  5000425
000426+//                                                                                                                  5000426
000427+// Øparam pClient pointer to the http client                                                                        5000427
000428+// Øparam pointer to buffer                                                                                         5000428
000429+// Øparam size    size of buffer ( bytes in total)                                                                  5000429
000430+// Øparam buffer  type  0=Byte buffer, 1=varchar2, 2=varchar4                                                       5000430
000431+// Øparam ccsid   Any ccsid, 0=Current job, 65535=no xlate, 1208=UTF-8                                              5000431
000432+///                                                                                                                 5000432
000433+dcl-pr iv_setResponseHeaderBuffer extproc(*dclcase);                                                                5000433
000434+    pClient       pointer value;                                                                                    5000434
000435+    pBuffer       pointer value;                                                                                    5000435
000436+    bufferSize    int(10) value;                                                                                    5000436
000437+    bufferType    int(5) value;                                                                                     5000437
000438+    bufferCcsid   int(10) value;                                                                                    5000438
000439+end-pr;                                                                                                             5000439
000440+                                                                                                                    5000440
000441+///                                                                                                                 5000441
000442+// Set the buffer where the  response data (payload) is received                                                    5000442
000443+//                                                                                                                  5000443
000444+//                                                                                                                  5000444
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     16
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000445+// Øparam pClient pointer to the http client                                                                        5000445
000446+// Øparam pointer to buffer                                                                                         5000446
000447+// Øparam size    size of buffer ( bytes in total)                                                                  5000447
000448+// Øparam buffer  type  0=Byte buffer, 1=varchar2, 2=varchar4                                                       5000448
000449+// Øparam ccsid   Any ccsid, 0=Current job, 65535=no xlate, 1208=UTF-8                                              5000449
000450+///                                                                                                                 5000450
000451+dcl-pr iv_setResponseDataBuffer extproc(*dclcase);                                                                  5000451
000452+    pClient       pointer value;                                                                                    5000452
000453+    pBuffer       pointer value;                                                                                    5000453
000454+    bufferSize    int(10) value;                                                                                    5000454
000455+    bufferType    int(5) value;                                                                                     5000455
000456+    bufferCcsid   int(10) value;                                                                                    5000456
000457+end-pr;                                                                                                             5000457
000458+                                                                                                                    5000458
000459+///                                                                                                                 5000459
000460+// Set the output files for the response                                                                            5000460
000461+//                                                                                                                  5000461
000462+//                                                                                                                  5000462
000463+// Øparam pClient  pointer to the http client                                                                       5000463
000464+// Øparam fileName pointer to name of IFS file                                                                      5000464
000465+// Øparam ccsid    optional: file ccsid                                                                             5000465
000466+///                                                                                                                 5000466
000467+dcl-pr iv_setResponseFile extproc(*dclcase);                                                                        5000467
000468+    client        pointer value;                                                                                    5000468
000469+    fileName      pointer options(*string) value;                                                                   5000469
000470+    fileCcsid     int(10)  options(*nopass) value;                                                                  5000470
000471+end-pr;                                                                                                             5000471
000472+                                                                                                                    5000472
000473+///                                                                                                                 5000473
000474+// run the request                                                                                                  5000474
000475+// Øreturn *ON if ok                                                                                                5000475
000476+///                                                                                                                 5000476
000477+dcl-pr iv_execute ind extproc(*dclcase);                                                                            5000477
000478+    client  pointer value;                                                                                          5000478
000479+    method  pointer options(*string) value;                                                                         5000479
000480+    url     pointer options(*string) value;                                                                         5000480
000481+    timeOut int(10) options(*nopass) value; // In milisec. 30000 is default                                         5000481
000482+    retries int(10) options(*nopass) value; // retry n times. 3 is default                                          5000482
000483+end-pr;                                                                                                             5000483
000484+                                                                                                                    5000484
000485+                                                                                                                    5000485
000486+///                                                                                                                 5000486
000487+// Set the certificate for HTTPS                                                                                    5000487
000488+// Øreturn *ON if ok                                                                                                5000488
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     17
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000489+///                                                                                                                 5000489
000490+dcl-pr iv_setCertificate ind extproc(*dclcase);                                                                     5000490
000491+    client              pointer value;                                                                              5000491
000492+    certificateFile     pointer options(*string) value;                                                             5000492
000493+    certificatePassword pointer options(*string:*nopass) value;                                                     5000493
000494+end-pr;                                                                                                             5000494
000495+                                                                                                                    5000495
000496+///                                                                                                                 5000496
000497+// returns the http status code                                                                                     5000497
000498+//                                                                                                                  5000498
000499+//                                                                                                                  5000499
000500+// Øparam  pointer to the http client                                                                               5000500
000501+// Øreturn pointer to the client                                                                                    5000501
000502+///                                                                                                                 5000502
000503+dcl-pr iv_getStatus int(5) extproc(*CWIDEN:'iv_getStatus');                                                         5000503
000504+    pClient       pointer value;                                                                                    5000504
000505+end-pr;                                                                                                             5000505
000506+                                                                                                                    5000506
000507+///                                                                                                                 5000507
000508+// returns the http error messages                                                                                  5000508
000509+//                                                                                                                  5000509
000510+//                                                                                                                  5000510
000511+// Øparam  pointer to the http client                                                                               5000511
000512+// Øreturn message from the http request                                                                            5000512
000513+///                                                                                                                 5000513
000514+dcl-pr iv_getMessage varchar(256)  extproc(*CWIDEN:'iv_getMessage');                                                5000514
000515+    pClient       pointer value;                                                                                    5000515
000516+end-pr;                                                                                                             5000516
000517+                                                                                                                    5000517
000518+///                                                                                                                 5000518
000519+// Set authentication provider                                                                                      5000519
000520+//                                                                                                                  5000520
000521+// Sets the passed authentication provider on the HTTP client.                                                      5000521
000522+//                                                                                                                  5000522
000523+// Øparam HTTP Client                                                                                               5000523
000524+// Øparam Authentication provider                                                                                   5000524
000525+///                                                                                                                 5000525
000526+dcl-pr iv_setAuthProvider extproc(*dclcase);                                                                        5000526
000527+  client pointer value;                                                                                             5000527
000528+  authProvider pointer value;                                                                                       5000528
000529+end-pr;                                                                                                             5000529
000530+                                                                                                                    5000530
000531+                                                                                                                    5000531
000532+///                                                                                                                 5000532
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     18
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000533+// Base64 decode value                                                                                              5000533
000534+//                                                                                                                  5000534
000535+// Decodes a base64 encoded string.                                                                                 5000535
000536+//                                                                                                                  5000536
000537+// Øparam Encoded string                                                                                            5000537
000538+// Øreturn Decoded string                                                                                           5000538
000539+//                                                                                                                  5000539
000540+// Øinfo The character encoding for the original value is expected to be UTF-8.                                     5000540
000541+///                                                                                                                 5000541
000542+dcl-pr iv_decodeBase64 varchar(2097152:4) ccsid(*utf8) extproc(*CWIDEN : 'iv_decodeBase64') rtnparm;                5000542
000543+  string varchar(2097152:4) ccsid(*utf8) options(*varsize) const;                                                   5000543
000544+end-pr;                                                                                                             5000544
000545+                                                                                                                    5000545
000546+///                                                                                                                 5000546
000547+// Base64 encoding value                                                                                            5000547
000548+//                                                                                                                  5000548
000549+// Encodes a string into base64 .                                                                                   5000549
000550+//                                                                                                                  5000550
000551+// Øparam string to encode                                                                                          5000551
000552+// Øreturn Encoded string                                                                                           5000552
000553+//                                                                                                                  5000553
000554+// Øinfo The character encoding for the original value is expected to be UTF-8.                                     5000554
000555+///                                                                                                                 5000555
000556+dcl-pr iv_encodeBase64 varchar(2097152:4) ccsid(*utf8) extproc(*CWIDEN : 'iv_encodeBase64') rtnparm;                5000556
000557+  string varchar(2097152:4) ccsid(*utf8) options(*varsize) const;                                                   5000557
000558+end-pr;                                                                                                             5000558
000559+                                                                                                                    5000559
000560+///                                                                                                                 5000560
000561+// Add message to job log                                                                                           5000561
000562+//                                                                                                                  5000562
000563+// Convenience function: put message in joblog.                                                                     5000563
000564+// Works like printf but with strings only like                                                                     5000564
000565+//                                                                                                                  5000565
000566+//    iv_joblog('This is %s a test' : 'super');                                                                     5000566
000567+//                                                                                                                  5000567
000568+// Øparam message string                                                                                            5000568
000569+///                                                                                                                 5000569
000570+dcl-pr iv_joblog extproc(*CWIDEN : 'iv_joblog') ;                                                                   5000570
000571+  message varchar(512) options(*varsize)  const ;                                                                   5000571
000572+end-pr;                                                                                                             5000572
000573+                                                                                                                    5000573
000574+dcl-pr iv_setTrace extproc(*CWIDEN : 'iv_setTraces') ;                                                              5000574
000575+    client    pointer value;                                                                                        5000575
000576+    traceFile pointer options(*string) value;                                                                       5000576
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     19
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000577+end-pr;                                                                                                             5000577
000578+                                                                                                                    5000578
000579+                                                                                                                    5000579
000580+///                                                                                                                 5000580
000581+//                                                                                                                  5000581
000582+// Convenience function: convert varchar ccsid                                                                      5000582
000583+//                                                                                                                  5000583
000584+///                                                                                                                 5000584
000585+dcl-pr iv_xlateVc varchar(32768:2) ccsid(65535) extproc(*CWIDEN : 'iv_xlateVc') rtnparm;                            5000585
000586+  inoutString varchar(32768:2) ccsid(65535) options(*varsize) const;                                                5000586
000587+  fromCCSID int(10) value;                                                                                          5000587
000588+  toCCSID   int(10) value;                                                                                          5000588
000589+end-pr;                                                                                                             5000589
000590+                                                                                                                    5000590
000591+                                                                                                                    5000591
000592+///                                                                                                                 5000592
000593+//                                                                                                                  5000593
000594+// Convenience function: convert long varchar ccsid                                                                 5000594
000595+//                                                                                                                  5000595
000596+///                                                                                                                 5000596
000597+dcl-pr iv_xlateLvc varchar(2097152:4) ccsid(65535) extproc(*CWIDEN : 'iv_xlateLvc') rtnparm;                        5000597
000598+    inoutString varchar(2097152:4) ccsid(65535) options(*varsize) const;                                            5000598
000599+    fromCCSID int(10) value;                                                                                        5000599
000600+    toCCSID   int(10) value;                                                                                        5000600
000601+end-pr;                                                                                                             5000601
000602+                                                                                                                    5000602
000603+                                                                                                                    5000603
000604+dcl-pr iv_get varchar(IV_BUFFER_SIZE:4) ccsid(1208) extproc(*dclcase) rtnparm;                                      5000604
000605+    url varchar(IV_URL_SIZE:2) value;                                                                               5000605
000606+    acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                              5000606
000607+    headers pointer value options(*nopass);                                                                         5000607
000608+end-pr;                                                                                                             5000608
000609+                                                                                                                    5000609
000610+                                                                                                                    5000610
000611+dcl-pr iv_addHeader extproc(*dclcase);                                                                              5000611
000612+    client pointer value;                                                                                           5000612
000613+    headerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8) value;                                                   5000613
000614+    headerValue varchar(IV_HEADER_VALUE_SIZE:2) ccsid(*utf8) value;                                                 5000614
000615+end-pr;                                                                                                             5000615
000616+                                                                                                                    5000616
000617+                                                                                                                    5000617
000618+dcl-pr iv_addHeaders extproc(*dclcase);                                                                             5000618
000619+    client pointer value;                                                                                           5000619
000620+    headers pointer value;                                                                                          5000620
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     20
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000621+end-pr;                                                                                                             5000621
000010 /include 'libc.rpginc'                                                                                               000010
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  libc.rpgi+                                                   *                     6
        * External name  . . . . . . :  ext/headers/libc.rpginc                                      *                     6
        * Last change  . . . . . . . :  11-05-23  09:27:17                                           *                     6
        *--------------------------------------------------------------------------------------------*
000001+ /if not defined(QUSEC)                                                                                             6000001
000002+ /define QUSEC                                                                                                      6000002
000003+ /copy QSYSINC/QRPGLESRC,QUSEC                                                                                      6000003
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  QUSEC                                                        *                     7
        * External name  . . . . . . :  QSYSINC/QRPGLESRC(QUSEC)                                     *                     7
        * Last change  . . . . . . . :  06-10-13  13:02:50                                           *                     7
        * Text 'description' . . . . :  COMMON STRUCTURE FOR ERROR CODE PARAMETER                    *                     7
        *--------------------------------------------------------------------------------------------*
000001+D*** START HEADER FILE SPECIFICATIONS ****************************                                        000000    7000001
000002+D*                                                                                                        000000    7000002
000003+D*Header File Name: H/QUSEC                                                                               000000    7000003
000004+D*                                                                                                        000000    7000004
000005+D*Descriptive Name: Error Code Parameter.                                                                 000000    7000005
000006+D*                                                                                                        000000    7000006
000007+D*5763-SS1, 5722-SS1 (C) Copyright IBM Corp. 1994, 2001.                                                  000000    7000007
000008+D*All rights reserved.                                                                                    000000    7000008
000009+D*US Government Users Restricted Rights -                                                                 000000    7000009
000010+D*Use, duplication or disclosure restricted                                                               000000    7000010
000011+D*by GSA ADP Schedule Contract with IBM Corp.                                                             000000    7000011
000012+D*                                                                                                        000000    7000012
000013+D*Licensed Materials-Property of IBM                                                                      000000    7000013
000014+D*                                                                                                        000000    7000014
000015+D*                                                                                                        000000    7000015
000016+D*Description: Include header file for the error code parameter.                                          000000    7000016
000017+D*                                                                                                        000000    7000017
000018+D*Header Files Included: None.                                                                            000000    7000018
000019+D*                                                                                                        000000    7000019
000020+D*Macros List: None.                                                                                      000000    7000020
000021+D*                                                                                                        000000    7000021
000022+D*Structure List: Qus_EC_t                                                                                000000    7000022
000023+D*             Qus_ERRC0200_t                                                                             000000    7000023
000024+D*                                                                                                        000000    7000024
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     21
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000025+D*Function Prototype List: None.                                                                          000000    7000025
000026+D*                                                                                                        000000    7000026
000027+D*Change Activity:                                                                                        000000    7000027
000028+D*                                                                                                        000000    7000028
000029+D*CFD List:                                                                                               000000    7000029
000030+D*                                                                                                        000000    7000030
000031+D*FLAG REASON       LEVEL DATE   PGMR      CHANGE DESCRIPTION                                             000000    7000031
000032+D*---- ------------ ----- ------ --------- ----------------------                                         000000    7000032
000033+D*                                                                                                        000000    7000033
000034+D*End CFD List.                                                                                           000000    7000034
000035+D*                                                                                                        000000    7000035
000036+D*Additional notes about the Change Activity                                                              000000    7000036
000037+D*End Change Activity.                                                                                    000000    7000037
000038+D*** END HEADER FILE SPECIFICATIONS ******************************                                        000000    7000038
000039+D*****************************************************************                                        000000    7000039
000040+D*Record structure for Error Code Parameter                                                               000000    7000040
000041+D****                                                          ***                                        000000    7000041
000042+D*NOTE: The following type definition only defines the fixed                                              000000    7000042
000043+D*   portion of the format.  Varying length field Exception                                               000000    7000043
000044+D*   Data will not be defined here.                                                                       000000    7000044
000045+D*****************************************************************                                        000000    7000045
000046+DQUSEC            DS                                                                                      000000    7000046
000047+D*                                             Qus EC                                                     000000    7000047
000048+D QUSBPRV                 1      4I 0                                                                     000000    7000048
000049+D*                                             Bytes Provided                                             000000    7000049
000050+D QUSBAVL                 5      8I 0                                                                     000000    7000050
000051+D*                                             Bytes Available                                            000000    7000051
000052+D QUSEI                   9     15                                                                        000000    7000052
000053+D*                                             Exception Id                                               000000    7000053
000054+D QUSERVED               16     16                                                                        000000    7000054
000055+D*                                             Reserved                                                   000000    7000055
000056+D*QUSED01                17     17                                                                        000000    7000056
000057+D*                                                                                                        000000    7000057
000058+D*                                      Varying length                                                    000000    7000058
000059+DQUSC0200         DS                                                                                      000000    7000059
000060+D*                                             Qus ERRC0200                                               000000    7000060
000061+D QUSK01                  1      4I 0                                                                     000000    7000061
000062+D*                                             Key                                                        000000    7000062
000063+D QUSBPRV00               5      8I 0                                                                     000000    7000063
000064+D*                                             Bytes Provided                                             000000    7000064
000065+D QUSBAVL14               9     12I 0                                                                     000000    7000065
000066+D*                                             Bytes Available                                            000000    7000066
000067+D QUSEI00                13     19                                                                        000000    7000067
000068+D*                                             Exception Id                                               000000    7000068
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     22
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000069+D QUSERVED39             20     20                                                                        000000    7000069
000070+D*                                             Reserved                                                   000000    7000070
000071+D QUSCCSID11             21     24I 0                                                                     000000    7000071
000072+D*                                             CCSID                                                      000000    7000072
000073+D QUSOED01               25     28I 0                                                                     000000    7000073
000074+D*                                             Offset Exc Data                                            000000    7000074
000075+D QUSLED01               29     32I 0                                                                     000000    7000075
000076+D*                                             Length Exc Data                                            000000    7000076
000077+D*QUSRSV214              33     33                                                                        000000    7000077
000078+D*                                             Reserved2                                                  000000    7000078
000079+D*                                                                                                        000000    7000079
000080+D*QUSED02                34     34                                                                        000000    7000080
000081+D*                                                                                                        000000    7000081
000082+D*                                      Varying Length    ØB1A                                            000000    7000082
000004+ /endif                                                                                                             6000004
000005+                                                                                                                    6000005
000006+ /if defined (LIBC)                                                                                                 6000006
            LINES EXCLUDED: 1
000008+ /endif                                                                                                             6000008
000009+                                                                                                                    6000009
000010+ /define LIBC                                                                                                       6000010
000011+                                                                                                                    6000011
000012+ *-------------------------------------------------------------------------                                         6000012
000013+ * Prototypes for C-Functions                                                                                       6000013
000014+ *-------------------------------------------------------------------------                                         6000014
000015+ *                                                                                                                  6000015
000016+ * string functions                                                                                                 6000016
000017+ *                                                                                                                  6000017
000018+D strtok          PR              *   extproc('strtok')                                                             6000018
000019+D  i_string                       *   value  options(*string)                                                       6000019
000020+D  i_token                        *   value  options(*string)                                                       6000020
000021+ *                                                                                                                  6000021
000022+D strlen          PR            10U 0 extproc('strlen')                                                             6000022
000023+D   string                        *   value                                                                         6000023
000024+ *                                                                                                                  6000024
000025+D strcmp          PR            10I 0 extproc('strcmp')                                                             6000025
000026+D  string1                        *   value                                                                         6000026
000027+D  string2                        *   value                                                                         6000027
000028+ *                                                                                                                  6000028
000029+D strncmp         PR            10I 0 extproc('strncmp')                                                            6000029
000030+D  string1                        *   value                                                                         6000030
000031+D  string2                        *   value                                                                         6000031
000032+D  count                        10I 0 value                                                                         6000032
000033+ *                                                                                                                  6000033
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     23
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000034+D strcmpi         PR            10I 0 extproc('strcmpi')                                                            6000034
000035+D  string1                        *   value                                                                         6000035
000036+D  string2                        *   value                                                                         6000036
000037+ *                                                                                                                  6000037
000038+D strcasecmp      PR            10I 0 extproc('strcasecmp')                                                         6000038
000039+D  string1                        *   value                                                                         6000039
000040+D  string2                        *   value                                                                         6000040
000041+ *                                                                                                                  6000041
000042+D strncasecmp     PR            10I 0 extproc('strncasecmp')                                                        6000042
000043+D  string1                        *   value                                                                         6000043
000044+D  string2                        *   value                                                                         6000044
000045+D  count                        10I 0 value                                                                         6000045
000046+ *                                                                                                                  6000046
000047+D strstr          PR              *   extproc('strstr')                                                             6000047
000048+D  string1                        *   value                                                                         6000048
000049+D  string2                        *   value                                                                         6000049
000050+ *                                                                                                                  6000050
000051+D strcspn         PR            10I 0 extproc('strcspn')                                                            6000051
000052+D  string1                        *   value                                                                         6000052
000053+D  string2                        *   value                                                                         6000053
000054+ *                                                                                                                  6000054
000055+D requestControlBlockLower...                                                                                       6000055
000056+D                 DS                  qualified                                                                     6000056
000057+D   type                        10I 0 inz(0)                                                                        6000057
000058+D   ccsid                       10I 0 inz(0)                                                                        6000058
000059+D   case                        10I 0 inz(0)                                                                        6000059
000060+D   res1                        10A   inz(*ALLX'00')                                                                6000060
000061+ *                                                                                                                  6000061
000062+D requestControlBlockUpper...                                                                                       6000062
000063+D                 DS                  qualified                                                                     6000063
000064+D   type                        10I 0 inz(1)                                                                        6000064
000065+D   ccsid                       10I 0 inz(0)                                                                        6000065
000066+D   case                        10I 0 inz(0)                                                                        6000066
000067+D   res1                        10A   inz(*ALLX'00')                                                                6000067
000068+ *                                                                                                                  6000068
000069+D convertCase     PR                  extproc('QlgConvertCase')                                                     6000069
000070+D   reqContBlock                      const                                                                         6000070
000071+D                                     likeds(requestControlBlockUpper)                                              6000071
000072+D   input                     1024A   const options(*varsize)                                                       6000072
000073+D   output                    1024A   options(*varsize)                                                             6000073
000074+D   len                         10I 0 const                                                                         6000074
000075+D   errorcode                         likeds(QUSEC) options(*varsize)                                               6000075
000076+                                                                                                                    6000076
000077+ *                                                                                                                  6000077
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     24
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000078+ * memory functions                                                                                                 6000078
000079+ *                                                                                                                  6000079
000080+D memcpy          PR              *          extproc('memcpy')                                                      6000080
000081+D  dest                           *   value                                                                         6000081
000082+D  source                         *   value                                                                         6000082
000083+D  count                        10U 0 value                                                                         6000083
000084+ *                                                                                                                  6000084
000085+D memset          PR              *          extproc('memset')                                                      6000085
000086+D  i_pDest                        *   value                                                                         6000086
000087+D  i_char                       10I 0 value                                                                         6000087
000088+D  i_count                      10U 0 value                                                                         6000088
000089+ *                                                                                                                  6000089
000090+D memmove         PR              *          extproc('memmove')                                                     6000090
000091+D  pMemDest                       *   value                                                                         6000091
000092+D  pMemSrc                        *   value                                                                         6000092
000093+D  memSize                      10U 0 value                                                                         6000093
000094+ *                                                                                                                  6000094
000095+D memcmp          PR            10I 0        extproc('memcmp')                                                      6000095
000096+D  pBuf1                          *   value                                                                         6000096
000097+D  pBuf2                          *   value                                                                         6000097
000098+D  count                        10U 0 value                                                                         6000098
000099+ *                                                                                                                  6000099
000100+D memicmp         PR            10I 0        extproc('__memicmp')                                                   6000100
000101+D  pBuf1                          *   value                                                                         6000101
000102+D  pBuf2                          *   value                                                                         6000102
000103+D  count                        10U 0 value                                                                         6000103
000104+                                                                                                                    6000104
000105+ *                                                                                                                  6000105
000106+ * math functions                                                                                                   6000106
000107+ *                                                                                                                  6000107
000108+D ceiling         PR             8F   extproc('ceil')                                                               6000108
000109+D   value                        8F   value                                                                         6000109
000110+ *                                                                                                                  6000110
000111+D floor           PR             8F   extproc('floor')                                                              6000111
000112+D   value                        8F   value                                                                         6000112
000113+                                                                                                                    6000113
000114+ *                                                                                                                  6000114
000115+ * other functions                                                                                                  6000115
000116+ *                                                                                                                  6000116
000117+D tmpnam          PR              *   extproc('tmpnam')                                                             6000117
000118+D   buffer                      39A   options(*omit)                                                                6000118
000119+ *                                                                                                                  6000119
000120+D tmpnamIFS       PR              *   extproc('_C_IFS_tmpnam')                                                      6000120
000121+D   buffer                      39A   options(*omit)                                                                6000121
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     25
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000122+ *                                                                                                                  6000122
000123+D system          PR            10I 0 extproc('system')                                                             6000123
000124+D   command                       *   value options(*string)                                                        6000124
000125+ *                                                                                                                  6000125
000126+D srand           PR                         extproc('srand')                                                       6000126
000127+D  i_seed                       10U 0 value                                                                         6000127
000128+ *                                                                                                                  6000128
000129+D rand            PR            10I 0        extproc('rand')                                                        6000129
000130+ *                                                                                                                  6000130
000131+D qsort           PR              *          extproc('qsort')                                                       6000131
000132+D  memPtr                         *   value                                                                         6000132
000133+D  numElem                      10U 0 value                                                                         6000133
000134+D  width                        10U 0 value                                                                         6000134
000135+D  pSortFunc                      *   value  procptr                                                                6000135
000136+ *                                                                                                                  6000136
000137+D bsearch         PR              *          extproc('bsearch')                                                     6000137
000138+D  keyPtr                         *   value                                                                         6000138
000139+D  memPtr                         *   value                                                                         6000139
000140+D  numElem                      10U 0 value                                                                         6000140
000141+D  width                        10U 0 value                                                                         6000141
000142+D  pSearchFnc                     *   value  procptr                                                                6000142
000143+                                                                                                                    6000143
000144+ *                                                                                                                  6000144
000145+ * error handling                                                                                                   6000145
000146+ *                                                                                                                  6000146
000147+D errno           PR              *   extproc('__errno')                                                            6000147
000148+ *                                                                                                                  6000148
000149+D strerr          PR              *   extproc('strerror')                                                           6000149
000150+D  errnum                       10I 0 value                                                                         6000150
000151+ * for backwards compatibility                                                                                      6000151
000152+D strerror        PR              *   extproc('strerror')                                                           6000152
000153+D  errnum                       10I 0 value                                                                         6000153
000154+                                                                                                                    6000154
000155+                                                                                                                    6000155
000156+ *                                                                                                                  6000156
000157+ * fcntl() commands                                                                                                 6000157
000158+ *                                                                                                                  6000158
000159+D F_DUPFD         C                   0                                                                             6000159
000160+D F_GETFL         C                   6                                                                             6000160
000161+D F_SETFL         C                   7                                                                             6000161
000162+D F_GETOWN        C                   8                                                                             6000162
000163+D F_SETOWN        C                   9                                                                             6000163
000164+ *                                                                                                                  6000164
000165+ * fcntl() flags                                                                                                    6000165
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     26
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
000166+ *                                                                                                                  6000166
000167+D O_NONBLOCK      C                   128                                                                           6000167
000168+D O_NDELAY        C                   128                                                                           6000168
000169+D FNDELAY         C                   128                                                                           6000169
000170+D FASYNC          C                   512                                                                           6000170
000171+                                                                                                                    6000171
000172+ *--------------------------------------------------------------------                                              6000172
000173+ *   fcntl()--Change Descriptor Attributes                                                                          6000173
000174+ *                                                                                                                  6000174
000175+ *   int fcntl(int descriptor, int command, ...)                                                                    6000175
000176+ *                                                                                                                  6000176
000177+ *   The third parameter (when used with sockets) is also an                                                        6000177
000178+ *   integer passed by value.. it specifies an argument for                                                         6000178
000179+ *   some of the commands.                                                                                          6000179
000180+ *                                                                                                                  6000180
000181+ *   commands supported in sockets are:                                                                             6000181
000182+ *          F_GETFL -- Return the status flags for the descriptor                                                   6000182
000183+ *          F_SETFL -- Set status flags for the descriptor                                                          6000183
000184+ *                    (Arg =)status flags (ORed) to set.                                                            6000184
000185+ * (the commands below arent terribly useful in RPG)                                                                6000185
000186+ *          F_DUPFD -- Duplicate the descriptor                                                                     6000186
000187+ *                    (Arg =)minimum value that new descriptor can be                                               6000187
000188+ *          F_GETOWN -- Return the process ID or group ID that's                                                    6000188
000189+ *                     set to receive SIGIO & SIGURG                                                                6000189
000190+ *          F_SETOWN -- Set the process ID or group ID that's                                                       6000190
000191+ *                     to receive SIGIO & SIGURG                                                                    6000191
000192+ *                    (Arg =)process ID (or neg value for group ID)                                                 6000192
000193+ *                                                                                                                  6000193
000194+ *  returns -1 upon error.                                                                                          6000194
000195+ *          successful values are command-specific.                                                                 6000195
000196+ *--------------------------------------------------------------------                                              6000196
000197+D fcntl           PR            10I 0 extproc('fcntl')                                                              6000197
000198+D   socketDesc                  10I 0 value                                                                         6000198
000199+D   command                     10I 0 value                                                                         6000199
000200+D   arg                         10I 0 value options(*nopass)                                                        6000200
000201+                                                                                                                    6000201
000202+                                                                                                                    6000202
000203+D atoi            PR            10I 0 extproc('atoi')                                                               6000203
000204+D   string                        *   value                                                                         6000204
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000011 /include 'message.rpginc'                                                                                            000011
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     27
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  message.r+                                                   *                     8
        * External name  . . . . . . :  ext/headers/message.rpginc                                   *                     8
        * Last change  . . . . . . . :  11-05-23  09:27:17                                           *                     8
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              8000001
000002+                                                                                                                    8000002
000003+/if not defined (MESSAGE_H)                                                                                         8000003
000004+/define MESSAGE_H                                                                                                   8000004
000005+                                                                                                                    8000005
000006+dcl-pr message_info extproc(*CWIDEN : *dclcase);                                                                    8000006
000007+    message pointer value options(*string);                                                                         8000007
000008+    replaceValue1 pointer value options(*string : *nopass);                                                         8000008
000009+    replaceValue2 pointer value options(*string : *nopass);                                                         8000009
000010+    replaceValue3 pointer value options(*string : *nopass);                                                         8000010
000011+    replaceValue4 pointer value options(*string : *nopass);                                                         8000011
000012+    replaceValue5 pointer value options(*string : *nopass);                                                         8000012
000013+    replaceValue6 pointer value options(*string : *nopass);                                                         8000013
000014+    replaceValue7 pointer value options(*string : *nopass);                                                         8000014
000015+end-pr;                                                                                                             8000015
000016+                                                                                                                    8000016
000017+dcl-pr message_escape extproc(*CWIDEN : *dclcase);                                                                  8000017
000018+    message pointer value options(*string);                                                                         8000018
000019+    replaceValue1 pointer value options(*string : *nopass);                                                         8000019
000020+    replaceValue2 pointer value options(*string : *nopass);                                                         8000020
000021+    replaceValue3 pointer value options(*string : *nopass);                                                         8000021
000022+    replaceValue4 pointer value options(*string : *nopass);                                                         8000022
000023+    replaceValue5 pointer value options(*string : *nopass);                                                         8000023
000024+    replaceValue6 pointer value options(*string : *nopass);                                                         8000024
000025+    replaceValue7 pointer value options(*string : *nopass);                                                         8000025
000026+end-pr;                                                                                                             8000026
000027+                                                                                                                    8000027
000028+/endif                                                                                                              8000028
000012 /include 'simpleList.rpginc'                                                                                         000012
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     28
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  simpleLis+                                                   *                     9
        * External name  . . . . . . :  ext/headers/simpleList.rpginc                                *                     9
        * Last change  . . . . . . . :  11-05-23  09:27:17                                           *                     9
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                              9000001
000002+                                                                                                                    9000002
000003+/if not defined (SIMPLELIST)                                                                                        9000003
000004+/define SIMPLELIST                                                                                                  9000004
000005+                                                                                                                    9000005
000006+/include 'varchar.rpginc'                                                                                           9000006
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  varchar.r+                                                   *                    10
        * External name  . . . . . . :  ext/headers/varchar.rpginc                                   *                    10
        * Last change  . . . . . . . :  11-05-23  13:40:07                                           *                    10
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                             10000001
000002+                                                                                                                   10000002
000003+/if not defined (VARCHAR)                                                                                          10000003
000004+/define VARCHAR                                                                                                    10000004
000005+                                                                                                                   10000005
000006+dcl-ds LVARPUCHAR_t qualified template;                                                                            10000006
000007+    length uns(10);                                                                                                10000007
000008+    string pointer;                                                                                                10000008
000009+end-ds;                                                                                                            10000009
000010+                                                                                                                   10000010
000011+dcl-ds PLVARCHAR_t qualified template;                                                                             10000011
000012+    length int(10);                                                                                                10000012
000013+    string char(1048576);                                                                                          10000013
000014+end-ds;                                                                                                            10000014
000015+                                                                                                                   10000015
000016+dcl-ds VARCHAR_t qualified template;                                                                               10000016
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     29
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000017+    length int(5);                                                                                                 10000017
000018+    string char(32767);                                                                                            10000018
000019+end-ds;                                                                                                            10000019
000020+                                                                                                                   10000020
000021+dcl-pr vc2str  pointer extproc(*CWIDEN:'vc2str');                                                                  10000021
000022+    input_varchar varchar(32760:2) options(*varsize);                                                              10000022
000023+end-pr;                                                                                                            10000023
000024+                                                                                                                   10000024
000025+                                                                                                                   10000025
000026+/endif                                                                                                             10000026
000007+                                                                                                                    9000007
000008+                                                                                                                    9000008
000009+dcl-ds SLISTNODE_t qualified template;                                                                              9000009
000010+   pNext pointer; // pointer of type SLISTNODE_t                                                                    9000010
000011+   payLoadLength int(10);                                                                                           9000011
000012+   payloadData pointer;                                                                                             9000012
000013+end-ds;                                                                                                             9000013
000014+                                                                                                                    9000014
000015+dcl-ds SLIST_t qualified template;                                                                                  9000015
000016+   pHead pointer;                                                                                                   9000016
000017+   pTail pointer;                                                                                                   9000017
000018+   length int(10);                                                                                                  9000018
000019+end-ds;                                                                                                             9000019
000020+                                                                                                                    9000020
000021+dcl-ds SLISTITERATOR_t qualified align(*full) template;                                                             9000021
000022+   pThis pointer; // pointer of type SLISTNODE_t                                                                    9000022
000023+   pNext pointer; // pointer of type SLISTNODE_t                                                                    9000023
000024+   hasNext ind;                                                                                                     9000024
000025+end-ds;                                                                                                             9000025
000026+                                                                                                                    9000026
000027+dcl-ds SLISTKEYVAL_t qualified template;                                                                            9000027
000028+   key likeds(LVARPUCHAR_t);                                                                                        9000028
000029+   value likeds(LVARPUCHAR_t);                                                                                      9000029
000030+end-ds;                                                                                                             9000030
000031+                                                                                                                    9000031
000032+dcl-pr sList_new pointer extproc('sList_new') end-pr;                                                               9000032
000033+                                                                                                                    9000033
000034+dcl-pr sList_free extproc('sList_free');                                                                            9000034
000035+   sList pointer value; // simpleList.c: PSLIST                                                                     9000035
000036+end-pr;                                                                                                             9000036
000037+                                                                                                                    9000037
000038+dcl-pr sList_push pointer extproc(*CWIDEN: 'sList_push'); // SLISTNODE_t                                            9000038
000039+   sList pointer value; // PSLIST                                                                                   9000039
000040+   len uns(10) value;                                                                                               9000040
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     30
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000041+   data pointer options(*string) value;                                                                             9000041
000042+   head ind value;                                                                                                  9000042
000043+end-pr;                                                                                                             9000043
000044+                                                                                                                    9000044
000045+dcl-pr sList_pushLVPC pointer extproc('sList_pushLVPC');                                                            9000045
000046+   sList pointer value; // PSLIST                                                                                   9000046
000047+   key likeds(LVARPUCHAR_t) const;                                                                                  9000047
000048+   value likeds(LVARPUCHAR_t) const;                                                                                9000048
000049+end-pr;                                                                                                             9000049
000050+                                                                                                                    9000050
000051+dcl-pr sList_lookupLVPC varchar(1048576:4) rtnparm extproc('sList_lookupLVPC');                                     9000051
000052+   sList pointer value; // PSLIST                                                                                   9000052
000053+   searchTerm varchar(1048576:4) const;                                                                             9000053
000054+end-pr;                                                                                                             9000054
000055+                                                                                                                    9000055
000056+dcl-pr sList_setIterator likeds(SLISTITERATOR_t) extproc('sList_setIterator');                                      9000056
000057+   slist pointer value; // PSLIST                                                                                   9000057
000058+end-pr;                                                                                                             9000058
000059+                                                                                                                    9000059
000060+dcl-pr sList_foreach ind extproc('sList_foreach');                                                                  9000060
000061+   iterator likeds(SLISTITERATOR_t) const;                                                                          9000061
000062+end-pr;                                                                                                             9000062
000063+                                                                                                                    9000063
000064+/endif                                                                                                              9000064
000013 /include 'sockets.rpginc'                                                                                            000013
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  sockets.r+                                                   *                    11
        * External name  . . . . . . :  headers/sockets.rpginc                                       *                    11
        * Last change  . . . . . . . :  11-05-23  16:29:51                                           *                    11
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                             11000001
000002+                                                                                                                   11000002
000003+/if not defined (ILEVATOR_SOCKETS)                                                                                 11000003
000004+/define ILEVATOR_SOCKETS                                                                                           11000004
000005+                                                                                                                   11000005
000006+dcl-c PLAIN_SOCKET 0;                                                                                              11000006
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     31
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000007+dcl-c SECURE_HANDSHAKE_IMEDIATE 1;                                                                                 11000007
000008+dcl-c SECURE_HANDSHAKE_LATER 2;                                                                                    11000008
000009+                                                                                                                   11000009
000010+dcl-pr sockets_setSSL extproc(*CWIDEN:'sockets_setSSL');                                                           11000010
000011+    sockets pointer value;                                                                                         11000011
000012+    useSSL  int(3)  value;                                                                                         11000012
000013+    certificateFile pointer options(*string) value;                                                                11000013
000014+    keyringPassword pointer options(*string) value;                                                                11000014
000015+end-pr;                                                                                                            11000015
000016+                                                                                                                   11000016
000017+dcl-pr sockets_new pointer extproc(*CWIDEN:'sockets_new') end-pr;                                                  11000017
000018+                                                                                                                   11000018
000019+dcl-pr sockets_free extproc(*CWIDEN:'sockets_free');                                                               11000019
000020+    sockets pointer value;                                                                                         11000020
000021+end-pr;                                                                                                            11000021
000022+                                                                                                                   11000022
000023+dcl-pr sockets_connect int(3) extproc(*CWIDEN:'sockets_connect');                                                  11000023
000024+    sockets  pointer value;                                                                                        11000024
000025+    server pointer options(*string) value;                                                                         11000025
000026+    port    int(10) value;                                                                                         11000026
000027+    timeout int(10) value;                                                                                         11000027
000028+end-pr;                                                                                                            11000028
000029+                                                                                                                   11000029
000030+                                                                                                                   11000030
000031+dcl-pr sockets_setTrace extproc(*CWIDEN:'sockets_setTrace');                                                       11000031
000032+    sockets  pointer value;                                                                                        11000032
000033+    traceFile  pointer options(*string) value;                                                                     11000033
000034+end-pr;                                                                                                            11000034
000035+                                                                                                                   11000035
000036+/endif                                                                                                             11000036
000014 /include 'teraspace.rpginc'                                                                                          000014
Seq    <---------------------- Source Specifications ----------------------------><---- Comments ----> Do  Page  Change Statement
Number ....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 Num Line  Date   Number
        *--------------------------------------------------------------------------------------------*
        * RPG member name  . . . . . :  teraspace+                                                   *                    12
        * External name  . . . . . . :  ext/headers/teraspace.rpginc                                 *                    12
        * Last change  . . . . . . . :  11-05-23  13:52:51                                           *                    12
        *--------------------------------------------------------------------------------------------*
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     32
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000001+**FREE                                                                                                             12000001
000002+                                                                                                                   12000002
000003+/if not defined (TERASPACE_H)                                                                                      12000003
000004+/define TERASPACE_H                                                                                                12000004
000005+                                                                                                                   12000005
000006+dcl-pr teraspace_alloc pointer extproc(*dclcase);                                                                  12000006
000007+  length uns(20) value;                                                                                            12000007
000008+end-pr;                                                                                                            12000008
000009+                                                                                                                   12000009
000010+dcl-pr teraspace_calloc pointer extproc(*dclcase);                                                                 12000010
000011+  length uns(20) value;                                                                                            12000011
000012+end-pr;                                                                                                            12000012
000013+                                                                                                                   12000013
000014+dcl-pr teraspace_free extproc(*dclcase);                                                                           12000014
000015+  p pointer;                                                                                                       12000015
000016+end-pr;                                                                                                            12000016
000017+                                                                                                                   12000017
000018+dcl-pr teraspace_strdup pointer extproc(*dclcase);                                                                 12000018
000019+  p pointer options(*string) value;                                                                                12000019
000020+end-pr;                                                                                                            12000020
000021+                                                                                                                   12000021
000022+dcl-pr teraspace_strTrimDup pointer extproc(*dclcase);                                                             12000022
000023+  p pointer options(*string) value;                                                                                12000023
000024+end-pr;                                                                                                            12000024
000025+                                                                                                                   12000025
000026+dcl-pr teraspace_realloc pointer extproc(*dclcase);                                                                12000026
000027+  p pointer;                                                                                                       12000027
000028+  length uns(20) value;                                                                                            12000028
000029+end-pr;                                                                                                            12000029
000030+                                                                                                                   12000030
000031+dcl-pr teraspace_size uns(20) extproc(*dclcase);                                                                   12000031
000032+  p pointer;                                                                                                       12000032
000033+end-pr;                                                                                                            12000033
000034+                                                                                                                   12000034
000035+dcl-pr teraspace_stat extproc(*dclcase) end-pr;                                                                    12000035
000036+                                                                                                                   12000036
000037+dcl-pr teraspace_leak ind extproc(*dclcase) end-pr;                                                                12000037
000038+                                                                                                                   12000038
000039+dcl-pr teraspace_use uns(20) extproc(*dclcase) end-pr;                                                             12000039
000040+                                                                                                                   12000040
000041+/endif                                                                                                             12000041
000015                                                                                                                      000015
000016                                                                                                                      000016
000017                                                                                                                      000017
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     33
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000018 dcl-pr fopen pointer extproc('_C_IFS_fopen');                                                                        000018
000019     filename pointer value options(*string);                                                                         000019
000020     mode pointer value options(*string);                                                                             000020
000021 end-pr;                                                                                                              000021
000022                                                                                                                      000022
000023 dcl-pr fclose int(10) extproc('_C_IFS_fclose');                                                                      000023
000024     stream pointer value;                                                                                            000024
000025 end-pr;                                                                                                              000025
000026                                                                                                                      000026
000027 dcl-pr unlink int(10) extproc(*dclcase);                                                                             000027
000028     path pointer value options(*string);                                                                             000028
000029 end-pr;                                                                                                              000029
000030                                                                                                                      000030
000031 dcl-pr access int(10) extproc('access');                                                                             000031
000032     path pointer value options(*string);                                                                             000032
000033     mode int(10) value;                                                                                              000033
000034 end-pr;                                                                                                              000034
000035                                                                                                                      000035
000036                                                                                                                      000036
000037                                                                                                                      000037
000038 //                                                                                                                   000038
000039 // Access mode flags for access() and accessx()                                                                      000039
000040 //                                                                                                                   000040
000041 // F_OK = File Exists                                                                                                000041
000042 // R_OK = Read Access                                                                                                000042
000043 // W_OK = Write Access                                                                                               000043
000044 // X_OK = Execute or Search                                                                                          000044
000045 //                                                                                                                   000045
000046 dcl-c F_OK 0;                                                                                                        000046
000047 dcl-c R_OK 4;                                                                                                        000047
000048 dcl-c W_OK 2;                                                                                                        000048
000049 dcl-c X_OK 1;                                                                                                        000049
000050                                                                                                                      000050
000051 dcl-s ENUM int(3) template;                                                                                          000051
000052 dcl-c FALSE 0;                                                                                                       000052
000053 dcl-c TRUE 1;                                                                                                        000053
000054 dcl-c NULL x'00';                                                                                                    000054
000055                                                                                                                      000055
000056 dcl-ds ilevator_t qualified template align(*full);                                                                   000056
000057     sockets pointer;                                                                                                 000057
000058     method pointer;                                                                                                  000058
000059     url pointer;                                                                                                     000059
000060     timeout int(5);                                                                                                  000060
000061     retries int(5);                                                                                                  000061
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     34
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000062     useProxy ind ;                                                                                                   000062
000063     responseHeaderHasContentLength ind ;                                                                             000063
000064     responseIsChunked ind ;                                                                                          000064
000065     headerList pointer;                                                                                              000065
000066     responseHeaderBuffer likeds(anychar_t);                                                                          000066
000067     responseDataBuffer likeds(anychar_t);                                                                            000067
000068     responseDataFile pointer;                                                                                        000068
000069     authProvider pointer;                                                                                            000069
000070                                                                                                                      000070
000071     headerLen    int(10);                                                                                            000071
000072     contentData pointer;                                                                                             000072
000073     contentLength int(10);                                                                                           000073
000074     contentLengthCalculated int(10);                                                                                 000074
000075                                                                                                                      000075
000076     rawResponse pointer;                                                                                             000076
000077     ccsid int(10);                                                                                                   000077
000078     status int(10);                                                                                                  000078
000079                                                                                                                      000079
000080     server    char(512);                                                                                             000080
000081     port      int(10);                                                                                               000081
000082     resource  char(32766);                                                                                           000082
000083     host      char(512);                                                                                             000083
000084     user      char(256);                                                                                             000084
000085     password  char(256);                                                                                             000085
000086     location  char(256);                                                                                             000086
000087     message   char(256);                                                                                             000087
000088                                                                                                                      000088
000089     buffer pointer;                                                                                                  000089
000090     bufferSize int(10);                                                                                              000090
000091     bufferTotalLength int(10);                                                                                       000091
000092     bufferEnd pointer;                                                                                               000092
000093 end-ds;                                                                                                              000093
000094                                                                                                                      000094
000095 dcl-c DEFAULT_TIMEOUT 30000;                                                                                         000095
000096 dcl-c DEFAULT_RETRIES 2;                                                                                             000096
000097 dcl-c NO_RETRIES 0;                                                                                                  000097
000098                                                                                                                      000098
000099 dcl-s UPPER char(26) ccsid(*utf8) inz('ABCDEFGHIJKLMNOPQRSTUVWXYZ');                                                 000099
000100 dcl-s LOWER char(26) ccsid(*utf8) inz('abcdefghijklmnopqrstuvwxyz');                                                 000100
000101                                                                                                                      000101
000102 dcl-c ILEVATOR_VERSION '0.1.0';                                                                                      000102
000103                                                                                                                      000103
000104                                                                                                                      000104
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     35
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000105 dcl-proc iv_newHttpClient export;                                                                                    000105
000106     dcl-pi *n pointer end-pi;                                                                                        000106
000107                                                                                                                      000107
000108     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000108
000109                                                                                                                      000109
000110     pClient = teraspace_alloc(%size(ilevator_t));                                                                    000110
000111     clear client;                                                                                                    000111
000112                                                                                                                      000112
000113     client.method = *NULL;                                                                                           000113
000114     client.url = *NULL;                                                                                              000114
000115                                                                                                                      000115
000116     client.buffer = teraspace_alloc(IV_BUFFER_SIZE);                                                                 000116
000117     client.bufferSize = IV_BUFFER_SIZE;                                                                              000117
000118                                                                                                                      000118
000119     client.sockets =  sockets_new();                                                                                 000119
000120     client.headerList = sList_new();                                                                                 000120
000121     client.timeout = DEFAULT_TIMEOUT;                                                                                000121
000122     client.retries = DEFAULT_RETRIES;                                                                                000122
000123                                                                                                                      000123
000124     client.server = NULL;                                                                                            000124
000125     client.port = 0;                                                                                                 000125
000126     client.resource = NULL;                                                                                          000126
000127     client.host = NULL;                                                                                              000127
000128     client.user = NULL;                                                                                              000128
000129     client.password = NULL;                                                                                          000129
000130     client.location = NULL;                                                                                          000130
000131     client.message = NULL;                                                                                           000131
000132                                                                                                                      000132
000133     iv_addHeader(pClient : 'User-Agent' : 'ILEvator for IBM i/' + ILEVATOR_VERSION);                                 000133
000134                                                                                                                      000134
000135     return pClient;                                                                                                  000135
000136 end-proc;                                                                                                            000136
000137                                                                                                                      000137
000138                                                                                                                      000138
000139 dcl-proc iv_free export;                                                                                             000139
000140     dcl-pi *n;                                                                                                       000140
000141       pClient pointer value;                                                                                         000141
000142     end-pi;                                                                                                          000142
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     36
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000143                                                                                                                      000143
000144     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000144
000145                                                                                                                      000145
000146     if (pClient = *null);                                                                            B01             000146
000147       return;                                                                                         01             000147
000148     endif;                                                                                           E01             000148
000149                                                                                                                      000149
000150     deallocateHeaders(client.headerList);                                                                            000150
000151                                                                                                                      000151
000152     teraspace_free(client.method);                                                                                   000152
000153     teraspace_free(client.url);                                                                                      000153
000154     sockets_free(client.sockets);                                                                                    000154
000155     sList_free(client.headerList);                                                                                   000155
000156     teraspace_free(client.authProvider);                                                                             000156
000157     teraspace_free(client.buffer);                                                                                   000157
000158     teraspace_free(pClient);                                                                                         000158
000159 end-proc;                                                                                                            000159
000160                                                                                                                      000160
000161                                                                                                                      000161
000162 dcl-proc deallocateHeaders;                                                                                          000162
000163   dcl-pi *n;                                                                                                         000163
000164     list pointer;                                                                                                    000164
000165   end-pi;                                                                                                            000165
000166                                                                                                                      000166
000167   dcl-ds iterator likeds(SLISTITERATOR_t) inz;                                                                       000167
000168   dcl-ds node likeds(SLISTNODE_t) based(iterator.pThis);                                                             000168
000169   dcl-ds payload likeds(SLISTKEYVAL_t) based(node.payloadData);                                                      000169
000170                                                                                                                      000170
000171   iterator = sList_setIterator(list);                                                                                000171
000172                                                                                                                      000172
000173   dow (sList_foreach(iterator));                                                                     B01             000173
000174     teraspace_free(payload.key.string);                                                               01             000174
000175     teraspace_free(payload.value.string);                                                             01             000175
000176   enddo;                                                                                             E01             000176
000177                                                                                                                      000177
000178   sList_free(list);                                                                                                  000178
000179 end-proc;                                                                                                            000179
000180                                                                                                                      000180
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     37
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000181                                                                                                                      000181
000182 dcl-proc iv_setResponseHeaderBuffer export;                                                                          000182
000183     dcl-pi *n;                                                                                                       000183
000184         pClient pointer value;                                                                                       000184
000185         buffer pointer value;                                                                                        000185
000186         bufferSize int(10) value;                                                                                    000186
000187         bufferType int(5) value;                                                                                     000187
000188         bufferCcsid int(10) value;                                                                                   000188
000189     end-pi;                                                                                                          000189
000190                                                                                                                      000190
000191     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000191
000192                                                                                                                      000192
000193     iv_anychar_set(                                                                                                  000193
000194         %addr( client.responseHeaderBuffer)  :                                                                       000194
000195         buffer :                                                                                                     000195
000196         bufferSize :                                                                                                 000196
000197         bufferType :                                                                                                 000197
000198         bufferCcsid                                                                                                  000198
000199     );                                                                                                               000199
000200 end-proc;                                                                                                            000200
000201                                                                                                                      000201
000202                                                                                                                      000202
000203 dcl-proc iv_setResponseDataBuffer export;                                                                            000203
000204     dcl-pi *n;                                                                                                       000204
000205         pClient pointer value;                                                                                       000205
000206         buffer pointer value;                                                                                        000206
000207         bufferSize int(10) value;                                                                                    000207
000208         bufferType int(5) value;                                                                                     000208
000209         bufferCcsid int(10) value;                                                                                   000209
000210     end-pi;                                                                                                          000210
000211                                                                                                                      000211
000212     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000212
000213                                                                                                                      000213
000214     iv_anychar_set(                                                                                                  000214
000215         %addr(client.responseDataBuffer) :                                                                           000215
000216         buffer :                                                                                                     000216
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     38
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000217         bufferSize :                                                                                                 000217
000218         bufferType :                                                                                                 000218
000219         bufferCcsid                                                                                                  000219
000220     );                                                                                                               000220
000221 end-proc;                                                                                                            000221
000222                                                                                                                      000222
000223                                                                                                                      000223
000224 dcl-proc iv_setResponseFile export;                                                                                  000224
000225     dcl-pi *n;                                                                                                       000225
000226         pClient       pointer value;                                                                                 000226
000227         fileName      pointer options(*string) value;                                                                000227
000228         fileCcsid     int(10)  options(*nopass) value;                                                               000228
000229     end-pi;                                                                                                          000229
000230                                                                                                                      000230
000231     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000231
000232     dcl-s c_errno int(10) based(pErrno);                                                                             000232
000233     dcl-s mode char(32);                                                                                             000233
000234                                                                                                                      000234
000235     if (%parms() = 2);                                                                               B01             000235
000236         mode = 'wb,o_ccsid=1252';                                                                     01             000236
000237     else;                                                                                            X01             000237
000238         mode = 'wb,o_ccsid=' + %char(fileCcsid);                                                      01             000238
000239     endif;                                                                                           E01             000239
000240                                                                                                                      000240
000241  unlink(fileName);                                                                                                   000241
000242                                                                                                                      000242
000243  client.responseDataFile = fopen(fileName : %addr(mode));                                                            000243
000244  if (client.responseDataFile = *null);                                                               B01             000244
000245      pErrno = errno();                                                                                01             000245
000246         message_info('Response output open failed: ' + %str(strerror(c_errno):1000));                 01             000246
000247  endif;                                                                                              E01             000247
000248 end-proc;                                                                                                            000248
000249                                                                                                                      000249
000250                                                                                                                      000250
000251 dcl-proc iv_setTrace export;                                                                                         000251
000252     dcl-pi *n;                                                                                                       000252
000253         pClient         pointer value;                                                                               000253
000254         traceFileName   pointer options(*string) value;                                                              000254
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     39
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000255     end-pi;                                                                                                          000255
000256                                                                                                                      000256
000257     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000257
000258                                                                                                                      000258
000259     sockets_setTrace(client.sockets : traceFileName);                                                                000259
000260                                                                                                                      000260
000261 end-proc;                                                                                                            000261
000262                                                                                                                      000262
000263 dcl-proc iv_execute export;                                                                                          000263
000264     dcl-pi *n ind;                                                                                                   000264
000265         pClient pointer value;                                                                                       000265
000266         method pointer options(*string) value;                                                                       000266
000267         url pointer options(*string) value;                                                                          000267
000268         timeout int(10) options(*nopass) value; // In milisec. 30000 is default                                      000268
000269         retries int(10) options(*nopass) value; // retry n times. 3 is default                                       000269
000270     end-pi;                                                                                                          000270
000271                                                                                                                      000271
000272     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000272
000273     dcl-s apiStatus int(10) inz(IV_STATUS_RETRY);                                                                    000273
000274     dcl-s try int(5);                                                                                                000274
000275     dcl-s ok like(ENUM)  ;                                                                                           000275
000276                                                                                                                      000276
000277     client.method = teraspace_strTrimDup (method);                                                                   000277
000278     client.url    = teraspace_strTrimDup (url);                                                                      000278
000279                                                                                                                      000279
000280     if (%parms() >= 4);                                                                              B01             000280
000281         client.timeout = timeout;                                                                     01             000281
000282     endif;                                                                                           E01             000282
000283                                                                                                                      000283
000284     if (%parms() >= 5);                                                                              B01             000284
000285         client.retries = retries;                                                                     01             000285
000286     endif;                                                                                           E01             000286
000287                                                                                                                      000287
000288     parseUrl(pClient : url);                                                                                         000288
000289                                                                                                                      000289
000290     iv_debug('Port: %s' : %str(%addr(client.port):10) );                                                             000290
000291     iv_debug('Server: %s' : %str(%addr(client.server):200) );                                                        000291
000292     iv_debug('Host: %s' : %str(%addr(client.host):200) );                                                            000292
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     40
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000293     iv_debug('Resource: %s' : %str(%addr(client.resource):200) );                                                    000293
000294                                                                                                                      000294
000295     for try = 0 to client.retries;                                                                   B01             000295
000296                                                                                                                      000296
000297         ok = sockets_connect(                                                                         01             000297
000298             client.sockets :                                                                          01             000298
000299             client.server :                                                                           01             000299
000300             client.port :                                                                             01             000300
000301             client.timeout                                                                            01             000301
000302         );                                                                                            01             000302
000303         if (ok = TRUE);                                                                              B02             000303
000304           apiStatus = IV_STATUS_OK;                                                                   02             000304
000305         else;                                                                                        X02             000305
000306           apiStatus = IV_STATUS_ERROR;                                                                02             000306
000307           iter;                                                                                       02             000307
000308         endif;                                                                                       E02             000308
000309                                                                                                                      000309
000310         apiStatus = sendRequest(pClient);                                                             01             000310
000311         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000311
000312             leave;                                                                                    02             000312
000313         endif;                                                                                       E02             000313
000314                                                                                                                      000314
000315         apiStatus = receiveHeader(pClient);                                                           01             000315
000316         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000316
000317             leave;                                                                                    02             000317
000318         endif;                                                                                       E02             000318
000319         if (apiStatus = IV_STATUS_RETRY);                                                            B02             000319
000320             iter;                                                                                     02             000320
000321         endif;                                                                                       E02             000321
000322                                                                                                                      000322
000323         iv_debug('HTTP response status: %s' : %char(client.status));                                  01             000323
000324                                                                                                                      000324
000325         // Don't try to get data if it was a HEAD request - it is only the header                                    000325
000326         // or status 204 => no content                                                                               000326
000327         if (%str(client.method:10) = 'HEAD' or client.status = 204);                                 B02             000327
000328             // No content, don't read any longer                                                                     000328
000329             apiStatus = IV_STATUS_OK;                                                                 02             000329
000330         elseif (client.responseIsChunked);                                                           X02             000330
000331             apiStatus = iv_chunked_receive(pClient);                                                  02             000331
000332         else;                                                                                        X02             000332
000333             apiStatus = receiveData(pClient);                                                         02             000333
000334         endif;                                                                                       E02             000334
000335                                                                                                                      000335
000336         if (apiStatus = IV_STATUS_OK);                                                               B02             000336
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     41
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000337             leave;                                                                                    02             000337
000338         endif;                                                                                       E02             000338
000339         if (apiStatus = IV_STATUS_ERROR);                                                            B02             000339
000340             leave;                                                                                    02             000340
000341         endif;                                                                                       E02             000341
000342         if (apiStatus = IV_STATUS_RETRY);                                                            B02             000342
000343             iter;                                                                                     02             000343
000344         endif;                                                                                       E02             000344
000345                                                                                                                      000345
000346     endfor;                                                                                          E01             000346
000347                                                                                                                      000347
000348     iv_anychar_finalize(%addr(client.responseHeaderBuffer));                                                         000348
000349     iv_anychar_finalize(%addr(client.responseDataBuffer));                                                           000349
000350                                                                                                                      000350
000351     if (client.responseDataFile <> *null);                                                           B01             000351
000352         fclose(client.responseDataFile);                                                              01             000352
000353     endif;                                                                                           E01             000353
000354                                                                                                                      000354
000355     // TODO reset buffers to reuse the client ?                                                                      000355
000356                                                                                                                      000356
000357     return (apiStatus = IV_STATUS_OK);                                                                               000357
000358 end-proc;                                                                                                            000358
000359                                                                                                                      000359
000360                                                                                                                      000360
000361 dcl-proc iv_setCertificate export;                                                                                   000361
000362     dcl-pi *n ind;                                                                                                   000362
000363         pClient pointer value;                                                                                       000363
000364         certificateFile pointer options(*string) value;                                                              000364
000365         certificatePassword pointer options(*string : *nopass) value;                                                000365
000366     end-pi;                                                                                                          000366
000367                                                                                                                      000367
000368     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000368
000369     dcl-s c_errno int(10) based(pErrno);                                                                             000369
000370     dcl-s empty_str char(1) inz(x'00');                                                                              000370
000371                                                                                                                      000371
000372     if (0 <> access(certificateFile : R_OK));                                                        B01             000372
000373         pErrno = errno();                                                                             01             000373
000374         message_info('Certificate error: ' +                                                          01             000374
000375             %str(strerror(c_errno) : 1000) +                                                          01             000375
000376             ' File: ' + %str(certificateFile : 1000)                                                  01             000376
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     42
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000377         );                                                                                            01             000377
000378         return *off;                                                                                  01             000378
000379     endif;                                                                                           E01             000379
000380                                                                                                                      000380
000381                                                                                                                      000381
000382     if %parms < 3;                                                                                   B01             000382
000383         certificatePassword = %addr(empty_str);                                                       01             000383
000384     endif;                                                                                           E01             000384
000385                                                                                                                      000385
000386     sockets_setSSL(                                                                                                  000386
000387         client.sockets :                                                                                             000387
000388         SECURE_HANDSHAKE_IMEDIATE :                                                                                  000388
000389         certificateFile :                                                                                            000389
000390         certificatePassword                                                                                          000390
000391     );                                                                                                               000391
000392                                                                                                                      000392
000393     return *on;                                                                                                      000393
000394 end-proc;                                                                                                            000394
000395                                                                                                                      000395
000396                                                                                                                      000396
000397 dcl-proc iv_getStatus export;                                                                                        000397
000398     dcl-pi *n int(5);                                                                                                000398
000399         pClient pointer value;                                                                                       000399
000400     end-pi;                                                                                                          000400
000401                                                                                                                      000401
000402     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000402
000403                                                                                                                      000403
000404     return client.status;                                                                                            000404
000405 end-proc;                                                                                                            000405
000406                                                                                                                      000406
000407 dcl-proc iv_getMessage export;                                                                                       000407
000408     dcl-pi *n varchar(256);                                                                                          000408
000409         pClient pointer value;                                                                                       000409
000410     end-pi;                                                                                                          000410
000411                                                                                                                      000411
000412     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000412
000413                                                                                                                      000413
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     43
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000414     return client.message;                                                                                           000414
000415 end-proc;                                                                                                            000415
000416                                                                                                                      000416
000417                                                                                                                      000417
000418 dcl-proc iv_setAuthProvider export;                                                                                  000418
000419     dcl-pi *n;                                                                                                       000419
000420         pClient pointer value;                                                                                       000420
000421         authProvider pointer value;                                                                                  000421
000422     end-pi;                                                                                                          000422
000423                                                                                                                      000423
000424     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000424
000425                                                                                                                      000425
000426     if (client.authProvider <> *null);                                                               B01             000426
000427         teraspace_free(client.authProvider);                                                          01             000427
000428     endif;                                                                                           E01             000428
000429                                                                                                                      000429
000430     client.authProvider = authProvider;                                                                              000430
000431 end-proc;                                                                                                            000431
000432                                                                                                                      000432
000433                                                                                                                      000433
000434 dcl-proc iv_addHeader export;                                                                                        000434
000435     dcl-pi *n;                                                                                                       000435
000436         pClient pointer value;                                                                                       000436
000437         headerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8) value;                                                000437
000438         headerValue varchar(IV_HEADER_VALUE_SIZE:2) ccsid(*utf8) value;                                              000438
000439     end-pi;                                                                                                          000439
000440                                                                                                                      000440
000441     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000441
000442     dcl-s lowerName varchar(IV_HEADER_NAME_SIZE:2) ccsid(*utf8);                                                     000442
000443     dcl-ds listKey likeds(LVARPUCHAR_t);                                                                             000443
000444     dcl-ds listValue likeds(LVARPUCHAR_t);                                                                           000444
000445                                                                                                                      000445
000446     if (headerName = *blank);                                                                        B01             000446
000447       return;                                                                                         01             000447
000448     endif;                                                                                           E01             000448
000449                                                                                                                      000449
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     44
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000450     // TODO use OS API for proper conversion                                                                         000450
000451     lowerName = %xlate(UPPER : LOWER : headerName);                                                                  000451
000452                                                                                                                      000452
000453     listKey.length = %len(lowerName);                                                                                000453
000454     listKey.string = teraspace_alloc(listKey.length + 1);                                                            000454
000455     %str(listKey.string : listKey.length + 1) = lowerName;                                                           000455
000456                                                                                                                      000456
000457     listValue.length = %len(headerValue);                                                                            000457
000458     listValue.string = teraspace_alloc(listValue.length + 1);                                                        000458
000459     %str(listValue.string : listValue.length + 1) = headerValue;                                                     000459
000460                                                                                                                      000460
000461     sList_pushLVPC(client.headerList : listKey : listValue);                                                         000461
000462 end-proc;                                                                                                            000462
000463                                                                                                                      000463
000464                                                                                                                      000464
000465 dcl-proc iv_addHeaders export;                                                                                       000465
000466     dcl-pi *n;                                                                                                       000466
000467         pClient pointer value;                                                                                       000467
000468         headers pointer value;                                                                                       000468
000469     end-pi;                                                                                                          000469
000470                                                                                                                      000470
000471     dcl-ds client likeds(ilevator_t) based(pClient);                                                                 000471
000472     dcl-ds iterator likeds(SLISTITERATOR_t);                                                                         000472
000473     dcl-ds node likeds(SLISTNODE_t) based(iterator.pThis);                                                           000473
000474     dcl-ds nodePayload likeds(SLISTKEYVAL_t) based(node.payloadData);                                                000474
000475     dcl-s headerName varchar(IV_HEADER_NAME_SIZE) ccsid(*utf8);                                                      000475
000476     dcl-s headerValue varchar(IV_HEADER_VALUE_SIZE) ccsid(*utf8);                                                    000476
000477                                                                                                                      000477
000478     iterator = sList_setIterator(headers);                                                                           000478
000479     dow (sList_foreach(iterator));                                                                   B01             000479
000480         headerName = %str(nodePayload.key.string : nodePayload.key.length);                           01             000480
000481         headerValue = %str(nodePayload.value.string : nodePayload.value.length);                      01             000481
000482         iv_addHeader(pClient : headerName : headerValue);                                             01             000482
000483     enddo;                                                                                           E01             000483
000484 end-proc;                                                                                                            000484
000485                                                                                                                      000485
000486                                                                                                                      000486
000487 dcl-proc iv_get export;                                                                                              000487
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     45
Seq    <---------------------- Source Specifications -----------------------------------------------------> DO   CHANGE STATEMENT
Number ....+....1....+....2....+....3....+....4....+....5....+....6....+....7....+....8....+....9....+...10 NUM  DATE   NUMBER
000488     dcl-pi *n varchar(IV_BUFFER_SIZE:4) ccsid(1208) rtnparm;                                                         000488
000489         url varchar(IV_URL_SIZE:2) value;                                                                            000489
000490         acceptMimeType varchar(IV_HEADER_VALUE_SIZE:2) ccsid(1208) value options(*nopass);                           000490
000491         headers pointer value options(*nopass);                                                                      000491
000492     end-pi;                                                                                                          000492
000493                                                                                                                      000493
000494     dcl-s client pointer;                                                                                            000494
000495     dcl-s returnBuffer varchar(IV_BUFFER_SIZE:4) ccsid(1208);                                                        000495
000496     dcl-s rc ind inz(*off);                                                                                          000496
000497                                                                                                                      000497
000498     client = iv_newHttpClient();                                                                                     000498
000499                                                                                                                      000499
000500     iv_setResponseDataBuffer(                                                                                        000500
000501         client :                                                                                                     000501
000502         %addr(returnBuffer) :                                                                                        000502
000503         IV_BUFFER_SIZE :                                                                                             000503
000504         IV_VARCHAR4 :                                                                                                000504
000505         IV_CCSID_UTF8                                                                                                000505
000506     );                                                                                                               000506
000507                                                                                                                      000507
000508     if (%parms() >= 3);                                                                              B01             000508
000509       iv_addHeader(client : 'Accept' : acceptMimeType);                                               01             000509
000510     endif;                                                                                           E01             000510
000511                                                                                                                      000511
000512     if (%parms() >= 4);                                                                              B01             000512
000513       iv_addHeaders(client : headers);                                                                01             000513
000514     endif;                                                                                           E01             000514
000515                                                                                                                      000515
000516     rc = iv_execute(client : 'GET' : url : DEFAULT_TIMEOUT : NO_RETRIES);                                            000516
000517                                                                                                                      000517
000518     return returnBuffer;                                                                                             000518
000519                                                                                                                      000519
000520 on-exit;                                                                                                             000520
000521     iv_free(client);                                                                                                 000521
000522 end-proc;                                                                                                            000522
       * * * * *   E N D   O F   S O U R C E   * * * * *
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     46
          A d d i t i o n a l   D i a g n o s t i c   M e s s a g e s
 Msg id  Sv   Statement    Message text
*RNF5409 00        000241  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000352  The prototyped call returns a value which is lost when
                           CALLP is used.
*RNF5409 00        000461  The prototyped call returns a value which is lost when
                           CALLP is used.
 * * * * *   E N D   O F   A D D I T I O N A L   D I A G N O S T I C   M E S S A G E S   * * * * *
                            / C o p y   M e m b e r s
Statement  Src  RPG name   <-------- External name -------> CCSID  <- Last change ->
Number     Id              Library    File       Member            Date     Time
    000005    1 anychar.r+ headers/anychar.rpginc             819  11-05-23 09:27:18
    000006    2 chunked.r+ headers/chunked.rpginc             819  11-05-23 09:27:18
    000007    3 debug.rpg+ headers/debug.rpginc               819  11-05-23 09:27:18
    000008    4 httpclien+ headers/httpclient.rpginc          819  11-05-23 09:27:18
    000009    5 ilevator.+ headers/ilevator.rpgle             819  11-05-23 16:21:45
    000010    6 libc.rpgi+ ext/headers/libc.rpginc            819  11-05-23 09:27:17
   6000003    7 QUSEC      QSYSINC    QRPGLESRC  QUSEC         37  06-10-13 13:02:50
    000011    8 message.r+ ext/headers/message.rpginc         819  11-05-23 09:27:17
    000012    9 simpleLis+ ext/headers/simpleList.rpginc      819  11-05-23 09:27:17
   9000006   10 varchar.r+ ext/headers/varchar.rpginc         819  11-05-23 13:40:07
    000013   11 sockets.r+ headers/sockets.rpginc             819  11-05-23 16:29:51
    000014   12 teraspace+ ext/headers/teraspace.rpginc       819  11-05-23 13:52:51
         * * * * *   E N D   O F   / C O P Y   M E M B E R S   * * * * *
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     47
                          C r o s s   R e f e r e n c e
      File and Record References:
         File              Device             References (D=Defined)
           Record
         No references in the source.
      Global Field References:
         Field             Attributes         References (D=Defined M=Modified)
         ACCESS            I(10,0)                000031D     000372
                           PROTOTYPE
         ANYCHAR_T         DS(32)                1000007D     000066      000067
                           TEMPLATE
*RNF7031   CCSID           I(10,0)               1000012D
*RNF7031   DATA            *(16)                 1000008D
*RNF7031   LENGTH          U(10,0)               1000010D
*RNF7031   SIZE            U(10,0)               1000009D
*RNF7031   TYPE            I(10,0)               1000011D
*RNF7031 ATOI              I(10,0)               6000203D
                           PROTOTYPE
*RNF7031 BSEARCH           *(16)                 6000137D
                           PROTOTYPE
*RNF7031 CEILING           F(8)                  6000108D
                           PROTOTYPE
*RNF7031 CONVERTCASE       PROTOTYPE             6000069D
         DEALLOCATEHEADERS PROTOTYPE              000150M     000162
         DEFAULT_RETRIES   CONST                  000096D     000122
         DEFAULT_TIMEOUT   CONST                  000095D     000121      000516
         ENUM              I(3,0)                 000051D     000275
                           TEMPLATE
         ERRNO             *(16)                 6000147D     000245      000373
                           PROTOTYPE
*RNF7031 F_DUPFD           CONST                 6000159D
*RNF7031 F_GETFL           CONST                 6000160D
*RNF7031 F_GETOWN          CONST                 6000162D
*RNF7031 F_OK              CONST                  000046D
*RNF7031 F_SETFL           CONST                 6000161D
*RNF7031 F_SETOWN          CONST                 6000163D
*RNF7031 FALSE             CONST                  000052D
*RNF7031 FASYNC            CONST                 6000170D
         FCLOSE            I(10,0)                000023D     000352M
                           PROTOTYPE
*RNF7031 FCNTL             I(10,0)               6000197D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     48
                           PROTOTYPE
*RNF7031 FLOOR             F(8)                  6000111D
                           PROTOTYPE
*RNF7031 FNDELAY           CONST                 6000169D
         FOPEN             *(16)                  000018D     000243
                           PROTOTYPE
         ILEVATOR_T        DS(35120)              000056D     000108      000110      000144
                           TEMPLATE               000191      000212      000231      000257
                                                  000272      000368      000402      000412
                                                  000424      000441      000471
*RNF7031   AUTHPROVIDER    *(16)                  000069D
*RNF7031   BUFFER          *(16)                  000089D
*RNF7031   BUFFEREND       *(16)                  000092D
*RNF7031   BUFFERSIZE      I(10,0)                000090D
*RNF7031   BUFFERTOTALLENGTH...
                           I(10,0)                000091D
*RNF7031   CCSID           I(10,0)                000077D
*RNF7031   CONTENTDATA     *(16)                  000072D
*RNF7031   CONTENTLENGTH   I(10,0)                000073D
*RNF7031   CONTENTLENGTHCALCULATED...
                           I(10,0)                000074D
*RNF7031   HEADERLEN       I(10,0)                000071D
*RNF7031   HEADERLIST      *(16)                  000065D
*RNF7031   HOST            A(512)                 000083D
*RNF7031   LOCATION        A(256)                 000086D
*RNF7031   MESSAGE         A(256)                 000087D
*RNF7031   METHOD          *(16)                  000058D
*RNF7031   PASSWORD        A(256)                 000085D
*RNF7031   PORT            I(10,0)                000081D
*RNF7031   RAWRESPONSE     *(16)                  000076D
*RNF7031   RESOURCE        A(32766)               000082D
*RNF7031   RESPONSEDATABUFFER...
                           DS(32)                 000067D
*RNF7031   RESPONSEDATAFILE...
                           *(16)                  000068D
*RNF7031   RESPONSEHEADERBUFFER...
                           DS(32)                 000066D
*RNF7031   RESPONSEHEADERHASCONTENTLENGTH...
                           N(1)                   000063D
*RNF7031   RESPONSEISCHUNKED...
                           N(1)                   000064D
*RNF7031   RETRIES         I(5,0)                 000061D
*RNF7031   SERVER          A(512)                 000080D
*RNF7031   SOCKETS         *(16)                  000057D
*RNF7031   STATUS          I(10,0)                000078D
*RNF7031   TIMEOUT         I(5,0)                 000060D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     49
*RNF7031   URL             *(16)                  000059D
*RNF7031   USEPROXY        N(1)                   000062D
*RNF7031   USER            A(256)                 000084D
         ILEVATOR_VERSION  CONST                  000102D     000133
         IV_ADDHEADER      PROTOTYPE             5000611D     000133M     000434      000482M
                                                  000509M
         IV_ADDHEADERS     PROTOTYPE             5000618D     000465      000513M
*RNF7031 IV_ANYCHAR_APPEND PROTOTYPE             1000024D
         IV_ANYCHAR_FINALIZE...
                           PROTOTYPE             1000030D     000348M     000349M
         IV_ANYCHAR_SET    PROTOTYPE             1000016D     000193M     000214M
         IV_BUFFER_SIZE    CONST                 5000042D    5000604      000116      000117
                                                  000488      000495      000503
*RNF7031 IV_BYTES          CONST                 5000375D
*RNF7031 IV_CCSID_BINARY   CONST                 5000385D
*RNF7031 IV_CCSID_JOB      CONST                 5000382D
         IV_CCSID_UTF8     CONST                 5000383D     000505
*RNF7031 IV_CCSID_WIN1252  CONST                 5000384D
         IV_CHUNKED_RECEIVE...
                           I(10,0)               2000009D     000331
                           PROTOTYPE
         IV_DEBUG          PROTOTYPE             3000012D     000290M     000291M     000292M
                                                  000293M     000323M
*RNF7031 IV_DEBUG_INIT     I(10,0)               3000010D
                           PROTOTYPE
*RNF7031 IV_DECODEBASE64   A(2097152)            5000542D
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
*RNF7031 IV_ENCODEBASE64   A(2097152)            5000556D
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_EXECUTE        N(1)                  5000477D     000263      000516
                           PROTOTYPE
         IV_FREE           PROTOTYPE             5000367D     000139      000521M
         IV_GET            A(1048576)            5000604D     000487
                           BASED(_QRNL_PST+)
                           VARYING(4)
                           CCSID(1208)
                           PROTOTYPE
         IV_GETMESSAGE     A(256)                5000514D     000407
                           VARYING(2)
                           PROTOTYPE
         IV_GETSTATUS      I(5,0)                5000503D     000397
                           PROTOTYPE
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     50
         IV_HEADER_NAME_SIZE...
                           CONST                 5000043D    5000613      000437      000442
                                                  000475
         IV_HEADER_VALUE_SIZE...
                           CONST                 5000044D    5000606     5000614      000438
                                                  000476      000490
*RNF7031 IV_HTTP           CONST                 5000049D
*RNF7031 IV_HTTP_ACCEPTED  CONST                 5000078D
*RNF7031 IV_HTTP_ALREADY_REPORTED...
                           CONST                 5000109D
*RNF7031 IV_HTTP_BAD_GATEWAY...
                           CONST                 5000289D
*RNF7031 IV_HTTP_BAD_REQUEST...
                           CONST                 5000119D
*RNF7031 IV_HTTP_CONFLICT  CONST                 5000176D
*RNF7031 IV_HTTP_CREATED   CONST                 5000071D
*RNF7031 IV_HTTP_EXPECTATION_FAILED...
                           CONST                 5000218D
*RNF7031 IV_HTTP_FAILED_DEPENDENCY...
                           CONST                 5000240D
*RNF7031 IV_HTTP_FORBIDDEN CONST                 5000137D
*RNF7031 IV_HTTP_GATEWAY_TIMEOUT...
                           CONST                 5000305D
*RNF7031 IV_HTTP_GONE      CONST                 5000184D
*RNF7031 IV_HTTP_IM_USED   CONST                 5000115D
*RNF7031 IV_HTTP_INSUFFICIENT_STORAGE...
                           CONST                 5000320D
*RNF7031 IV_HTTP_INTERNAL_SERVER_ERROR...
                           CONST                 5000278D
*RNF7031 IV_HTTP_LENGTH_REQUIRED...
                           CONST                 5000189D
*RNF7031 IV_HTTP_LOCKED    CONST                 5000236D
*RNF7031 IV_HTTP_LOOP_DETECTED...
                           CONST                 5000324D
*RNF7031 IV_HTTP_METHOD_NOT_ALLOWED...
                           CONST                 5000153D
*RNF7031 IV_HTTP_MISDIRECTED_REQUEST...
                           CONST                 5000228D
*RNF7031 IV_HTTP_MULTI_STATUS...
                           CONST                 5000104D
*RNF7031 IV_HTTP_NETWORK_AUTH_REQUIRED...
                           CONST                 5000333D
*RNF7031 IV_HTTP_NO_CONTENT...
                           CONST                 5000090D
*RNF7031 IV_HTTP_NON_AUTHORITIVE_INFO...
                           CONST                 5000085D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     51
*RNF7031 IV_HTTP_NOT_ACCEPTABLE...
                           CONST                 5000159D
*RNF7031 IV_HTTP_NOT_EXTENDED...
                           CONST                 5000328D
*RNF7031 IV_HTTP_NOT_FOUND CONST                 5000146D
*RNF7031 IV_HTTP_NOT_IMPLEMENTED...
                           CONST                 5000284D
*RNF7031 IV_HTTP_OK        CONST                 5000066D
*RNF7031 IV_HTTP_PARTIAL_CONTENT...
                           CONST                 5000099D
*RNF7031 IV_HTTP_PAYLOAD_TOO_LARGE...
                           CONST                 5000198D
*RNF7031 IV_HTTP_PAYMENT_REQUIRED...
                           CONST                 5000131D
*RNF7031 IV_HTTP_PRECONDITION_FAILED...
                           CONST                 5000193D
*RNF7031 IV_HTTP_PRECONDITION_REQUIRED...
                           CONST                 5000259D
*RNF7031 IV_HTTP_PROXY_AUTH_REQUIRED...
                           CONST                 5000163D
*RNF7031 IV_HTTP_REQUEST_HEADER_FIELDS_TOO_LARGE...
                           CONST                 5000269D
*RNF7031 IV_HTTP_REQUEST_TIMEOUT...
                           CONST                 5000172D
*RNF7031 IV_HTTP_REQUEST_URI_TOO_LONG...
                           CONST                 5000202D
*RNF7031 IV_HTTP_REQUESTED_RANGE_NOT_SATISFIABLE...
                           CONST                 5000213D
*RNF7031 IV_HTTP_RESET_CONTENT...
                           CONST                 5000094D
*RNF7031 IV_HTTP_SERVICE_UNAVAILABLE...
                           CONST                 5000300D
*RNF7031 IV_HTTP_TEAPOT    CONST                 5000222D
*RNF7031 IV_HTTP_TOO_EARLY CONST                 5000245D
*RNF7031 IV_HTTP_TOO_MANY_REQUESTS...
                           CONST                 5000263D
*RNF7031 IV_HTTP_UNAUTHORIZED...
                           CONST                 5000125D
*RNF7031 IV_HTTP_UNAVAILABLE_FOR_LEGAL_REASONS...
                           CONST                 5000274D
*RNF7031 IV_HTTP_UNPROCESSABLE_ENTITY...
                           CONST                 5000232D
*RNF7031 IV_HTTP_UNSUPPORTED_MEDIA_TYPE...
                           CONST                 5000207D
*RNF7031 IV_HTTP_UPGRADE_REQUIRED...
                           CONST                 5000252D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     52
*RNF7031 IV_HTTP_VARIANT_ALSO_NEGOTIATES...
                           CONST                 5000315D
*RNF7031 IV_HTTP_VERSION_NOT_SUPPORTED...
                           CONST                 5000309D
*RNF7031 IV_HTTPS          CONST                 5000054D
*RNF7031 IV_JOBLOG         PROTOTYPE             5000570D
*RNF7031 IV_LONGUTF8VARCHAR...
                           A(2097152)            5000034D
                           VARYING(4)
                           CCSID(1208)
                           TEMPLATE
*RNF7031 IV_MEDIA_TYPE_ALL CONST                 5000339D
*RNF7031 IV_MEDIA_TYPE_JSON...
                           CONST                 5000343D
*RNF7031 IV_MEDIA_TYPE_XML CONST                 5000347D
*RNF7031 IV_METHOD_SIZE    CONST                 5000040D
         IV_NEWHTTPCLIENT  *(16)                 5000357D     000105      000498
                           PROTOTYPE
         IV_SETAUTHPROVIDER...
                           PROTOTYPE             5000526D     000418
         IV_SETCERTIFICATE N(1)                  5000490D     000361
                           PROTOTYPE
*RNF7031 IV_SETREQUESTDATABUFFER...
                           PROTOTYPE             5000415D
*RNF7031 IV_SETREQUESTHEADERBUFFER...
                           PROTOTYPE             5000397D
         IV_SETRESPONSEDATABUFFER...
                           PROTOTYPE             5000451D     000203      000500M
         IV_SETRESPONSEFILE...
                           PROTOTYPE             5000467D     000224
         IV_SETRESPONSEHEADERBUFFER...
                           PROTOTYPE             5000433D     000182
         IV_SETTRACE       PROTOTYPE             5000574D     000251
         IV_STATUS_ERROR   CONST                 5000038D     000306      000311      000316
                                                  000339
         IV_STATUS_OK      CONST                 5000036D     000304      000329      000336
                                                  000357
         IV_STATUS_RETRY   CONST                 5000037D     000273      000319      000342
         IV_URL_SIZE       CONST                 5000041D    5000605      000489
*RNF7031 IV_VARCHAR2       CONST                 5000376D
         IV_VARCHAR4       CONST                 5000377D     000504
*RNF7031 IV_XLATELVC       A(2097152)            5000597D
                           VARYING(4)
                           CCSID(65535)
                           PROTOTYPE
*RNF7031 IV_XLATEVC        A(32768)              5000585D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     53
                           VARYING(2)
                           CCSID(65535)
                           PROTOTYPE
         LOWER             A(26)                  000100D     000451
                           CCSID(1208)
         LVARPUCHAR_T      DS(32)               10000006D    9000028     9000029     9000047
                           TEMPLATE              9000048      000443      000444
*RNF7031   LENGTH          U(10,0)              10000007D
*RNF7031   STRING          *(16)                10000008D
*RNF7031 MEMCMP            I(10,0)               6000095D
                           PROTOTYPE
*RNF7031 MEMCPY            *(16)                 6000080D
                           PROTOTYPE
*RNF7031 MEMICMP           I(10,0)               6000100D
                           PROTOTYPE
*RNF7031 MEMMOVE           *(16)                 6000090D
                           PROTOTYPE
*RNF7031 MEMSET            *(16)                 6000085D
                           PROTOTYPE
*RNF7031 MESSAGE_ESCAPE    PROTOTYPE             8000017D
         MESSAGE_INFO      PROTOTYPE             8000006D     000246M     000374M
         NO_RETRIES        CONST                  000097D     000516
         NULL              CONST                  000054D     000124      000126      000127
                                                  000128      000129      000130      000131
*RNF7031 O_NDELAY          CONST                 6000168D
*RNF7031 O_NONBLOCK        CONST                 6000167D
         PARSEURL          PROTOTYPE             4000010D     000288M
*RNF7031 PLAIN_SOCKET      CONST                11000006D
*RNF7031 PLVARCHAR_T       DS(1048580)          10000011D
                           TEMPLATE
*RNF7031   LENGTH          I(10,0)              10000012D
*RNF7031   STRING          A(1048576)           10000013D
*RNF7031 QSORT             *(16)                 6000131D
                           PROTOTYPE
*RNF7031 QUSBAVL           I(10,0)               7000050D
*RNF7031 QUSBAVL14         I(10,0)               7000065D
*RNF7031 QUSBPRV           I(10,0)               7000048D
*RNF7031 QUSBPRV00         I(10,0)               7000063D
*RNF7031 QUSCCSID11        I(10,0)               7000071D
*RNF7031 QUSC0200          DS(32)                7000059D
         QUSEC             DS(16)                7000046D    6000075
*RNF7031 QUSEI             A(7)                  7000052D
*RNF7031 QUSEI00           A(7)                  7000067D
*RNF7031 QUSERVED          A(1)                  7000054D
*RNF7031 QUSERVED39        A(1)                  7000069D
*RNF7031 QUSK01            I(10,0)               7000061D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     54
*RNF7031 QUSLED01          I(10,0)               7000075D
*RNF7031 QUSOED01          I(10,0)               7000073D
         R_OK              CONST                  000047D     000372
*RNF7031 RAND              I(10,0)               6000129D
                           PROTOTYPE
         RECEIVEDATA       I(10,0)               4000023D     000333
                           PROTOTYPE
         RECEIVEHEADER     I(10,0)               4000019D     000315
                           PROTOTYPE
*RNF7031 REQUESTCONTROLBLOCKLOWER...
                           DS(22)                6000055D
*RNF7031   CASE            I(10,0)               6000059D
*RNF7031   CCSID           I(10,0)               6000058D
*RNF7031   RES1            A(10)                 6000060D
*RNF7031   TYPE            I(10,0)               6000057D
         REQUESTCONTROLBLOCKUPPER...
                           DS(22)                6000062D    6000071
*RNF7031   CASE            I(10,0)               6000066D
*RNF7031   CCSID           I(10,0)               6000065D
*RNF7031   RES1            A(10)                 6000067D
*RNF7031   TYPE            I(10,0)               6000064D
         SECURE_HANDSHAKE_IMEDIATE...
                           CONST                11000007D     000388
*RNF7031 SECURE_HANDSHAKE_LATER...
                           CONST                11000008D
         SENDREQUEST       I(10,0)               4000015D     000310
                           PROTOTYPE
         SLIST_FOREACH     N(1)                  9000060D     000173      000479
                           PROTOTYPE
         SLIST_FREE        PROTOTYPE             9000034D     000155M     000178M
*RNF7031 SLIST_LOOKUPLVPC  A(1048576)            9000051D
                           VARYING(4)
                           PROTOTYPE
         SLIST_NEW         *(16)                 9000032D     000120
                           PROTOTYPE
*RNF7031 SLIST_PUSH        *(16)                 9000038D
                           PROTOTYPE
         SLIST_PUSHLVPC    *(16)                 9000045D     000461M
                           PROTOTYPE
         SLIST_SETITERATOR DS(48)                9000056D     000171      000478
                           PROTOTYPE
*RNF7031 SLIST_T           DS(36)                9000015D
                           TEMPLATE
*RNF7031   LENGTH          I(10,0)               9000018D
*RNF7031   PHEAD           *(16)                 9000016D
*RNF7031   PTAIL           *(16)                 9000017D
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     55
         SLISTITERATOR_T   DS(48)                9000021D    9000056     9000061      000167
                           TEMPLATE               000472
*RNF7031   HASNEXT         N(1)                  9000024D
*RNF7031   PNEXT           *(16)                 9000023D
*RNF7031   PTHIS           *(16)                 9000022D
         SLISTKEYVAL_T     DS(64)                9000027D     000169      000474
                           TEMPLATE
*RNF7031   KEY             DS(32)                9000028D
*RNF7031   VALUE           DS(32)                9000029D
         SLISTNODE_T       DS(48)                9000009D     000168      000473
                           TEMPLATE
*RNF7031   PAYLOADDATA     *(16)                 9000012D
*RNF7031   PAYLOADLENGTH   I(10,0)               9000011D
*RNF7031   PNEXT           *(16)                 9000010D
         SOCKETS_CONNECT   I(3,0)               11000023D     000297
                           PROTOTYPE
         SOCKETS_FREE      PROTOTYPE            11000019D     000154M
         SOCKETS_NEW       *(16)                11000017D     000119
                           PROTOTYPE
         SOCKETS_SETSSL    PROTOTYPE            11000010D     000386M
         SOCKETS_SETTRACE  PROTOTYPE            11000031D     000259M
*RNF7031 SRAND             PROTOTYPE             6000126D
*RNF7031 STRCASECMP        I(10,0)               6000038D
                           PROTOTYPE
*RNF7031 STRCMP            I(10,0)               6000025D
                           PROTOTYPE
*RNF7031 STRCMPI           I(10,0)               6000034D
                           PROTOTYPE
*RNF7031 STRCSPN           I(10,0)               6000051D
                           PROTOTYPE
*RNF7031 STRERR            *(16)                 6000149D
                           PROTOTYPE
         STRERROR          *(16)                 6000152D     000246      000375
                           PROTOTYPE
*RNF7031 STRLEN            U(10,0)               6000022D
                           PROTOTYPE
*RNF7031 STRNCASECMP       I(10,0)               6000042D
                           PROTOTYPE
*RNF7031 STRNCMP           I(10,0)               6000029D
                           PROTOTYPE
*RNF7031 STRSTR            *(16)                 6000047D
                           PROTOTYPE
*RNF7031 STRTOK            *(16)                 6000018D
                           PROTOTYPE
*RNF7031 SYSTEM            I(10,0)               6000123D
                           PROTOTYPE
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     56
         TERASPACE_ALLOC   *(16)                12000006D     000110      000116      000454
                           PROTOTYPE              000458
*RNF7031 TERASPACE_CALLOC  *(16)                12000010D
                           PROTOTYPE
         TERASPACE_FREE    PROTOTYPE            12000014D     000152M     000153M     000156M
                                                  000157M     000158M     000174M     000175M
                                                  000427M
*RNF7031 TERASPACE_LEAK    N(1)                 12000037D
                           PROTOTYPE
*RNF7031 TERASPACE_REALLOC *(16)                12000026D
                           PROTOTYPE
*RNF7031 TERASPACE_SIZE    U(20,0)              12000031D
                           PROTOTYPE
*RNF7031 TERASPACE_STAT    PROTOTYPE            12000035D
*RNF7031 TERASPACE_STRDUP  *(16)                12000018D
                           PROTOTYPE
         TERASPACE_STRTRIMDUP...
                           *(16)                12000022D     000277      000278
                           PROTOTYPE
*RNF7031 TERASPACE_USE     U(20,0)              12000039D
                           PROTOTYPE
*RNF7031 TMPNAM            *(16)                 6000117D
                           PROTOTYPE
*RNF7031 TMPNAMIFS         *(16)                 6000120D
                           PROTOTYPE
         TRUE              CONST                  000053D     000303
         UNLINK            I(10,0)                000027D     000241M
                           PROTOTYPE
         UPPER             A(26)                  000099D     000451
                           CCSID(1208)
*RNF7031 VARCHAR_T         DS(32769)            10000016D
                           TEMPLATE
*RNF7031   LENGTH          I(5,0)               10000017D
*RNF7031   STRING          A(32767)             10000018D
*RNF7031 VC2STR            *(16)                10000021D
                           PROTOTYPE
*RNF7031 W_OK              CONST                  000048D
*RNF7031 X_OK              CONST                  000049D
      Field References for subprocedure IV_NEWHTTPCLIENT
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000108D     000111M     000113M     000114M
                           BASED(PCLIENT)         000116M     000117M     000119M     000120M
                                                  000121M     000122M     000124M     000125M
                                                  000126M     000127M     000128M     000129M
                                                  000130M     000131M
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     57
           BUFFER          *(16)                  000116
           BUFFERSIZE      I(10,0)                000117
           HEADERLIST      *(16)                  000120
           HOST            A(512)                 000127
           LOCATION        A(256)                 000130
           MESSAGE         A(256)                 000131
           METHOD          *(16)                  000113
           PASSWORD        A(256)                 000129
           PORT            I(10,0)                000125
           RESOURCE        A(32766)               000126
           RETRIES         I(5,0)                 000122
           SERVER          A(512)                 000124
           SOCKETS         *(16)                  000119
           TIMEOUT         I(5,0)                 000121
           URL             *(16)                  000114
           USER            A(256)                 000128
         PCLIENT           *(16)                  000108      000110M     000133      000135
      Field References for subprocedure IV_FREE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000144D     000150      000152      000153
                           BASED(PCLIENT)         000154      000155      000156      000157
           AUTHPROVIDER    *(16)                  000156
           BUFFER          *(16)                  000157
           HEADERLIST      *(16)                  000150      000155
           METHOD          *(16)                  000152
           SOCKETS         *(16)                  000154
           URL             *(16)                  000153
         PCLIENT           *(16)                  000141D     000144      000146      000158
      Field References for subprocedure DEALLOCATEHEADERS
         Field             Attributes         References (D=Defined M=Modified)
         ITERATOR          DS(48)                 000167D     000168      000171M     000173
           PTHIS           *(16)                  000168
         LIST              *(16)                  000164D     000171      000178
                           BASED(_QRNL_PST+)
         NODE              DS(48)                 000168D     000169
                           BASED(ITERATOR.+)
           PAYLOADDATA     *(16)                  000169
         PAYLOAD           DS(64)                 000169D     000174      000175
                           BASED(NODE.PAYL+)
           KEY             DS(32)                 000174
             STRING        *(16)                  000174
           VALUE           DS(32)                 000175
             STRING        *(16)                  000175
      Field References for subprocedure IV_SETRESPONSEHEADERBUFFER
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     58
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            *(16)                  000185D     000195
         BUFFERCCSID       I(10,0)                000188D     000198
         BUFFERSIZE        I(10,0)                000186D     000196
         BUFFERTYPE        I(5,0)                 000187D     000197
         CLIENT            DS(35120)              000191D     000194
                           BASED(PCLIENT)
           RESPONSEHEADERBUFFER...
                           DS(32)                 000194
         PCLIENT           *(16)                  000184D     000191
      Field References for subprocedure IV_SETRESPONSEDATABUFFER
         Field             Attributes         References (D=Defined M=Modified)
         BUFFER            *(16)                  000206D     000216
         BUFFERCCSID       I(10,0)                000209D     000219
         BUFFERSIZE        I(10,0)                000207D     000217
         BUFFERTYPE        I(5,0)                 000208D     000218
         CLIENT            DS(35120)              000212D     000215
                           BASED(PCLIENT)
           RESPONSEDATABUFFER...
                           DS(32)                 000215
         PCLIENT           *(16)                  000205D     000212
      Field References for subprocedure IV_SETRESPONSEFILE
         Field             Attributes         References (D=Defined M=Modified)
         C_ERRNO           I(10,0)                000232D     000246
                           BASED(PERRNO)
         CLIENT            DS(35120)              000231D     000243M     000244
                           BASED(PCLIENT)
           RESPONSEDATAFILE...
                           *(16)                  000243      000244
         FILECCSID         I(10,0)                000228D     000238
         FILENAME          *(16)                  000227D     000241      000243
         MODE              A(32)                  000233D     000236M     000238M     000243
         PCLIENT           *(16)                  000226D     000231
         PERRNO            *(16)                  000232      000245M
      Field References for subprocedure IV_SETTRACE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000257D     000259
                           BASED(PCLIENT)
           SOCKETS         *(16)                  000259
         PCLIENT           *(16)                  000253D     000257
         TRACEFILENAME     *(16)                  000254D     000259
      Field References for subprocedure IV_EXECUTE
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     59
         Field             Attributes         References (D=Defined M=Modified)
         APISTATUS         I(10,0)                000273D     000304M     000306M     000310M
                                                  000311      000315M     000316      000319
                                                  000329M     000331M     000333M     000336
                                                  000339      000342      000357
         CLIENT            DS(35120)              000272D     000277M     000278M     000281M
                           BASED(PCLIENT)         000285M     000290      000291      000292
                                                  000293      000295      000298      000299
                                                  000300      000301      000323      000327
                                                  000327      000330      000348      000349
                                                  000351      000352
           HOST            A(512)                 000292
           METHOD          *(16)                  000277      000327
           PORT            I(10,0)                000290      000300
           RESOURCE        A(32766)               000293
           RESPONSEDATABUFFER...
                           DS(32)                 000349
           RESPONSEDATAFILE...
                           *(16)                  000351      000352
           RESPONSEHEADERBUFFER...
                           DS(32)                 000348
           RESPONSEISCHUNKED...
                           N(1)                   000330
           RETRIES         I(5,0)                 000285      000295
           SERVER          A(512)                 000291      000299
           SOCKETS         *(16)                  000298
           STATUS          I(10,0)                000323      000327
           TIMEOUT         I(5,0)                 000281      000301
           URL             *(16)                  000278
         METHOD            *(16)                  000266D     000277
         OK                I(3,0)                 000275D     000297M     000303
         PCLIENT           *(16)                  000265D     000272      000288      000310
                                                  000315      000331      000333
         RETRIES           I(10,0)                000269D     000285
         TIMEOUT           I(10,0)                000268D     000281
         TRY               I(5,0)                 000274D     000295
         URL               *(16)                  000267D     000278      000288
      Field References for subprocedure IV_SETCERTIFICATE
         Field             Attributes         References (D=Defined M=Modified)
         C_ERRNO           I(10,0)                000369D     000375
                           BASED(PERRNO)
         CERTIFICATEFILE   *(16)                  000364D     000372      000376      000389
         CERTIFICATEPASSWORD...
                           *(16)                  000365D     000383M     000390
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     60
         CLIENT            DS(35120)              000368D     000387
                           BASED(PCLIENT)
           SOCKETS         *(16)                  000387
         EMPTY_STR         A(1)                   000370D     000383
         PCLIENT           *(16)                  000363D     000368
         PERRNO            *(16)                  000369      000373M
      Field References for subprocedure IV_GETSTATUS
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000402D     000404
                           BASED(PCLIENT)
           STATUS          I(10,0)                000404
         PCLIENT           *(16)                  000399D     000402
      Field References for subprocedure IV_GETMESSAGE
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000412D     000414
                           BASED(PCLIENT)
           MESSAGE         A(256)                 000414
         PCLIENT           *(16)                  000409D     000412
      Field References for subprocedure IV_SETAUTHPROVIDER
         Field             Attributes         References (D=Defined M=Modified)
         AUTHPROVIDER      *(16)                  000421D     000430
         CLIENT            DS(35120)              000424D     000426      000427      000430M
                           BASED(PCLIENT)
           AUTHPROVIDER    *(16)                  000426      000427      000430
         PCLIENT           *(16)                  000420D     000424
      Field References for subprocedure IV_ADDHEADER
         Field             Attributes         References (D=Defined M=Modified)
         CLIENT            DS(35120)              000441D     000461
                           BASED(PCLIENT)
           HEADERLIST      *(16)                  000461
         HEADERNAME        A(1024)                000437D     000446      000451
                           VARYING(2)
                           CCSID(1208)
         HEADERVALUE       A(16384)               000438D     000457      000459
                           VARYING(2)
                           CCSID(1208)
         LISTKEY           DS(32)                 000443D     000453M     000454M     000454
                                                  000455M     000455      000461
           LENGTH          U(10,0)                000453      000454      000455
           STRING          *(16)                  000454      000455
         LISTVALUE         DS(32)                 000444D     000457M     000458M     000458
                                                  000459M     000459      000461
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     61
           LENGTH          U(10,0)                000457      000458      000459
           STRING          *(16)                  000458      000459
         LOWERNAME         A(1024)                000442D     000451M     000453      000455
                           VARYING(2)
                           CCSID(1208)
         PCLIENT           *(16)                  000436D     000441
      Field References for subprocedure IV_ADDHEADERS
         Field             Attributes         References (D=Defined M=Modified)
*RNF7031 CLIENT            DS(35120)              000471D
                           BASED(PCLIENT)
         HEADERNAME        A(1024)                000475D     000480M     000482
                           VARYING(2)
                           CCSID(1208)
         HEADERS           *(16)                  000468D     000478
         HEADERVALUE       A(16384)               000476D     000481M     000482
                           VARYING(2)
                           CCSID(1208)
         ITERATOR          DS(48)                 000472D     000473      000478M     000479
           PTHIS           *(16)                  000473
         NODE              DS(48)                 000473D     000474
                           BASED(ITERATOR.+)
           PAYLOADDATA     *(16)                  000474
         NODEPAYLOAD       DS(64)                 000474D     000480      000480      000481
                           BASED(NODE.PAYL+)      000481
           KEY             DS(32)                 000480      000480
             LENGTH        U(10,0)                000480
             STRING        *(16)                  000480
           VALUE           DS(32)                 000481      000481
             LENGTH        U(10,0)                000481
             STRING        *(16)                  000481
         PCLIENT           *(16)                  000467D     000471      000482
      Field References for subprocedure IV_GET
         Field             Attributes         References (D=Defined M=Modified)
         ACCEPTMIMETYPE    A(16384)               000490D     000509
                           VARYING(2)
                           CCSID(1208)
         CLIENT            *(16)                  000494D     000498M     000501      000509
                                                  000513      000516      000521
         HEADERS           *(16)                  000491D     000513
         RC                N(1)                   000496D     000516M
         RETURNBUFFER      A(1048576)             000495D     000502      000518
                           VARYING(4)
                           CCSID(1208)
         URL               A(32766)               000489D     000516
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     62
                           VARYING(2)
      Indicator References:
         Indicator                            References (D=Defined M=Modified)
       * * * * *   E N D   O F   C R O S S   R E F E R E N C E   * * * * *
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     63
                      E x t e r n a l   R e f e r e n c e s
      Statically bound procedures:
         Procedure                            References
         ceil                                    6000108
         rand                                    6000129
         atoi                                    6000203
         floor                                   6000111
         srand                                   6000126
         qsort                                   6000131
         fcntl                                   6000197
         strtok                                  6000018
         strlen                                  6000022
         strcmp                                  6000025
         strstr                                  6000047
         memcpy                                  6000080
         memset                                  6000085
         memcmp                                  6000095
         tmpnam                                  6000117
         system                                  6000123
         vc2str                                 10000021
         unlink                                               000241
         access                                   000031      000372
         strncmp                                 6000029
         strcmpi                                 6000034
         strcspn                                 6000051
         memmove                                 6000090
         bsearch                                 6000137
         __errno                                 6000147      000245      000373
         iv_debug                                             000290      000291      000292
                                                  000293      000323
         parseUrl                                             000288
         strerror                                6000149     6000152      000246      000375
         iv_joblog                               5000570
         __memicmp                               6000100
         sList_new                               9000032      000120
         iv_xlateVc                              5000585
         strcasecmp                              6000038
         sList_free                              9000034      000155      000178
         sList_push                              9000038
         sendRequest                                          000310
         receiveData                                          000333
         iv_xlateLvc                             5000597
         strncasecmp                             6000042
         sockets_new                            11000017      000119
         message_info                            8000006      000246      000377
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     64
         sockets_free                           11000019      000154
         _C_IFS_fopen                             000018      000243
         iv_debug_init
         receiveHeader                                        000315
         _C_IFS_tmpnam                           6000120
         sList_foreach                           9000060      000173      000479
         teraspace_use
         _C_IFS_fclose                            000023      000352
         iv_anychar_set                          1000016      000199      000220
         QlgConvertCase                          6000069
         message_escape                          8000017
         sList_pushLVPC                          9000045      000461
         sockets_setSSL                         11000010      000391
         teraspace_free                                       000152      000153      000156
                                                  000157      000158      000174      000175
                                                  000427
         teraspace_size
         teraspace_stat
         teraspace_leak
         iv_decodeBase64                         5000542
         iv_encodeBase64                         5000556
         sockets_connect                        11000023      000302
         teraspace_alloc                                      000110      000116      000454
                                                  000458
         sList_lookupLVPC                        9000051
         sockets_setTrace                       11000031      000259
         teraspace_calloc
         teraspace_strdup
         iv_anychar_append                       1000024
         sList_setIterator                       9000056      000171      000478
         teraspace_realloc
         iv_chunked_receive                                   000331
         iv_anychar_finalize                     1000030      000348      000349
         teraspace_strTrimDup                                 000277      000278
         iv_setRequestDataBuffer
         iv_setRequestHeaderBuffer
      Imported fields:
         Field             Attributes         Defined
         No references in the source.
      Exported fields:
         Field             Attributes         Defined
         No references in the source.
   * * * * *   E N D   O F   E X T E R N A L   R E F E R E N C E S   * * * * *
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     65
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     66
                          M e s s a g e   S u m m a r y
 Msg id  Sv Number Message text
*RNF5409 00      3 The prototyped call returns a value which is lost when CALLP
                   is used.
*RNF7031 00    729 The name or indicator is not referenced.
       * * * * *   E N D   O F   M E S S A G E   S U M M A R Y   * * * * *
 5770WDS V7R2M0  140418 RN        IBM ILE RPG             ILEVATOR/API             DKSRV206   11-05-23 16:32:26        Page     67
                            F i n a l   S u m m a r y
  Message Totals:
    Information  (00) . . . . . . . :      732
    Warning      (10) . . . . . . . :        0
    Error        (20) . . . . . . . :        0
    Severe Error (30+)  . . . . . . :        0
    ---------------------------------  -------
    Total . . . . . . . . . . . . . :      732
  Source Totals:
    Records . . . . . . . . . . . . :     1710
    Specifications  . . . . . . . . :      815
    Data records  . . . . . . . . . :        0
    Comments  . . . . . . . . . . . :      794
         * * * * *   E N D   O F   F I N A L   S U M M A R Y   * * * * *
Module API placed in library ILEVATOR. 00 highest severity. Created on 11-05-23 at 16:32:26.
          * * * * *   E N D   O F   C O M P I L A T I O N   * * * * *
